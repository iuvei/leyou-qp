{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Global.js"],"names":["cc","Class","extends","Component","properties","onLoad","log","window","th","initManager","urlParse","node","getContentSize","width","height","wsurl","myself","account_id","nickname","headimgurl","account_ticket","phone","isPlayer","needLookCount","token","sign","gametype","room","room_id","room_number","players","guests","max_count","copyurl","seatxy","chattxt","getNiuIndex","cardType","comboPoint","Number","index","getSeatXY","toString","getGuestById","find","guest","getPlayerById","player","getLocalIndex","total","rindex","getMyselfSeatIndex","getSeatIndexById","serial_num","getMyselfPlayer","getMyselfLocalIndex","getMyselfAccountId","getBankerPlayer","is_banker","initRoom","banker_mode","clear","room_status","forEach","account_status","banker_multiples","multiples","cards","card_type","combo_array","combo_point","getRoomCopyUrl","params","operation","session","data","roomId","type","url","href","ws","send","JSON","stringify","webCopyString","content","sys","isBrowser","input","el","document","createElement","value","setAttribute","style","contain","position","left","fontSize","selection","getSelection","originalRange","rangeCount","getRangeAt","body","appendChild","select","selectionStart","selectionEnd","length","success","execCommand","err","removeChild","removeAllRanges","addRange","webCaptureScreen","director","once","Director","EVENT_AFTER_DRAW","canvas","getElementById","base64","toDataURL","image","Image","src","append","require","AudioManager","audioManager","init","playBGM","WebSocketManager","webSocketManager","initHandlers","code","location","name","num","indexOf","paramsStr","substr","arr","split","i","substring","args"],"mappings":"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","file":"Global.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {},\r\n\r\n    onLoad: function() {\r\n        cc.log(\"Global onLoad....................\");\r\n        window.th = window.th || {};\r\n\r\n        this.initManager();\r\n        this.urlParse();\r\n\r\n        const { width, height } = this.node.getContentSize();\r\n        th.wsurl = \"ws://47.96.177.207:10000/api\"; //websocket连接地址\r\n        th.width = width; //宽度\r\n        th.height = height; //高度\r\n        th.myself = {\r\n            account_id: \"000000\",\r\n            nickname: \"游客\", //名字\r\n            headimgurl: \"\", //头像\r\n            account_ticket: 0, //房卡\r\n            phone: \"--------\",\r\n            isPlayer: false, //是不是玩家（不是玩家就是游客）， false=游客\r\n            needLookCount: 0 //只用为0才能点击摊牌  会在收到 ShowCard 设置\r\n        };\r\n        th.token = null;\r\n        th.sign = null;\r\n        th.gametype = null; //游戏类型 nn,zjh\r\n        th.room = {\r\n            room_id: null,\r\n            room_number: null,\r\n            players: [], //游戏人员列表\r\n            guests: [], //观战人员列表\r\n            max_count: 0, //总人数\r\n            copyurl: null //要copy的地地址\r\n        };\r\n        //座位坐标\r\n        th.seatxy = {\r\n            \"6\": [\r\n                [-305, -420],\r\n                [305, -100],\r\n                [305, 200],\r\n                [-100, 485],\r\n                [-305, 200],\r\n                [-305, -100]\r\n            ],\r\n            \"9\": [\r\n                [-305, -420],\r\n                [305, -200],\r\n                [305, 0],\r\n                [305, 200],\r\n                [305, 400],\r\n                [-305, 400],\r\n                [-305, 200],\r\n                [-305, 0],\r\n                [-305, -200]\r\n            ],\r\n            \"10\": [\r\n                [-305, -420],\r\n                [305, -220],\r\n                [305, -40],\r\n                [305, 140],\r\n                [305, 320],\r\n                [-100, 485],\r\n                [-305, 320],\r\n                [-305, 140],\r\n                [-305, -40],\r\n                [-305, -220]\r\n            ],\r\n            \"12\": [\r\n                [-305, -420],\r\n                [305, -260],\r\n                [305, -110],\r\n                [305, 40],\r\n                [305, 190],\r\n                [305, 340],\r\n                [-100, 485],\r\n                [-305, 340],\r\n                [-305, 190],\r\n                [-305, 40],\r\n                [-305, -110],\r\n                [-305, -260]\r\n            ],\r\n            \"13\": [\r\n                [-305, -420],\r\n                [305, -260],\r\n                [305, -110],\r\n                [305, 40],\r\n                [305, 190],\r\n                [305, 340],\r\n                [305, 485],\r\n                [-305, 485],\r\n                [-305, 340],\r\n                [-305, 190],\r\n                [-305, 40],\r\n                [-305, -110],\r\n                [-305, -260]\r\n            ]\r\n        };\r\n        th.chattxt = [\r\n            \"快准备，开始了\",\r\n            \"大家好，很高兴见到各位\",\r\n            \"别跟我抢庄\",\r\n            \"快一点吧，我等的花也谢了\",\r\n            \"我当年横扫澳门五条街\",\r\n            \"算你牛逼\",\r\n            \"我给你们送温暖了\",\r\n            \"你的牌打的太好了\",\r\n            \"这牌有毒\",\r\n            \"手抖了，不好意思哈\",\r\n            \"老铁666啊\",\r\n            \"我墙都不扶，就服你\",\r\n            \"不要走，决战到天亮\",\r\n            \"输的裤衩都没了\",\r\n            \"谢谢老板\",\r\n            \"搏一搏，单车变摩托\",\r\n            \"快点下注，一会就没有机会了\",\r\n            \"底牌亮起来，绝对吓死你\",\r\n            \"我加注了，你敢不敢跟\",\r\n            \"我通杀全场这些钱都是我的\"\r\n        ];\r\n        th.getNiuIndex = function(cardType, comboPoint) {\r\n            cardType = Number(cardType);\r\n            let index = 0;\r\n            if (cardType == 1) {\r\n                index = 0;\r\n            } else if (cardType >= 4 && cardType <= 14) {\r\n                index = cardType + 6;\r\n            } else {\r\n                index = comboPoint;\r\n            }\r\n            return index;\r\n        };\r\n        th.getSeatXY = function() {\r\n            return th.seatxy[this.room.max_count.toString()];\r\n        };\r\n        th.getGuestById = function(account_id) {\r\n            return this.room.guests.find(\r\n                guest => guest.account_id == account_id\r\n            );\r\n        };\r\n        th.getPlayerById = function(account_id) {\r\n            return this.room.players.find(\r\n                player => player.account_id == account_id\r\n            );\r\n        };\r\n        th.getLocalIndex = function(index) {\r\n            let total = Number(th.room.max_count);\r\n            let rindex =\r\n                (Number(index) - th.getMyselfSeatIndex() + total) % total;\r\n            return rindex;\r\n        };\r\n        th.getSeatIndexById = function(account_id) {\r\n            let player = this.getPlayerById(account_id);\r\n            return player.serial_num - 1;\r\n        };\r\n        th.getMyselfPlayer = function() {\r\n            if (!th.myself.isPlayer) {\r\n                return th.room.players[0]; //如果观战选每一个人当视角\r\n            } else {\r\n                let player = this.getPlayerById(th.myself.account_id);\r\n                return player;\r\n            }\r\n        };\r\n        th.getMyselfSeatIndex = function() {\r\n            let player = th.getMyselfPlayer();\r\n            return Number(player.serial_num) - 1;\r\n        };\r\n        th.getMyselfLocalIndex = function() {\r\n            let player = this.getMyselfPlayer();\r\n            return this.getLocalIndex(player.serial_num - 1);\r\n        };\r\n        th.getMyselfAccountId = function() {\r\n            return th.getMyselfPlayer().account_id;\r\n        };\r\n        th.getBankerPlayer = function() {\r\n            return this.room.players.find(player => player.is_banker == 1);\r\n        };\r\n        th.initRoom = function() {\r\n            if (\r\n                th.room.banker_mode == 1 ||\r\n                th.room.banker_mode == 3 ||\r\n                th.room.banker_mode == 4 ||\r\n                th.room.banker_mode == 5\r\n            ) {\r\n                //自由抢庄\r\n                th.myself.needLookCount = 2;\r\n            } else if (th.room.banker_mode == 2) {\r\n                //名牌抢庄\r\n                th.myself.needLookCount = 1;\r\n            }\r\n        };\r\n        th.clear = function() {\r\n            th.room.room_status = 1;\r\n            th.room.players.forEach(player => {\r\n                player.account_status = 1;\r\n                player.banker_multiples = \"\";\r\n                player.multiples = 0;\r\n                player.cards = [];\r\n                player.card_type = 0;\r\n                player.combo_array = [];\r\n                player.combo_point = 0;\r\n                if (th.room.banker_mode != 5) {\r\n                    player.is_banker = 0;\r\n                }\r\n            });\r\n            th.initRoom();\r\n        };\r\n        th.getRoomCopyUrl = function() {\r\n            //先把要COPY的房间URL请求回来\r\n            const params = {\r\n                operation: \"getCopyUrl\",\r\n                account_id: th.myself.account_id,\r\n                session: th.sign,\r\n                data: {\r\n                    roomId: th.room.room_number,\r\n                    type: th.gametype,\r\n                    url: th.href\r\n                }\r\n            };\r\n            cc.log(\"===>>>[getCopyUrl] Global:\", params);\r\n            th.ws.send(JSON.stringify(params));\r\n        };\r\n        th.webCopyString = function(content) {\r\n            //确保在浏览器中\r\n            if (cc.sys.isBrowser) {\r\n                const input = content + \"\";\r\n                const el = document.createElement(\"textarea\");\r\n                el.value = input;\r\n                el.setAttribute(\"readonly\", \"\");\r\n                el.style.contain = \"strict\";\r\n                el.style.position = \"absolute\";\r\n                el.style.left = \"-9999px\";\r\n                el.style.fontSize = \"12pt\"; // Prevent zooming on iOS\r\n\r\n                const selection = getSelection();\r\n                let originalRange = false;\r\n                if (selection.rangeCount > 0) {\r\n                    originalRange = selection.getRangeAt(0);\r\n                }\r\n                document.body.appendChild(el);\r\n                el.select();\r\n                el.selectionStart = 0;\r\n                el.selectionEnd = input.length;\r\n                let success = false;\r\n                try {\r\n                    success = document.execCommand(\"copy\");\r\n                } catch (err) {}\r\n\r\n                document.body.removeChild(el);\r\n                if (originalRange) {\r\n                    selection.removeAllRanges();\r\n                    selection.addRange(originalRange);\r\n                }\r\n                return success;\r\n            }\r\n            return false;\r\n        };\r\n        th.webCaptureScreen = function() {\r\n            if (cc.sys.isBrowser) {\r\n                cc.director.once(cc.Director.EVENT_AFTER_DRAW, () => {\r\n                    // 获取base64截图\r\n                    const canvas = document.getElementById(\"GameCanvas\");\r\n                    const base64 = canvas.toDataURL();\r\n\r\n                    /*\r\n                    // 1.用cc.Sprite组件显示截图\r\n                    const image = new Image();\r\n                    image.src = base64;\r\n                    image.onload = () => {\r\n                        const texture = new cc.Texture2D();\r\n                        texture.initWithElement(image);\r\n                        texture.handleLoadedTexture();\r\n                        const spriteFrame = new cc.SpriteFrame(texture);\r\n                        // this.img是cc.Sprite组件.\r\n                        this.img.spriteFrame = spriteFrame;\r\n                    }\r\n                    */\r\n\r\n                    // 2.用http的img显示截图（可以保存图片到本地）\r\n\r\n                    const image = new Image();\r\n                    image.src = base64;\r\n                    const body = document.createElement(\"body\");\r\n                    body.append(image);\r\n                    document.body = body;\r\n                    image.setAttribute(\"width\", \"100%\");\r\n                    image.setAttribute(\"height\", \"100%\");\r\n                });\r\n            }\r\n        };\r\n    },\r\n    initManager() {\r\n        th.ws = require(\"WebSocket\");\r\n\r\n        const AudioManager = require(\"AudioManager\");\r\n        th.audioManager = new AudioManager();\r\n        th.audioManager.init();\r\n\r\n        //播放背景音乐\r\n        th.audioManager.playBGM(\"background.mp3\");\r\n\r\n        const WebSocketManager = require(\"WebSocketManager\");\r\n        th.webSocketManager = new WebSocketManager();\r\n        th.webSocketManager.initHandlers();\r\n    },\r\n    urlParse() {\r\n        let params = { code: 123 };\r\n        if (window.location == null) {\r\n            return params;\r\n        }\r\n        let name, value;\r\n        let location = window.location.href; //取得整个地址栏\r\n        let num = location.indexOf(\"?\");\r\n        let paramsStr = location.substr(num + 1); //取得所有参数   stringvar.substr(start [, length ]\r\n        let arr = paramsStr.split(\"&\"); //各个参数放到数组里\r\n        for (let i = 0; i < arr.length; i++) {\r\n            num = arr[i].indexOf(\"=\");\r\n            if (num > 0) {\r\n                name = arr[i].substring(0, num);\r\n                value = arr[i].substr(num + 1);\r\n                params[name] = value;\r\n            }\r\n        }\r\n        cc.log(\"Params:\", params);\r\n        th.href = location.substr(0, location.indexOf(\"?\"));\r\n        th.args = params;\r\n    }\r\n});\r\n"]}