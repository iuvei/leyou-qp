{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\GameNN.js"],"names":["cc","Class","extends","Component","properties","seatPrefab","Prefab","baseNode","Node","nodeSeats","componentSeats","nodePokers","nodeAmins","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnBankerMtp1","Button","btnBankerMtp2","btnBankerMtp4","btnPlayerMtp1","btnPlayerMtp2","btnPlayerMtp3","btnPlayerMtp4","btnQiang","btnBuqiang","btnReady","btnShow","btnXiazhuang","btnShangzhuang","btnBuShangzhuang","sprWaitBet","Sprite","sprPlayerBet","sprQiangzhuang","sprReady","sprWaitPlayerBet","sprWaitShow","sprWaitNext","spriteClickLookPai","coinPrefab","resultNode","resultDeatilNode","resultItemPrefab","resultDetailItemPrefab","resultDetailSonItemPrefab","btnCaptureScreen","btnTest","holdTimeEclipse","holdClick","_countdownEndTime","_isPlay","onLoad","th","log","initEventHandlers","initView","node","on","emit","onChanganbaocunClicked","onEnable","start","webSocketManager","dataEventHandler","player","initSingleSeat","myself","isPlayer","account_id","getMyselfAccountId","refreshOptions","data","initRoomInfo","setCountdown","limit_time","showPokers","bankerMode","room","banker_mode","forEach","oldPlayer","getPlayerById","grab_array","index","scheduleOnce","getLocalIndex","serial_num","doBlink","length","getBankerPlayer","nickname","setBanker","delayTime","getMyselfPlayer","cards","pokers","children","showCard","needLookCount","poker","pokerId","idx","showOpenPokerAnim","account_status","onShowClicked","item","nodePoker","nodeSeat","hasNiu","getNiuIndex","card_type","combo_point","combo_array","isMyself","getMyselfLocalIndex","firstX","x","firstY","offset","runAction","sequence","moveTo","v2","callFunc","target","addChild","pokerManager","getPokerSpriteById","y","showNiuType","removeAllChildren","tagerPalyer","winner_array","seatxy","getSeatXY","tx","ty","audioManager","playSFX","loser_array","loser","i","coin","instantiate","easing","easeSineOut","removeFromParent","loserCount","filter","winer","winerCount","winner","offsetCount","score_board","account_ids","Object","keys","account_score","setScoreAnim","clear","players","is_banker","game_num","total_num","wc","show","toConnectApi","hide","active","balance_scoreboard","room_number","time","room_creator","scoreboard","getChildByName","getComponent","string","itemNode","name","score","headImg","loader","load","url","avatar","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","create_time","rule_text","resultDetailNode","balance_board","player_array","player_cards","roundNode","playersNode","playerNode","chip","card_type_str","headimg","pokerNode","card","alert","onResultCloseClicked","args","room_id","gametype","director","loadScene","onZhanjiseachClicked","params","operation","session","sign","num2","num","ws","send","JSON","stringify","onResultDetailCloseClicked","webCaptureScreen","niuType","getNiuSprite","scale","scaleTo","niuIndex","mp3Name","initSeat","initMtpBtn","room_status","Array","fill","bet_type_arr","mtp1","mtp2","mtp3","mtp4","acitve","multiples","noBanker","isZYQZ","isMPQZ","isGDZJ","isShowBtnReady","isShowQiangBrank","isShowSelectMultiples","isShowText","isShowClickLookPai","base_score","seatsxy","seat","seatIndex","push","setInfo","headimgurl","sex","setOffline","online_status","setScore","setReady","setMultiples","mtp","onCopyCliecked","targer","result","webCopyString","copyurl","msg","onBankerMultiplesClicked","value","Number","is_grab","onBuqiangClicked","onReadyClicked","onPlayerMultiplesClicked","onBackClicked","onChatClicked","onMoreClicked","setChat","setUserName","onThemeClicked","onLookClicked","onPokerClicked","onXiazhuang","traget","seatIndexs","myLocalIndex","pokerIds","j","basePoker","realPokersIds","pi","realPokerId","position","convertToNodeSpaceAR","clickEventHandler","EventHandler","component","handler","customEventData","clickEvents","basePokers","delay","spawn","val","content","Date","now","_alertStartTime","update","dt","miao","Math","ceil","createFrom","connectGameServer","ip","port","namespace"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        seatPrefab: cc.Prefab,\n\n        baseNode: cc.Node,\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n        nodeAmins: cc.Node, //用来播放动画\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n\n        btnBankerMtp1: cc.Button,\n        btnBankerMtp2: cc.Button,\n        btnBankerMtp4: cc.Button,\n\n        btnPlayerMtp1: cc.Button,\n        btnPlayerMtp2: cc.Button,\n        btnPlayerMtp3: cc.Button,\n        btnPlayerMtp4: cc.Button,\n\n        btnQiang: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n        btnShow: cc.Button,\n\n        btnXiazhuang: cc.Button,\n        btnShangzhuang: cc.Button,\n        btnBuShangzhuang: cc.Button,\n\n        sprWaitBet: cc.Sprite,\n        sprPlayerBet: cc.Sprite,\n        sprQiangzhuang: cc.Sprite,\n        sprReady: cc.Sprite,\n        sprWaitPlayerBet: cc.Sprite,\n        sprWaitShow: cc.Sprite,\n        sprWaitNext: cc.Sprite,\n\n        spriteClickLookPai: cc.Sprite, //点击看牌\n\n        coinPrefab: cc.Prefab,\n\n        resultNode: cc.Node,\n        resultDeatilNode: cc.Node,\n        resultItemPrefab: cc.Prefab,\n        resultDetailItemPrefab: cc.Prefab,\n        resultDetailSonItemPrefab: cc.Prefab,\n\n        btnCaptureScreen: cc.Button,\n        btnTest: cc.Button,\n\n        holdTimeEclipse: 0, //用来检测长按\n        holdClick: false,\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true //用来播放倒计时声音\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n        //自由抢庄需要看牌两次\n        this.initEventHandlers();\n        this.initView();\n\n        this.btnCaptureScreen.node.on(\"touchstart\", event => {\n            this.holdClick = true;\n            this.holdTimeEclipse = 0;\n        });\n        this.btnCaptureScreen.node.on(\"touchend\", event => {\n            this.holdClick = false;\n            if (this.holdTimeEclipse >= 30) {\n                this.node.emit(\"captureScreenLongClicked\");\n            }\n            this.holdTimeEclipse = 0;\n        });\n\n        this.node.on(\"captureScreenLongClicked\", data => {\n            this.onChanganbaocunClicked();\n        });\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"JoinRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\", player);\n            this.initSingleSeat(player);\n            if (!th.myself.isPlayer) {\n                this.initSingleSeat(player);\n            } else {\n                if (player.account_id == th.getMyselfAccountId()) {\n                    //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n                    this.refreshOptions();\n                    this.initSingleSeat(player);\n                }\n            }\n        });\n        this.node.on(\"GameStart\", data => {\n            cc.log(\"<<<===[GameStart] GmaeNN\", data);\n            this.initRoomInfo();\n            this.setCountdown(data.limit_time, \"游戏开始了\");\n            this.refreshOptions();\n            //如果观战\n            if (!th.myself.isPlayer) {\n                this.showPokers();\n            }\n        });\n        this.node.on(\"MyCards\", player => {\n            cc.log(\"<<<===[MyCards] GmaeNN\", player);\n            let bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 2 ||\n                bankerMode == 3 ||\n                bankerMode == 4\n            ) {\n                this.showPokers();\n            }\n            this.refreshOptions();\n        });\n\n        //开始游戏,闲家选倍数\n        this.node.on(\"StartBet\", data => {\n            cc.log(\"<<<===[StartBet] GmaeNN:\", data);\n            this.setCountdown(data.limit_time, \"投注开始了\");\n            //抢庄account_ID数据\n            //\"grab_array\": [\"31\", \"18\"],\n            data.data.forEach(player => {\n                const oldPlayer = th.getPlayerById(player.account_id);\n                this.initSingleSeat(oldPlayer);\n            });\n\n            //TODO\n            cc.log(\"TODO抢庄效果\", data.grab_array);\n            data.grab_array.forEach((account_id, index) => {\n                this.scheduleOnce(() => {\n                    const player = th.getPlayerById(account_id);\n                    const index = th.getLocalIndex(player.serial_num - 1);\n                    this.componentSeats[index].doBlink();\n                }, index * 0.5);\n            });\n            cc.log(\n                `抢庄人数${data.grab_array.length} 总用时：${data.grab_array\n                    .length * 0.5}`\n            );\n            this.scheduleOnce(() => {\n                data.data.forEach(player => {\n                    const oldPlayer = th.getPlayerById(player.account_id);\n                    this.initSingleSeat(oldPlayer);\n                });\n                const player = th.getBankerPlayer();\n                const index = th.getLocalIndex(player.serial_num - 1);\n                cc.log(\n                    `庄 ${player.nickname} player.serial_num:${\n                        player.serial_num\n                    }, index: ${index}`\n                );\n                this.componentSeats[index].setBanker(true);\n                //固定庄家 些时发牌\n                if (th.room.banker_mode == 5) {\n                    this.showPokers();\n                }\n            }, data.grab_array.length * 0.5);\n\n            let delayTime = data.grab_array.length * 0.5 + 1;\n            cc.log(`显示倍数按钮延时：${delayTime}`);\n\n            this.scheduleOnce(() => {\n                this.refreshOptions();\n            }, delayTime);\n        });\n\n        //闲家选倍数 通知\n        this.node.on(\"UpdateAccountMultiples\", player => {\n            cc.log(\"<<<===[UpdateAccountMultiples] GmaeNN:\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.getMyselfAccountId()) {\n                //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n                this.refreshOptions();\n            }\n        });\n\n        //显示牌\n        this.node.on(\"StartShow\", data => {\n            cc.log(\"<<<===[StartShow] GmaeNN:\", data);\n\n            this.refreshOptions();\n            //1 自由抢庄\n\n            //显示我自己的牌\n            let player = th.getMyselfPlayer();\n            let cards = player.cards;\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let pokers = this.nodePokers[index].children;\n            let showCard = 5 - th.myself.needLookCount;\n            cc.log(\"显示我自己的牌:\", showCard, player, cards);\n            //3=转庄牛牛, 2 = 明牌抢庄 5 = 固定庄家 1 = 自由抢庄 4 = 通比牛牛\n            const bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 3 ||\n                bankerMode == 4 ||\n                bankerMode == 5\n            ) {\n                //自由抢庄 通比牛牛 固定庄家 转庄牛牛\n                pokers.forEach((poker, index) => {\n                    poker.pokerId = cards[index];\n                });\n                if (th.room.banker_mode != 4) {\n                    //通比牛牛通比牛牛不用开牌，因为mycard直接把牌发来了\n                    pokers.forEach((poker, idx) => {\n                        if (idx >= showCard) return;\n                        this.showOpenPokerAnim(poker);\n                    });\n                }\n            } else if (bankerMode == 2) {\n                //明牌抢庄\n                pokers.forEach((poker, index) => {\n                    if (index >= showCard) {\n                        poker.pokerId = cards[index];\n                    }\n                });\n            }\n\n            this.setCountdown(data.limit_time, \"摊牌开始了\");\n\n            this.scheduleOnce(() => {\n                //如果时间到还没摊牌就摊牌\n                if (th.getMyselfPlayer().account_status == 7) {\n                    this.onShowClicked();\n                }\n            }, data.limit_time);\n\n            data.data.forEach(item => {\n                let player = th.getPlayerById(item.account_id);\n                this.initSingleSeat(player);\n            });\n        });\n\n        //摊牌\n        this.node.on(\"UpdateAccountShow\", player => {\n            cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n            const index = th.getLocalIndex(player.serial_num - 1);\n            const nodePoker = this.nodePokers[index];\n            const nodeSeat = this.nodeSeats[index];\n            let pokers = nodePoker.children;\n\n            // 大于0为有牛\n            let hasNiu =\n                th.getNiuIndex(player.card_type, player.combo_point) > 0;\n            let cards = hasNiu > 0 ? player.combo_array : player.cards;\n            //如果不是自己\n            //(isMyself ? 100 : seat.x > 0 ? -210 : 90) + basePokers.y +i * (isMyself ? 110 : 30),\n            // isMyself ? -25 : 0,\n            let isMyself = th.getMyselfLocalIndex() == index;\n            let firstX = isMyself ? 100 : nodeSeat.x > 0 ? -210 : 90;\n            let firstY = isMyself ? -25 : 0;\n            let offset = isMyself ? 110 : 30;\n            pokers.forEach((poker, index) => {\n                poker.runAction(\n                    cc.sequence(\n                        cc.moveTo(0.3, cc.v2(firstX, firstY)),\n                        cc.callFunc(target => {\n                            target.addChild(\n                                th.pokerManager.getPokerSpriteById(cards[index])\n                            );\n                        }),\n                        cc.moveTo(\n                            0.3,\n                            cc.v2(\n                                firstX +\n                                    nodePoker.y +\n                                    index * offset +\n                                    (hasNiu && index > 2 ? 15 : 0),\n                                firstY\n                            )\n                        )\n                    )\n                );\n            });\n            this.showNiuType(player);\n        });\n\n        //结果\n        this.node.on(\"Win\", data => {\n            cc.log(\"<<<===[Win] GmaeNN:\", data);\n            //赢的人\n            //let win = data.winner_array;\n            //输的人\n            //let lose = data.loser_array;\n            this.scheduleOnce(() => {\n                this.nodeAmins.removeAllChildren();\n\n                cc.log(\"TODO 飞筹码效果\");\n                //通比牛牛先飞向最大的人，否则先飞向庄\n                let tagerPalyer =\n                    th.room.banker_mode == 4\n                        ? th.getPlayerById(data.winner_array[0].account_id)\n                        : th.getBankerPlayer();\n\n                const seatxy = th.getSeatXY();\n                const index = th.getLocalIndex(tagerPalyer.serial_num - 1);\n                let [tx, ty] = seatxy[index];\n                //输得的人先飞向tagerPalyer\n                th.audioManager.playSFX(\"coin.mp3\");\n                data.loser_array.forEach(loser => {\n                    if (loser.account_id != tagerPalyer.account_id) {\n                        const player = th.getPlayerById(loser.account_id);\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        let [x, y] = seatxy[index];\n                        for (let i = 0; i < 5; i++) {\n                            let coin = cc.instantiate(this.coinPrefab);\n                            coin.x = x;\n                            coin.y = y;\n                            this.nodeAmins.addChild(coin);\n                            coin.runAction(\n                                cc.sequence(\n                                    cc.delayTime(0.1 + i * 0.05),\n                                    cc\n                                        .moveTo(0.5, cc.v2(tx, ty))\n                                        .easing(cc.easeSineOut()),\n                                    cc.callFunc(target => {\n                                        target.removeFromParent();\n                                    })\n                                )\n                            );\n                        }\n                    }\n                });\n                let loserCount = data.loser_array.filter(\n                    loser => loser.account_id != tagerPalyer.account_id\n                ).length;\n                //this.nodeAmins.removeAllChildren();\n                this.scheduleOnce(() => {\n                    //tagerPalyer输得的人先飞向赢的人\n                    th.audioManager.playSFX(\"coin.mp3\");\n                    data.winner_array.forEach(winer => {\n                        if (winer.account_id != tagerPalyer.account_id) {\n                            const player = th.getPlayerById(winer.account_id);\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            let [x, y] = seatxy[index];\n                            for (let i = 0; i < 5; i++) {\n                                let coin = cc.instantiate(this.coinPrefab);\n                                coin.x = tx;\n                                coin.y = ty;\n                                this.nodeAmins.addChild(coin);\n                                coin.runAction(\n                                    cc.sequence(\n                                        cc.delayTime(0.1 + i * 0.05),\n                                        cc\n                                            .moveTo(0.5, cc.v2(x, y))\n                                            .easing(cc.easeSineOut()),\n                                        cc.callFunc(target => {\n                                            target.removeFromParent();\n                                        })\n                                    )\n                                );\n                            }\n                        }\n                    });\n                }, 0.1 + 0.5 + loserCount * 0.05);\n\n                let winerCount = data.winner_array.filter(\n                    winner => winner.account_id != tagerPalyer.account_id\n                ).length;\n\n                let offsetCount = loserCount + winerCount;\n                cc.log(\"==================offsetCount:\", offsetCount);\n\n                this.scheduleOnce(() => {\n                    let score_board = data.score_board;\n                    let account_ids = Object.keys(score_board);\n                    cc.log(\"AccountIds:\", account_ids);\n                    account_ids.forEach(account_id => {\n                        const player = th.getPlayerById(account_id);\n                        player.account_score = score_board[account_id];\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        this.componentSeats[index].setScoreAnim(\n                            player.account_score\n                        );\n                    });\n                }, 0.1 + 0.5 + offsetCount * 0.05 + 0.5);\n\n                this.scheduleOnce(() => {\n                    th.clear();\n                    th.room.players.forEach(player => {\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        this.componentSeats[index].setBanker(player.is_banker);\n                    });\n                    this.nodePokers.forEach(node => {\n                        node.removeAllChildren();\n                    });\n                    th.room.players.forEach(player => {\n                        this.initSingleSeat(player);\n                    });\n                    this.refreshOptions();\n                    if (th.room.game_num == th.room.total_num) {\n                        cc.log(\"done........................\");\n                        th.wc.show(\"下在获取战绩\");\n                        this.toConnectApi();\n                    }\n                }, 0.1 + 0.5 + offsetCount * 0.05 + 3);\n            }, 1);\n        });\n\n        //战绩\n        this.node.on(\"getScoreBoard\", data => {\n            cc.log(\"<<<===[getScoreBoard] GameNN:\", data);\n            th.wc.hide();\n            this.resultNode.x = 0;\n            this.resultNode.y = 0;\n            this.resultNode.active = true;\n            let {\n                room_number,\n                time,\n                total_num,\n                room_creator,\n                scoreboard\n            } = data.balance_scoreboard;\n\n            this.resultNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = time;\n\n            this.resultNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = total_num + \"局\";\n\n            this.resultNode\n                .getChildByName(\"lbl_banker\")\n                .getComponent(\"cc.Label\").string = \"房主：\" + room_creator;\n\n            let itemNode = this.resultNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n            itemNode.removeAllChildren();\n            scoreboard.forEach((player, index) => {\n                let item = cc.instantiate(this.resultItemPrefab);\n                item.getChildByName(\"lbl_id\").getComponent(\"cc.Label\").string =\n                    \"ID：\" + player.account_id;\n                item\n                    .getChildByName(\"lbl_name\")\n                    .getComponent(\"cc.Label\").string = player.name;\n                item\n                    .getChildByName(\"lbl_score\")\n                    .getComponent(\"cc.Label\").string = player.score;\n\n                let headImg = item\n                    .getChildByName(\"headImg\")\n                    .getComponent(\"cc.Sprite\");\n                cc.loader.load(\n                    {\n                        url: player.avatar,\n                        type: \"jpg\"\n                    },\n                    (err, texture) => {\n                        if (!err) {\n                            let headSpriteFrame = new cc.SpriteFrame(\n                                texture,\n                                cc.Rect(0, 0, texture.width, texture.height)\n                            );\n                            headImg.spriteFrame = headSpriteFrame;\n                            headImg.node.setScale(2 - texture.width / 120);\n                        }\n                    }\n                );\n\n                if (index == 0) {\n                    item.getChildByName(\"dayinjia\").active = true;\n                }\n                itemNode.addChild(item);\n            });\n            //Object.assign(th.room, data);\n        });\n\n        //战绩明细\n        this.node.on(\"getScoreDetail\", data => {\n            cc.log(\"<<<===[getScoreDetail] GameNN:\", data);\n            //Object.assign(th.room, data);\n            th.wc.hide();\n            this.resultDeatilNode.x = 0;\n            this.resultDeatilNode.y = 0;\n            this.resultDeatilNode.active = true;\n            let { room_number, create_time, game_num, rule_text } = data;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = create_time;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = game_num + \"局\";\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_info\")\n                .getComponent(\"cc.Label\").string = rule_text;\n\n            let resultDetailNode = this.resultDeatilNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n\n            //加载头像\n            let players = {};\n            data.balance_board.forEach(item => {\n                players[item.name] = item;\n            });\n\n            data.player_array.forEach(player => {\n                let { game_num, total_num, player_cards } = player;\n                let roundNode = cc.instantiate(this.resultDetailItemPrefab);\n                roundNode.height = 100 + data.balance_board.length * 100;\n                roundNode\n                    .getChildByName(\"lbl_round\")\n                    .getComponent(\n                        \"cc.Label\"\n                    ).string = `${game_num}/${total_num}`;\n                let playersNode = roundNode.getChildByName(\"players\");\n                player_cards.forEach(item => {\n                    let playerNode = cc.instantiate(\n                        this.resultDetailSonItemPrefab\n                    );\n\n                    playerNode\n                        .getChildByName(\"lbl_id\")\n                        .getComponent(\"cc.Label\").string =\n                        players[item.name].account_id + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_name\")\n                        .getComponent(\"cc.Label\").string = item.name + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_mtp\")\n                        .getComponent(\"cc.Label\").string = item.chip + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_score\")\n                        .getComponent(\"cc.Label\").string = item.score + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_niu\")\n                        .getComponent(\"cc.Label\").string =\n                        item.card_type_str + \"\";\n                    playerNode.getChildByName(\"icon_banker\").active =\n                        item.is_banker == 1;\n\n                    let headimg = playerNode\n                        .getChildByName(\"headImg\")\n                        .getComponent(\"cc.Sprite\");\n\n                    cc.loader.load(\n                        {\n                            url: players[item.name].avatar,\n                            type: \"jpg\"\n                        },\n                        (err, texture) => {\n                            if (!err) {\n                                let headSpriteFrame = new cc.SpriteFrame(\n                                    texture,\n                                    cc.Rect(0, 0, texture.width, texture.height)\n                                );\n                                headimg.spriteFrame = headSpriteFrame;\n                                headimg.node.setScale(2 - texture.width / 120);\n                            }\n                        }\n                    );\n\n                    let pokerNode = playerNode.getChildByName(\"pokers\");\n                    item.player_cards.forEach(card => {\n                        pokerNode.addChild(\n                            th.pokerManager.getPokerSpriteById(card)\n                        );\n                    });\n                    playersNode.addChild(playerNode);\n                });\n                resultDetailNode.addChild(roundNode);\n            });\n        });\n\n        this.node.on(\"getCopyUrl\", data => {\n            cc.log(\"<<<===[getCopyUrl] GameNN:\", data);\n            /*\n            let result = th.webCopyString(data.url);\n            cc.log(\"address:\", data.url);\n            th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n            */\n        });\n\n        //解散房间\n        this.node.on(\"BreakRoom\", data => {\n            cc.log(\"<<<===[BreakRoom] GameNN:\", data);\n            const player = th.getMyselfPlayer();\n            if (player.is_banker == 1) {\n                this.toConnectApi();\n            } else {\n                th.alert.show(\n                    \"提示\",\n                    \"庄家主动下庄，点击确定查看结算。\",\n                    () => {\n                        this.toConnectApi();\n                    },\n                    true\n                );\n            }\n            //Object.assign(th.room, data);\n        });\n    },\n    onResultCloseClicked() {\n        th.wc.show(\"正在返回大厅。。。\");\n        th.args = {};\n        th.room.room_id = null;\n        th.room.room_number = null;\n        th.gametype = null;\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onZhanjiseachClicked() {\n        const params = {\n            operation: \"getScoreDetail\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                type: 1,\n                num2: 10291,\n                num: th.room.room_number\n            }\n        };\n        cc.log(\"===>>>[getScoreDetail] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onResultDetailCloseClicked() {\n        this.resultDeatilNode.active = false;\n    },\n    onChanganbaocunClicked() {\n        cc.log(\"长按保存....\");\n        th.webCaptureScreen();\n    },\n    showNiuType(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodeSeat = this.nodeSeats[index];\n        const nodePoker = this.nodePokers[index];\n        if (player.account_id != th.getMyselfAccountId()) {\n            //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = nodeSeat.x > 0 ? -160 : 150;\n            niuType.y = -20;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.2));\n        } else {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = 310;\n            niuType.y = 85;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.5));\n        }\n        let niuIndex = th.getNiuIndex(player.card_type, player.combo_point);\n        let mp3Name = \"bull\" + niuIndex + \".m4a\";\n        th.audioManager.playSFX(mp3Name);\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.spriteClickLookPai.node.active = false;\n        this.initRoomInfo();\n        this.initSeat();\n        this.initMtpBtn();\n        this.refreshOptions();\n        cc.log(\"InitView:\", th.room);\n        cc.log(\"InitView:\", th.myself);\n        const { room_status, banker_mode, account_status } = th.room;\n        cc.log(\"room_status, banker_mode :\", room_status, banker_mode);\n        if (room_status == 2) {\n            //如果观战\n            if (!th.myself.isPlayer) {\n                th.room.players.forEach(player => {\n                    player.cards = new Array(5).fill(-1);\n                });\n                cc.log(\"观战:\", th.room);\n                this.showPokers();\n                return;\n            }\n            if (\n                banker_mode == 1 ||\n                banker_mode == 2 ||\n                banker_mode == 3 ||\n                banker_mode == 4\n            ) {\n                //是自由抢庄或者明牌抢庄直接发牌\n                //通比牛牛也直接发\n                //转庄牛牛也直接发\n                cc.log(\"自由抢庄或者明牌抢庄直接发牌\");\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            } else if (banker_mode == 5 && account_status >= 6) {\n                cc.log(\"固定庄家发牌\");\n                //固定庄家闲家下注时才发牌\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            }\n        }\n        //是不是有庄\n        let player = th.getBankerPlayer();\n        if (player) {\n            let index = th.getLocalIndex(player.serial_num - 1);\n            this.componentSeats[index].setBanker(true);\n        }\n        cc.log(\"th.myself.isPlayer:,\", th.myself.isPlayer);\n        this.node.getChildByName(\"icon_look\").active = !th.myself.isPlayer;\n    },\n    initMtpBtn() {\n        let [mtp1, mtp2, mtp3, mtp4] = th.room.bet_type_arr;\n        this.btnPlayerMtp1.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp1 + \"倍\";\n        this.btnPlayerMtp2.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp2 + \"倍\";\n        this.btnPlayerMtp3.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp3 + \"倍\";\n        this.btnPlayerMtp4.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp4 + \"倍\";\n        this.btnBankerMtp1.node.acitve = false;\n        this.btnBankerMtp2.node.acitve = false;\n        this.btnBankerMtp4.node.acitve = false;\n        this.btnPlayerMtp1.node.active = false;\n        this.btnPlayerMtp2.node.active = false;\n        this.btnPlayerMtp3.node.active = false;\n        this.btnPlayerMtp4.node.active = false;\n\n        this.btnPlayerMtp1.node.multiples = mtp1;\n        this.btnPlayerMtp2.node.multiples = mtp2;\n        this.btnPlayerMtp3.node.multiples = mtp3;\n        this.btnPlayerMtp4.node.multiples = mtp4;\n\n        this.btnQiang.node.active = false;\n        this.btnBuqiang.node.active = false;\n        this.btnReady.node.active = false;\n        this.btnShow.node.active = false;\n\n        this.btnXiazhuang.node.active = false;\n        this.btnShangzhuang.node.active = false;\n        this.btnBuShangzhuang.node.active = false;\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            this.nodeOptions.active = true;\n\n            /*\n            banker_mode: 1,\n            1 = 自由抢庄     抢与不抢（没有倍数）都不抢或者都抢随机一个    选倍数（不是庄选）    开牌\n            2 = 明牌抢庄\n            3 = 转庄牛牛,牛牛上庄\n            4 = 通比牛牛\n            5 = 固定庄家 \n            */\n            let noBanker = th.getBankerPlayer() == null ? true : false;\n            const banker_mode = th.room.banker_mode;\n            const isZYQZ = banker_mode == 1;\n            const isMPQZ = banker_mode == 2;\n            const isGDZJ = banker_mode == 5;\n\n            let player = th.getMyselfPlayer();\n            //准备按钮\n            let isShowBtnReady =\n                (player.account_status == 0 || player.account_status == 1) &&\n                th.room.room_status == 1;\n            this.btnReady.node.active = isShowBtnReady;\n            this.sprReady.node.active = isShowBtnReady;\n\n            this.btnXiazhuang.node.active =\n                isShowBtnReady &&\n                isGDZJ &&\n                th.room.room_status == 1 &&\n                !noBanker &&\n                player.is_banker == 1 &&\n                th.room.game_num >= 3;\n\n            //抢庄按钮\n            let isShowQiangBrank =\n                player.account_status == 3 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnBankerMtp1.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp2.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp4.node.active = isShowQiangBrank && isMPQZ;\n            this.btnQiang.node.active = isShowQiangBrank && isZYQZ;\n            this.btnBuqiang.node.active =\n                isShowQiangBrank && (isZYQZ || isMPQZ);\n            this.sprQiangzhuang.node.active = isShowQiangBrank;\n            //闲加倍数选择\n            let isShowSelectMultiples =\n                player.is_banker == 0 &&\n                player.account_status == 6 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                player.multiples == 0;\n            this.btnPlayerMtp1.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp2.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp3.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp4.node.active = isShowSelectMultiples;\n            this.sprWaitPlayerBet.node.active = isShowSelectMultiples;\n            //摊牌按钮\n            let isShowText =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount <= 0;\n            this.btnShow.node.active = isShowText;\n\n            let isShowClickLookPai =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount > 0;\n            this.spriteClickLookPai.node.active = isShowClickLookPai;\n            this.sprWaitShow.node.active = isShowClickLookPai || isShowText;\n\n            //上状不上庄按钮\n\n            this.btnShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker; //&&player.account_score>=th.room.bankerscore\n            this.btnBuShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker;\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            seat.seatIndex = i; //为座位编号\n            this.baseNode.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n        }\n        const players = th.room.players;\n        for (let i = 0; i < players.length; ++i) {\n            cc.log(`name:${players[i].nickname}`);\n            this.initSingleSeat(players[i]);\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == 1 ? false : true\n        );\n        /*\n        this.componentSeats[index].setBanker(\n            player.is_banker == 1 ? true : false\n        );\n        */\n        this.componentSeats[index].setScore(player.account_score);\n        this.componentSeats[index].setReady(player.account_status == 2);\n        if (th.room.banker_mode == 4) {\n            //通比牛牛没有庄\n            this.componentSeats[index].setMultiples(null);\n        } else {\n            if (player.account_status == 4) {\n                //不抢\n                this.componentSeats[index].setMultiples(\"n\");\n            } else if (player.account_status == 5) {\n                //抢庄\n                let mtp = player.multiples != 0 ? \"x\" + player.multiples : \"\";\n                this.componentSeats[index].setMultiples(\"y\" + mtp);\n            } else if (player.account_status == 6) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n                /*\n                //闲家倍数\n                if (player.is_banker == 1) {\n                    this.componentSeats[index].setMultiples(\n                        player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                    );\n                } else {\n                    this.componentSeats[index].setMultiples(null);\n                }\n                */\n            } else if (player.account_status == 7) {\n                //未摊牌\n                this.componentSeats[index].setMultiples(\n                    player.is_banker == 1 ? null : \"x\" + player.multiples\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n        }\n    },\n    onCopyCliecked: function(targer, data) {\n        /*\n        let address = `${th.href}?roomId=${th.room.room_number}&type=${\n            th.gametype\n        }`;\n        */\n        let result = th.webCopyString(th.room.copyurl);\n        cc.log(\"address:\", th.room.copyurl);\n        th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n    },\n    onBankerMultiplesClicked: function(targer, value) {\n        let multiples = 1;\n        if (Number(value) == 0) {\n            multiples = 1;\n            th.audioManager.playSFX(`robbanker.m4a`);\n        } else {\n            multiples = Number(value);\n            th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        }\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 1,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[GrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBuqiangClicked: function() {\n        th.audioManager.playSFX(\"nobanker.m4a\");\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 0,\n                multiples: 1\n            }\n        };\n        cc.log(\"===>>>[NoGrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n        const params = {\n            operation: \"ReadyStart\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ReadyStart] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onPlayerMultiplesClicked: function(targer, value) {\n        let multiples = targer.target.multiples;\n        th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        const params = {\n            operation: \"PlayerMultiples\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[PlayerMultiples] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onShowClicked: function(targer) {\n        cc.log(\"onPlayerMultiplesClicked:\");\n        const params = {\n            operation: \"ShowCard\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ShowCard] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onChatClicked(targer) {\n        /*\n        this.node.getChildByName(\"Poker_Ghost\")\n        .runAction(cc.sequence(cc.rotateBy(0,0,-180),cc.rotateBy(0.5,0,90), cc.callFunc((targer)=>{\n            cc.log(\"换派\",targer);\n            targer.getChildByName(\"bg_back\").active=false;;\n        }),cc.rotateBy(0.5,0,90)) )\n         let poker = th.pokerManager.getPokerSpriteById(\"A1\");\n        this.node.getChildByName(\"Poker_Back\").addChild(poker);\n        this.node.addChild(th.pokerManager.getNiuSprite(4, 0));\n        this.setCountdown(10, \"TEST.....\");\n        */\n        cc.log(th.room);\n    },\n    onMoreClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙\");\n        seat.setReady(true);\n        seat.setOffline(true);\n        seat.setScore(\"-8888\");\n        seat.setUserName(\"我的名字\");\n        seat.setCountdown(10);\n    },\n    onThemeClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙伙右伙历伙\");\n        seat.setReady(false);\n        seat.setOffline(true);\n        seat.setScore(\"+8888\");\n        seat.setCountdown(0);\n    },\n    onLookClicked(targer) {\n        cc.log(\"onLookClickedonLookClickedonLookClickedonLookClicked\");\n        let result = th.webCopyString(\n            \"onLookClickedonLookClickedonLookClickedonLookClickedCopy\"\n        );\n        th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n    },\n    onPokerClicked(targer, value) {\n        cc.log(\"Poker\", targer.target.pokerId, value);\n        let pokerId = targer.target.pokerId;\n        if (pokerId != -1) {\n            this.showOpenPokerAnim(targer.target);\n            th.myself.needLookCount = th.myself.needLookCount - 1;\n            this.refreshOptions();\n        }\n    },\n    onXiazhuang(targer) {\n        th.alert.show(\n            \"下庄提示\",\n            \"下庄之后，将当前战绩进行结算。是否确定下庄？\",\n            () => {\n                cc.log(\"下庄\");\n                const params = {\n                    operation: \"GameOver\",\n                    account_id: th.myself.account_id,\n                    session: th.sign,\n                    data: {\n                        room_id: th.room.room_id\n                    }\n                };\n                cc.log(\"===>>>[GameOver] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            },\n            true\n        );\n    },\n    showOpenPokerAnim(poker) {\n        let pokerId = poker.pokerId;\n        if (pokerId != -1) {\n            poker.runAction(\n                cc.sequence(\n                    cc.scaleTo(0.3, 0, 1),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(pokerId)\n                        );\n                    }),\n                    cc.scaleTo(0.3, 1, 1),\n                    cc.callFunc(traget => {\n                        traget.pokerId = -1;\n                    })\n                )\n            );\n        }\n    },\n    showPokers() {\n        //找到坐位上有人，且准备的发牌\n        let seatIndexs = [];\n        let players = [];\n        th.room.players.forEach(player => {\n            cc.log(\"showPokers:\", player.account_status);\n            if (player.account_status > 1) {\n                const index = th.getLocalIndex(player.serial_num - 1);\n                seatIndexs.push(index);\n                players.push(player);\n            }\n        });\n        let myLocalIndex = th.getMyselfLocalIndex();\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            let pokerIds = player.cards;\n            let isMyself = seatIndexs[i] == myLocalIndex;\n            if (player.account_status == 8) {\n                //摊牌\n                pokerIds = player.cards;\n            } else if (player.account_status == 7) {\n                //没摊牌\n                if (isMyself) {\n                    pokerIds = new Array(5).fill(-1);\n                    for (let j = 0; j < 5 - th.myself.needLookCount; j++) {\n                        pokerIds[j] = player.cards[j];\n                    }\n                } else {\n                    pokerIds = new Array(5).fill(-1);\n                }\n            } else {\n                //其他\n                pokerIds = new Array(5).fill(-1);\n            }\n            cc.log(player.nickname + \" 发牌：\", pokerIds, player.cards);\n            let basePoker = this.nodePokers[seatIndexs[i]];\n            basePoker.removeAllChildren();\n            let realPokersIds = player.cards;\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let pokerId = pokerIds[pi];\n                let realPokerId = realPokersIds[pi] || -1;\n                let poker = th.pokerManager.getPokerSpriteById(\n                    isMyself ? -1 : pokerId\n                ); //pokerId\n                poker.pokerId = isMyself ? realPokerId : -1; //-1 防止其他玩家牌可以点\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePoker.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                if (pokerId == -1) {\n                    let clickEventHandler = new cc.Component.EventHandler();\n                    clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n                    clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n                    clickEventHandler.handler = \"onPokerClicked\";\n                    clickEventHandler.customEventData = realPokerId;\n                    poker\n                        .getComponent(cc.Button)\n                        .clickEvents.push(clickEventHandler);\n                }\n                basePoker.addChild(poker);\n            }\n        }\n        //发牌效果\n        th.audioManager.playSFX(\"fapai.m4a\");\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < seatIndexs.length; j++) {\n                let seatIndex = seatIndexs[j];\n                let seat = this.nodeSeats[seatIndex];\n                let basePokers = this.nodePokers[seatIndex];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = seatIndex == myLocalIndex;\n                let player = players[j];\n                let showCard =\n                    player.account_status == 8\n                        ? true\n                        : i < 5 - th.myself.needLookCount;\n                //cc.log(seatIndex, myLocalIndex, seatIndex == myLocalIndex);\n                ((poker, delay, x, y, isMyself, showCard) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                ),\n                                cc.callFunc(target => {\n                                    if (showCard) {\n                                        this.showOpenPokerAnim(target);\n                                    }\n                                })\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * seatIndexs.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself,\n                    showCard\n                );\n            }\n        }\n\n        //如果玩家已经 摊牌，显示牛\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            if (player.account_status == 8) {\n                this.showNiuType(player);\n            }\n        }\n    },\n    setCountdown(val, content) {\n        let num = Number(val);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        if (content) {\n            this.nodeCountdown\n                .getChildByName(\"lbl_title\")\n                .getComponent(\"cc.Label\").string = content;\n        } else {\n            this.nodeCountdown.getChildByName(\"lbl_title\").node.active = false;\n        }\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            //th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n        if (this.holdClick) {\n            this.holdTimeEclipse++;\n            if (this.holdTimeEclipse > 120) {\n                //如果长按时间大于2s，则认为长按了2s\n                this.holdTimeEclipse = 120;\n            }\n        }\n    },\n    toConnectApi: function(targer) {\n        cc.log(\"onCreateClicked:\", this.createFrom);\n        //断开大厅连接连接游戏websocket\n        th.webSocketManager.connectGameServer(\n            {\n                ip: \"47.96.177.207\",\n                port: 10000,\n                namespace: \"api\"\n            },\n            () => {\n                th.wc.show(\"正在获取结果...\");\n                const params = {\n                    operation: \"getScoreBoard\", //操作标志\n                    account_id: th.myself.account_id, //用户id};\n                    session: th.sign,\n                    data: {\n                        type: 1,\n                        num2: 10291,\n                        num: th.room.room_number\n                    }\n                };\n                cc.log(\"===>>>[getScoreBoard] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            }\n        );\n    }\n});\n"]}