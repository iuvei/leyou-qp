{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\GameNN.js"],"names":["cc","Class","extends","Component","properties","seatPrefab","Prefab","baseNode","Node","nodeSeats","componentSeats","nodePokers","nodeAmins","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnBankerMtp1","Button","btnBankerMtp2","btnBankerMtp4","btnPlayerMtp1","btnPlayerMtp2","btnPlayerMtp3","btnPlayerMtp4","btnQiang","btnBuqiang","btnReady","btnShow","sprWaitBet","Sprite","sprPlayerBet","sprQiangzhuang","sprReady","sprWaitPlayerBet","sprWaitShow","sprWaitNext","spriteClickLookPai","coinPrefab","resultNode","resultDeatilNode","resultItemPrefab","resultDetailItemPrefab","resultDetailSonItemPrefab","btnCaptureScreen","btnTest","holdTimeEclipse","holdClick","_countdownEndTime","_isPlay","onLoad","th","log","initEventHandlers","initView","node","on","emit","onChanganbaocunClicked","onEnable","start","webSocketManager","dataEventHandler","player","initSingleSeat","account_id","myself","refreshOptions","data","initRoomInfo","setCountdown","limit_time","showPokers","forEach","oldPlayer","getPlayerById","grab_array","index","scheduleOnce","getLocalIndex","serial_num","doBlink","length","getBankerPlayer","nickname","setBanker","delayTime","getMyselfPlayer","cards","pokers","children","showCard","needLookCount","poker","pokerId","room","banker_mode","idx","runAction","sequence","scaleTo","callFunc","target","addChild","pokerManager","getPokerSpriteById","item","nodePoker","nodeSeat","hasNiu","getNiuIndex","card_type","combo_point","combo_array","isMyself","getMyselfLocalIndex","firstX","x","firstY","offset","moveTo","v2","y","showNiuType","removeAllChildren","tagerPalyer","winner_array","seatxy","getSeatXY","tx","ty","audioManager","playSFX","loser_array","loser","i","coin","instantiate","easing","easeSineOut","removeFromParent","loserCount","filter","winer","winerCount","winner","offsetCount","score_board","account_ids","Object","keys","account_score","setScoreAnim","clear","cpnt","players","game_num","total_num","toConnectApi","wc","hide","active","balance_scoreboard","room_number","time","room_creator","scoreboard","getChildByName","getComponent","string","name","score","headImg","loader","load","url","avatar","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","create_time","rule_text","resultDetailNode","balance_board","player_array","player_cards","roundNode","playersNode","playerNode","chip","card_type_str","is_banker","headimg","pokerNode","card","onResultCloseClicked","show","args","room_id","gametype","director","loadScene","onZhanjiseachClicked","params","operation","session","sign","num2","num","ws","send","JSON","stringify","onResultDetailCloseClicked","niuType","getNiuSprite","scale","niuIndex","mp3Name","initSeat","initMtpBtn","room_status","bet_type_arr","mtp1","mtp2","mtp3","mtp4","acitve","multiples","isPlayer","isZYQZ","isShowBtnReady","account_status","isShowQiangBrank","isShowSelectMultiples","isShowText","isShowClickLookPai","base_score","seatsxy","seat","seatIndex","push","setInfo","headimgurl","sex","setOffline","online_status","setScore","setReady","setMultiples","mtp","onCopyCliecked","targer","result","webCopyString","copyurl","msg","onBankerMultiplesClicked","value","Number","is_grab","onBuqiangClicked","onReadyClicked","onPlayerMultiplesClicked","onShowClicked","onBackClicked","onChatClicked","onMoreClicked","setChat","setUserName","onThemeClicked","onLookClicked","onPokerClicked","showOpenPokerAnim","traget","seatIndexs","myLocalIndex","pokerIds","Array","fill","j","basePoker","readyPokersIds","pi","realPokerId","position","convertToNodeSpaceAR","clickEventHandler","EventHandler","component","handler","customEventData","clickEvents","basePokers","delay","spawn","val","content","Date","now","_alertStartTime","update","dt","miao","Math","ceil","createFrom","connectGameServer","ip","port","namespace"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        seatPrefab: cc.Prefab,\n\n        baseNode: cc.Node,\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n        nodeAmins: cc.Node, //用来播放动画\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n\n        btnBankerMtp1: cc.Button,\n        btnBankerMtp2: cc.Button,\n        btnBankerMtp4: cc.Button,\n\n        btnPlayerMtp1: cc.Button,\n        btnPlayerMtp2: cc.Button,\n        btnPlayerMtp3: cc.Button,\n        btnPlayerMtp4: cc.Button,\n\n        btnQiang: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n        btnShow: cc.Button,\n\n        sprWaitBet: cc.Sprite,\n        sprPlayerBet: cc.Sprite,\n        sprQiangzhuang: cc.Sprite,\n        sprReady: cc.Sprite,\n        sprWaitPlayerBet: cc.Sprite,\n        sprWaitShow: cc.Sprite,\n        sprWaitNext: cc.Sprite,\n\n        spriteClickLookPai: cc.Sprite, //点击看牌\n\n        coinPrefab: cc.Prefab,\n\n        resultNode: cc.Node,\n        resultDeatilNode: cc.Node,\n        resultItemPrefab: cc.Prefab,\n        resultDetailItemPrefab: cc.Prefab,\n        resultDetailSonItemPrefab: cc.Prefab,\n\n        btnCaptureScreen: cc.Button,\n        btnTest: cc.Button,\n\n        holdTimeEclipse: 0, //用来检测长按\n        holdClick: false,\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true //用来播放倒计时声音\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n        //自由抢庄需要看牌两次\n        this.initEventHandlers();\n        this.initView();\n\n        this.btnCaptureScreen.node.on(\"touchstart\", event => {\n            this.holdClick = true;\n            this.holdTimeEclipse = 0;\n        });\n        this.btnCaptureScreen.node.on(\"touchend\", event => {\n            this.holdClick = false;\n            if (this.holdTimeEclipse >= 30) {\n                this.node.emit(\"captureScreenLongClicked\");\n            }\n            this.holdTimeEclipse = 0;\n        });\n\n        this.node.on(\"captureScreenLongClicked\", data => {\n            this.onChanganbaocunClicked();\n        });\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"CreateRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.myself.account_id) {\n                this.refreshOptions();\n                this.initSingleSeat(player);\n            }\n        });\n        this.node.on(\"GameStart\", data => {\n            cc.log(\"<<<===[GameStart] GmaeNN\", data);\n            this.initRoomInfo();\n            this.setCountdown(data.limit_time, \"游戏开始了\");\n            this.refreshOptions();\n        });\n        this.node.on(\"MyCards\", player => {\n            cc.log(\"<<<===[MyCards] GmaeNN\", player);\n            this.showPokers();\n            this.refreshOptions();\n        });\n\n        //开始游戏,闲家选倍数\n        this.node.on(\"StartBet\", data => {\n            cc.log(\"<<<===[StartBet] GmaeNN:\", data);\n            this.setCountdown(data.limit_time, \"投注开始了\");\n            //抢庄account_ID数据\n            //\"grab_array\": [\"31\", \"18\"],\n            data.data.forEach(player => {\n                const oldPlayer = th.getPlayerById(player.account_id);\n                this.initSingleSeat(oldPlayer);\n            });\n\n            //TODO\n            cc.log(\"TODO抢庄效果\", data.grab_array);\n            data.grab_array.forEach((account_id, index) => {\n                this.scheduleOnce(() => {\n                    const player = th.getPlayerById(account_id);\n                    const index = th.getLocalIndex(player.serial_num - 1);\n                    this.componentSeats[index].doBlink();\n                }, index * 0.5);\n            });\n            cc.log(\n                `抢庄人数${data.grab_array.length} 总用时：${data.grab_array\n                    .length * 0.5}`\n            );\n            this.scheduleOnce(() => {\n                data.data.forEach(player => {\n                    const oldPlayer = th.getPlayerById(player.account_id);\n                    this.initSingleSeat(oldPlayer);\n                });\n                const player = th.getBankerPlayer();\n                const index = th.getLocalIndex(player.serial_num - 1);\n                cc.log(\n                    `庄 ${player.nickname} player.serial_num:${\n                        player.serial_num\n                    }, index: ${index}`\n                );\n                this.componentSeats[index].setBanker(true);\n            }, data.grab_array.length * 0.5);\n\n            let delayTime = data.grab_array.length * 0.5 + 1;\n            cc.log(`显示倍数按钮延时：${delayTime}`);\n\n            this.scheduleOnce(() => {\n                this.refreshOptions();\n            }, delayTime);\n        });\n\n        //闲家选倍数 通知\n        this.node.on(\"UpdateAccountMultiples\", player => {\n            cc.log(\"<<<===[UpdateAccountMultiples] GmaeNN:\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.myself.account_id) {\n                this.refreshOptions();\n            }\n        });\n\n        //显示牌\n        this.node.on(\"StartShow\", data => {\n            cc.log(\"<<<===[StartShow] GmaeNN:\", data);\n\n            this.refreshOptions();\n            //1 自由抢庄\n\n            //显示我自己的牌\n            let player = th.getMyselfPlayer();\n            let cards = player.cards;\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let pokers = this.nodePokers[index].children;\n            let showCard = 5 - th.myself.needLookCount;\n            cc.log(\"显示我自己的牌:\", player, cards);\n            pokers.forEach((poker, index) => {\n                if (index >= showCard) {\n                    poker.pokerId = cards[index];\n                }\n            });\n            if (th.room.banker_mode == 1) {\n                pokers.forEach((poker, idx) => {\n                    if (idx >= showCard) return;\n                    poker.runAction(\n                        cc.sequence(\n                            cc.scaleTo(0.3, 0, 1),\n                            cc.callFunc(target => {\n                                target.addChild(\n                                    th.pokerManager.getPokerSpriteById(\n                                        target.pokerId\n                                    )\n                                );\n                            }),\n                            cc.scaleTo(0.3, 1, 1),\n                            cc.callFunc(target => {\n                                target.pokerId = -1;\n                            })\n                        )\n                    );\n                });\n            }\n\n            this.setCountdown(data.limit_time, \"摊牌开始了\");\n\n            data.data.forEach(item => {\n                let player = th.getPlayerById(item.account_id);\n                this.initSingleSeat(player);\n            });\n        });\n\n        //摊牌\n        this.node.on(\"UpdateAccountShow\", player => {\n            cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n            const index = th.getLocalIndex(player.serial_num - 1);\n            const nodePoker = this.nodePokers[index];\n            const nodeSeat = this.nodeSeats[index];\n            let pokers = nodePoker.children;\n\n            // 大于0为有牛\n            let hasNiu =\n                th.getNiuIndex(player.card_type, player.combo_point) > 0;\n            let cards = hasNiu > 0 ? player.combo_array : player.cards;\n            //如果不是自己\n            //(isMyself ? 100 : seat.x > 0 ? -210 : 90) + basePokers.y +i * (isMyself ? 110 : 30),\n            // isMyself ? -25 : 0,\n            let isMyself = th.getMyselfLocalIndex() == index;\n            let firstX = isMyself ? 100 : nodeSeat.x > 0 ? -210 : 90;\n            let firstY = isMyself ? -25 : 0;\n            let offset = isMyself ? 110 : 30;\n            pokers.forEach((poker, index) => {\n                poker.runAction(\n                    cc.sequence(\n                        cc.moveTo(0.3, cc.v2(firstX, firstY)),\n                        cc.callFunc(target => {\n                            target.addChild(\n                                th.pokerManager.getPokerSpriteById(cards[index])\n                            );\n                        }),\n                        cc.moveTo(\n                            0.3,\n                            cc.v2(\n                                firstX +\n                                    nodePoker.y +\n                                    index * offset +\n                                    (hasNiu && index > 2 ? 15 : 0),\n                                firstY\n                            )\n                        )\n                    )\n                );\n            });\n            this.showNiuType(player);\n        });\n\n        //结果\n        this.node.on(\"Win\", data => {\n            cc.log(\"<<<===[Win] GmaeNN:\", data);\n            //赢的人\n            //let win = data.winner_array;\n            //输的人\n            //let lose = data.loser_array;\n            this.scheduleOnce(() => {\n                this.nodeAmins.removeAllChildren();\n\n                cc.log(\"TODO 飞筹码效果\");\n                //通比牛牛先飞向最大的人，否则先飞向庄\n                let tagerPalyer =\n                    th.room.banker_mode == 4\n                        ? th.getPlayerById(data.winner_array[0].account_id)\n                        : th.getBankerPlayer();\n\n                const seatxy = th.getSeatXY();\n                const index = th.getLocalIndex(tagerPalyer.serial_num - 1);\n                let [tx, ty] = seatxy[index];\n                //输得的人先飞向tagerPalyer\n                th.audioManager.playSFX(\"coin.mp3\");\n                data.loser_array.forEach(loser => {\n                    if (loser.account_id != tagerPalyer.account_id) {\n                        const player = th.getPlayerById(loser.account_id);\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        let [x, y] = seatxy[index];\n                        for (let i = 0; i < 5; i++) {\n                            let coin = cc.instantiate(this.coinPrefab);\n                            coin.x = x;\n                            coin.y = y;\n                            this.nodeAmins.addChild(coin);\n                            coin.runAction(\n                                cc.sequence(\n                                    cc.delayTime(0.1 + i * 0.05),\n                                    cc\n                                        .moveTo(0.5, cc.v2(tx, ty))\n                                        .easing(cc.easeSineOut()),\n                                    cc.callFunc(target => {\n                                        target.removeFromParent();\n                                    })\n                                )\n                            );\n                        }\n                    }\n                });\n                let loserCount = data.loser_array.filter(\n                    loser => loser.account_id != tagerPalyer.account_id\n                ).length;\n                //this.nodeAmins.removeAllChildren();\n                this.scheduleOnce(() => {\n                    //tagerPalyer输得的人先飞向赢的人\n                    th.audioManager.playSFX(\"coin.mp3\");\n                    data.winner_array.forEach(winer => {\n                        if (winer.account_id != tagerPalyer.account_id) {\n                            const player = th.getPlayerById(winer.account_id);\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            let [x, y] = seatxy[index];\n                            for (let i = 0; i < 5; i++) {\n                                let coin = cc.instantiate(this.coinPrefab);\n                                coin.x = tx;\n                                coin.y = ty;\n                                this.nodeAmins.addChild(coin);\n                                coin.runAction(\n                                    cc.sequence(\n                                        cc.delayTime(0.1 + i * 0.05),\n                                        cc\n                                            .moveTo(0.5, cc.v2(x, y))\n                                            .easing(cc.easeSineOut()),\n                                        cc.callFunc(target => {\n                                            target.removeFromParent();\n                                        })\n                                    )\n                                );\n                            }\n                        }\n                    });\n                }, 0.1 + 0.5 + loserCount * 0.05);\n\n                let winerCount = data.winner_array.filter(\n                    winner => winner.account_id != tagerPalyer.account_id\n                ).length;\n\n                let offsetCount = loserCount + winerCount;\n                cc.log(\"==================offsetCount:\", offsetCount);\n\n                this.scheduleOnce(() => {\n                    let score_board = data.score_board;\n                    let account_ids = Object.keys(score_board);\n                    cc.log(\"AccountIds:\", account_ids);\n                    account_ids.forEach(account_id => {\n                        const player = th.getPlayerById(account_id);\n                        player.account_score = score_board[account_id];\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        this.componentSeats[index].setScoreAnim(\n                            player.account_score\n                        );\n                    });\n                }, 0.1 + 0.5 + offsetCount * 0.05 + 0.5);\n\n                this.scheduleOnce(() => {\n                    th.clear();\n                    this.componentSeats.forEach(cpnt => {\n                        cpnt.setBanker(false);\n                    });\n                    this.nodePokers.forEach(node => {\n                        node.removeAllChildren();\n                    });\n                    th.room.players.forEach(player => {\n                        this.initSingleSeat(player);\n                    });\n                    this.refreshOptions();\n                    if (th.room.game_num == th.room.total_num) {\n                        cc.log(\"done........................\");\n                        this.toConnectApi();\n                    }\n                }, 0.1 + 0.5 + offsetCount * 0.05 + 3);\n            }, 1);\n        });\n\n        //战绩\n        this.node.on(\"getScoreBoard\", data => {\n            cc.log(\"<<<===[getScoreBoard] GameNN:\", data);\n            th.wc.hide();\n            this.resultNode.x = 0;\n            this.resultNode.y = 0;\n            this.resultNode.active = true;\n\n            let {\n                room_number,\n                time,\n                total_num,\n                room_creator,\n                scoreboard\n            } = data.balance_scoreboard;\n\n            this.resultNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = time;\n\n            this.resultNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = total_num + \"局\";\n\n            this.resultNode\n                .getChildByName(\"lbl_banker\")\n                .getComponent(\"cc.Label\").string = \"房主：\" + room_creator;\n\n            let resultNode = this.resultNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n            scoreboard.forEach((player, index) => {\n                let item = cc.instantiate(this.resultItemPrefab);\n                item.getChildByName(\"lbl_id\").getComponent(\"cc.Label\").string =\n                    \"ID：\" + player.account_id;\n                item\n                    .getChildByName(\"lbl_name\")\n                    .getComponent(\"cc.Label\").string = player.name;\n                item\n                    .getChildByName(\"lbl_score\")\n                    .getComponent(\"cc.Label\").string = player.score;\n\n                let headImg = item\n                    .getChildByName(\"headImg\")\n                    .getComponent(\"cc.Sprite\");\n                cc.loader.load(\n                    {\n                        url: player.avatar,\n                        type: \"jpg\"\n                    },\n                    (err, texture) => {\n                        if (!err) {\n                            let headSpriteFrame = new cc.SpriteFrame(\n                                texture,\n                                cc.Rect(0, 0, texture.width, texture.height)\n                            );\n                            headImg.spriteFrame = headSpriteFrame;\n                            headImg.node.setScale(2 - texture.width / 120);\n                        }\n                    }\n                );\n\n                if (index == 0) {\n                    item.getChildByName(\"dayinjia\").active = true;\n                }\n                resultNode.addChild(item);\n            });\n            //Object.assign(th.room, data);\n        });\n\n        //战绩明细\n        this.node.on(\"getScoreDetail\", data => {\n            cc.log(\"<<<===[getScoreDetail] GameNN:\", data);\n            //Object.assign(th.room, data);\n            th.wc.hide();\n            this.resultDeatilNode.x = 0;\n            this.resultDeatilNode.y = 0;\n            this.resultDeatilNode.active = true;\n\n            let { room_number, create_time, game_num, rule_text } = data;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = create_time;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = game_num + \"局\";\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_info\")\n                .getComponent(\"cc.Label\").string = rule_text;\n\n            let resultDetailNode = this.resultDeatilNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n\n            //加载头像\n            let players = {};\n            data.balance_board.forEach(item => {\n                players[item.name] = item;\n            });\n\n            data.player_array.forEach(player => {\n                let { game_num, total_num, player_cards } = player;\n                let roundNode = cc.instantiate(this.resultDetailItemPrefab);\n                roundNode.height = 100 + data.balance_board.length * 100;\n                roundNode\n                    .getChildByName(\"lbl_round\")\n                    .getComponent(\n                        \"cc.Label\"\n                    ).string = `${game_num}/${total_num}`;\n                let playersNode = roundNode.getChildByName(\"players\");\n                player_cards.forEach(item => {\n                    let playerNode = cc.instantiate(\n                        this.resultDetailSonItemPrefab\n                    );\n\n                    playerNode\n                        .getChildByName(\"lbl_id\")\n                        .getComponent(\"cc.Label\").string =\n                        players[item.name].account_id + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_name\")\n                        .getComponent(\"cc.Label\").string = item.name + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_mtp\")\n                        .getComponent(\"cc.Label\").string = item.chip + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_score\")\n                        .getComponent(\"cc.Label\").string = item.score + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_niu\")\n                        .getComponent(\"cc.Label\").string =\n                        item.card_type_str + \"\";\n                    playerNode.getChildByName(\"icon_banker\").active =\n                        item.is_banker == 1;\n\n                    let headimg = playerNode\n                        .getChildByName(\"headImg\")\n                        .getComponent(\"cc.Sprite\");\n\n                    cc.loader.load(\n                        {\n                            url: players[item.name].avatar,\n                            type: \"jpg\"\n                        },\n                        (err, texture) => {\n                            if (!err) {\n                                let headSpriteFrame = new cc.SpriteFrame(\n                                    texture,\n                                    cc.Rect(0, 0, texture.width, texture.height)\n                                );\n                                headimg.spriteFrame = headSpriteFrame;\n                                headimg.node.setScale(2 - texture.width / 120);\n                            }\n                        }\n                    );\n\n                    let pokerNode = playerNode.getChildByName(\"pokers\");\n                    item.player_cards.forEach(card => {\n                        pokerNode.addChild(\n                            th.pokerManager.getPokerSpriteById(card)\n                        );\n                    });\n                    playersNode.addChild(playerNode);\n                });\n                resultDetailNode.addChild(roundNode);\n            });\n        });\n\n        this.node.on(\"getCopyUrl\", data => {\n            cc.log(\"<<<===[getCopyUrl] GameNN:\", data);\n            /*\n            let result = th.webCopyString(data.url);\n            cc.log(\"address:\", data.url);\n            th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n            */\n        });\n    },\n    onResultCloseClicked() {\n        th.wc.show(\"正在返回大厅。。。\");\n        th.args = {};\n        th.room.room_id = null;\n        th.room.room_number = null;\n        th.gametype = null;\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onZhanjiseachClicked() {\n        const params = {\n            operation: \"getScoreDetail\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                type: 1,\n                num2: 10291,\n                num: th.room.room_number\n            }\n        };\n        cc.log(\"===>>>[getScoreDetail] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onResultDetailCloseClicked() {\n        this.resultDeatilNode.active = false;\n    },\n    onChanganbaocunClicked() {\n        cc.log(\"长按保存....\");\n    },\n    showNiuType(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodeSeat = this.nodeSeats[index];\n        const nodePoker = this.nodePokers[index];\n        if (player.account_id != th.myself.account_id) {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = nodeSeat.x > 0 ? -160 : 150;\n            niuType.y = -20;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.2));\n        } else {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = 310;\n            niuType.y = 85;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.5));\n        }\n        let niuIndex = th.getNiuIndex(player.card_type, player.combo_point);\n        let mp3Name = \"bull\" + niuIndex + \".m4a\";\n        th.audioManager.playSFX(mp3Name);\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.spriteClickLookPai.node.active = false;\n        this.initRoomInfo();\n        this.initSeat();\n        this.initMtpBtn();\n        this.refreshOptions();\n        if (th.room.room_status == 2) {\n            let player = th.getMyselfPlayer();\n            player.cards = th.room.cards;\n            this.showPokers();\n        }\n        //是不是有庄\n        let player = th.getBankerPlayer();\n        if (player) {\n            let index = th.getLocalIndex(player.serial_num - 1);\n            this.componentSeats[index].setBanker(true);\n        }\n    },\n    initMtpBtn() {\n        let [mtp1, mtp2, mtp3, mtp4] = th.room.bet_type_arr;\n        this.btnPlayerMtp1.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp1 + \"倍\";\n        this.btnPlayerMtp2.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp2 + \"倍\";\n        this.btnPlayerMtp3.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp3 + \"倍\";\n        this.btnPlayerMtp4.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp4 + \"倍\";\n        this.btnBankerMtp1.node.acitve = false;\n        this.btnBankerMtp2.node.acitve = false;\n        this.btnBankerMtp4.node.acitve = false;\n        this.btnPlayerMtp1.node.active = false;\n        this.btnPlayerMtp2.node.active = false;\n        this.btnPlayerMtp3.node.active = false;\n        this.btnPlayerMtp4.node.active = false;\n\n        this.btnPlayerMtp1.node.multiples = mtp1;\n        this.btnPlayerMtp2.node.multiples = mtp2;\n        this.btnPlayerMtp3.node.multiples = mtp3;\n        this.btnPlayerMtp4.node.multiples = mtp4;\n\n        this.btnQiang.node.active = false;\n        this.btnBuqiang.node.active = false;\n        this.btnReady.node.active = false;\n        this.btnShow.node.active = false;\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            this.nodeOptions.active = true;\n\n            /*\n            banker_mode: 1,\n            1 = 自由抢庄     抢与不抢（没有倍数）都不抢或者都抢随机一个    选倍数（不是庄选）    开牌\n            2 = 明牌抢庄\n            3 = 转庄牛牛,牛牛上庄\n            4 = 通比牛牛\n            5 = 固定庄家 \n            */\n\n            const banker_mode = th.room.banker_mode;\n            const isZYQZ = banker_mode == 1;\n\n            let player = th.getMyselfPlayer();\n            //准备按钮\n            let isShowBtnReady =\n                (player.account_status == 0 || player.account_status == 1) &&\n                th.room.room_status == 1;\n            this.btnReady.node.active = isShowBtnReady;\n            this.sprReady.node.active = isShowBtnReady;\n            //抢庄按钮\n            let isShowQiangBrank =\n                player.account_status == 3 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnBankerMtp1.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnBankerMtp2.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnBankerMtp4.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnQiang.node.active = isShowQiangBrank && isZYQZ;\n            this.btnBuqiang.node.active = isShowQiangBrank;\n            this.sprQiangzhuang.node.active = isShowQiangBrank;\n            //闲加倍数选择\n            let isShowSelectMultiples =\n                player.is_banker == 0 &&\n                player.account_status == 6 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                player.multiples == 0;\n            this.btnPlayerMtp1.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp2.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp3.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp4.node.active = isShowSelectMultiples;\n            this.sprWaitPlayerBet.node.active = isShowSelectMultiples;\n            //摊牌按钮\n            let isShowText =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount <= 0;\n            this.btnShow.node.active = isShowText;\n\n            let isShowClickLookPai =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount > 0;\n            this.spriteClickLookPai.node.active = isShowClickLookPai;\n            this.sprWaitShow.node.active = isShowClickLookPai || isShowText;\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            seat.seatIndex = i; //为座位编号\n            this.baseNode.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n        }\n        const players = th.room.players;\n        for (let i = 0; i < players.length; ++i) {\n            this.initSingleSeat(players[i]);\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == 1 ? false : true\n        );\n        /*\n        this.componentSeats[index].setBanker(\n            player.is_banker == 1 ? true : false\n        );\n        */\n        this.componentSeats[index].setScore(player.account_score);\n        this.componentSeats[index].setReady(player.account_status == 2);\n        if (player.account_status == 4) {\n            //不抢\n            this.componentSeats[index].setMultiples(\"n\");\n        } else if (player.account_status == 5) {\n            //抢庄\n            let mtp = player.multiples != 0 ? \"x\" + player.multiples : \"\";\n            this.componentSeats[index].setMultiples(\"y\" + mtp);\n        } else if (player.account_status == 6) {\n            this.componentSeats[index].setMultiples(\n                player.multiples != 0 ? \"x\" + player.multiples : \"\"\n            );\n            /*\n            //闲家倍数\n            if (player.is_banker == 1) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n            */\n        } else if (player.account_status == 7) {\n            //未摊牌\n            this.componentSeats[index].setMultiples(\n                player.is_banker == 1 ? null : \"x\" + player.multiples\n            );\n        } else {\n            this.componentSeats[index].setMultiples(null);\n        }\n    },\n    onCopyCliecked: function(targer, data) {\n        /*\n        let address = `${th.href}?roomId=${th.room.room_number}&type=${\n            th.gametype\n        }`;\n        */\n        let result = th.webCopyString(th.room.copyurl);\n        cc.log(\"address:\", th.room.copyurl);\n        th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n    },\n    onBankerMultiplesClicked: function(targer, value) {\n        let multiples = 1;\n        if (Number(value) == 0) {\n            multiples = 1;\n            th.audioManager.playSFX(`robbanker.m4a`);\n        } else {\n            multiples = Number(value);\n            th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        }\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 1,\n                multiples: Number(value)\n            }\n        };\n        cc.log(\"===>>>[GrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBuqiangClicked: function() {\n        th.audioManager.playSFX(\"nobanker.m4a\");\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 0,\n                multiples: 1\n            }\n        };\n        cc.log(\"===>>>[NoGrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n        const params = {\n            operation: \"ReadyStart\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ReadyStart] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onPlayerMultiplesClicked: function(targer, value) {\n        let multiples = targer.target.multiples;\n        th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        const params = {\n            operation: \"PlayerMultiples\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[PlayerMultiples] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onShowClicked: function(targer) {\n        cc.log(\"onPlayerMultiplesClicked:\");\n        const params = {\n            operation: \"ShowCard\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ShowCard] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onChatClicked(targer) {\n        /*\n        this.node.getChildByName(\"Poker_Ghost\")\n        .runAction(cc.sequence(cc.rotateBy(0,0,-180),cc.rotateBy(0.5,0,90), cc.callFunc((targer)=>{\n            cc.log(\"换派\",targer);\n            targer.getChildByName(\"bg_back\").active=false;;\n        }),cc.rotateBy(0.5,0,90)) )\n         let poker = th.pokerManager.getPokerSpriteById(\"A1\");\n        this.node.getChildByName(\"Poker_Back\").addChild(poker);\n        this.node.addChild(th.pokerManager.getNiuSprite(4, 0));\n        this.setCountdown(10, \"TEST.....\");\n        */\n        cc.log(th.room);\n    },\n    onMoreClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙\");\n        seat.setReady(true);\n        seat.setOffline(true);\n        seat.setScore(\"-8888\");\n        seat.setUserName(\"我的名字\");\n        seat.setCountdown(10);\n    },\n    onThemeClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙伙右伙历伙\");\n        seat.setReady(false);\n        seat.setOffline(true);\n        seat.setScore(\"+8888\");\n        seat.setCountdown(0);\n    },\n    onLookClicked(targer) {\n        cc.log(\"onLookClickedonLookClickedonLookClickedonLookClicked\");\n        let result = th.webCopyString(\n            \"onLookClickedonLookClickedonLookClickedonLookClickedCopy\"\n        );\n        th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n    },\n    onPokerClicked(targer, value) {\n        cc.log(\"Poker\", targer.target.pokerId, value);\n        let pokerId = targer.target.pokerId;\n        if (pokerId != -1) {\n            this.showOpenPokerAnim(targer.target);\n            th.myself.needLookCount = th.myself.needLookCount - 1;\n            this.refreshOptions();\n        }\n    },\n    showOpenPokerAnim(poker) {\n        let pokerId = poker.pokerId;\n        if (pokerId != -1) {\n            poker.runAction(\n                cc.sequence(\n                    cc.scaleTo(0.3, 0, 1),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(pokerId)\n                        );\n                    }),\n                    cc.scaleTo(0.3, 1, 1),\n                    cc.callFunc(traget => {\n                        traget.pokerId = -1;\n                    })\n                )\n            );\n        }\n    },\n    showPokers() {\n        //找到坐位上有人，且准备的发牌\n        let seatIndexs = [];\n        let players = [];\n        th.room.players.forEach(player => {\n            cc.log(\"showPokers:\", player.account_status);\n            if (player.account_status > 1) {\n                const index = th.getLocalIndex(player.serial_num - 1);\n                seatIndexs.push(index);\n                players.push(player);\n            }\n        });\n        let myLocalIndex = th.getMyselfLocalIndex();\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            let pokerIds = player.cards;\n            let isMyself = seatIndexs[i] == myLocalIndex;\n            if (player.account_status == 7) {\n                //没摊牌\n                if (isMyself) {\n                    pokerIds = new Array(5).fill(-1);\n                    for (let j = 0; j < 5 - th.myself.needLookCount; j++) {\n                        pokerIds[j] = player.cards[j];\n                    }\n                } else {\n                    pokerIds = new Array(5).fill(-1);\n                }\n            } else if (player.account_status == 8) {\n                //摊牌\n                pokerIds = player.cards;\n            } else {\n                //其他\n                pokerIds = new Array(5).fill(-1);\n            }\n            cc.log(\n                \"是自己：\" + isMyself,\n                player.nickname + \" 发牌：\",\n                pokerIds\n            );\n            let basePoker = this.nodePokers[seatIndexs[i]];\n            basePoker.removeAllChildren();\n            let readyPokersIds = player.cards;\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let pokerId = pokerIds[pi];\n                let realPokerId = readyPokersIds[pi] || -1;\n                let poker = th.pokerManager.getPokerSpriteById(pokerId);\n                poker.pokerId = isMyself ? realPokerId : -1;\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePoker.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                if (pokerId == -1) {\n                    let clickEventHandler = new cc.Component.EventHandler();\n                    clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n                    clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n                    clickEventHandler.handler = \"onPokerClicked\";\n                    clickEventHandler.customEventData = realPokerId;\n                    poker\n                        .getComponent(cc.Button)\n                        .clickEvents.push(clickEventHandler);\n                }\n                basePoker.addChild(poker);\n            }\n        }\n        //发牌效果\n        th.audioManager.playSFX(\"fapai.m4a\");\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < seatIndexs.length; j++) {\n                let seatIndex = seatIndexs[j];\n                let seat = this.nodeSeats[seatIndex];\n                let basePokers = this.nodePokers[seatIndex];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = seatIndex == myLocalIndex;\n                let showCard = i < 5 - th.myself.needLookCount;\n                //cc.log(seatIndex, myLocalIndex, seatIndex == myLocalIndex);\n                ((poker, delay, x, y, isMyself, showCard) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                ),\n                                cc.callFunc(target => {\n                                    if (showCard) {\n                                        this.showOpenPokerAnim(target);\n                                    }\n                                })\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * seatIndexs.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself,\n                    showCard\n                );\n            }\n        }\n\n        //如果玩家已经 摊牌，显示牛\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            if (player.account_status == 8) {\n                this.showNiuType(player);\n            }\n        }\n    },\n    setCountdown(val, content) {\n        let num = Number(val);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        if (content) {\n            this.nodeCountdown\n                .getChildByName(\"lbl_title\")\n                .getComponent(\"cc.Label\").string = content;\n        } else {\n            this.nodeCountdown.getChildByName(\"lbl_title\").node.active = false;\n        }\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            //th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n        if (this.holdClick) {\n            this.holdTimeEclipse++;\n            if (this.holdTimeEclipse > 120) {\n                //如果长按时间大于2s，则认为长按了2s\n                this.holdTimeEclipse = 120;\n            }\n        }\n    },\n    toConnectApi: function(targer) {\n        cc.log(\"onCreateClicked:\", this.createFrom);\n        //断开大厅连接连接游戏websocket\n        th.webSocketManager.connectGameServer(\n            {\n                ip: \"47.96.177.207\",\n                port: 10000,\n                namespace: \"api\"\n            },\n            () => {\n                th.wc.show(\"正在获取结果...\");\n                const params = {\n                    operation: \"getScoreBoard\", //操作标志\n                    account_id: th.myself.account_id, //用户id};\n                    session: th.sign,\n                    data: {\n                        type: 1,\n                        num2: 10291,\n                        num: th.room.room_number\n                    }\n                };\n                cc.log(\"===>>>[getScoreBoard] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            }\n        );\n    }\n});\n"]}