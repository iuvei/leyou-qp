{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\GameNN.js"],"names":["cc","Class","extends","Component","properties","seatPrefab","Prefab","nodeSeats","Node","componentSeats","nodePokers","nodeAmins","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnBankerMtp1","Button","btnBankerMtp2","btnBankerMtp4","btnPlayerMtp1","btnPlayerMtp2","btnPlayerMtp3","btnPlayerMtp4","btnQiang","btnBuqiang","btnReady","btnShow","sprWaitBet","Sprite","sprPlayerBet","sprQiangzhuang","sprReady","sprWaitPlayerBet","sprWaitShow","sprWaitNext","spriteClickLookPai","_countdownEndTime","_isPlay","onLoad","th","log","initEventHandlers","initView","onEnable","start","webSocketManager","dataEventHandler","node","on","player","initSingleSeat","account_id","myself","refreshOptions","data","initRoomInfo","setCountdown","limit_time","showPokers","forEach","oldPlayer","getPlayerById","grab_array","index","scheduleOnce","getLocalIndex","serial_num","doBlink","getBankerPlayer","setBanker","length","getMyselfPlayer","cards","pokers","children","poker","pokerId","idx","runAction","sequence","scaleTo","callFunc","target","addChild","pokerManager","getPokerSpriteById","item","nodePoker","nodeSeat","hasNiu","getNiuIndex","card_type","combo_point","combo_array","isMyself","getMyselfLocalIndex","firstX","x","firstY","offset","moveTo","v2","y","showNiuType","score_board","account_ids","Object","keys","account_score","setScoreAnim","room","banker_mode","needLookCount","clear","cpnt","removeAllChildren","players","game_num","total_num","niuType","getNiuSprite","scale","niuIndex","mp3Name","audioManager","playSFX","active","initSeat","initMtpBtn","room_status","bet_type_arr","mtp1","mtp2","mtp3","mtp4","getChildByName","getComponent","string","acitve","multiples","isPlayer","isZYQZ","isShowBtnReady","account_status","isShowQiangBrank","isShowSelectMultiples","is_banker","isShowText","isShowClickLookPai","base_score","seatsxy","getSeatXY","i","seat","instantiate","seatIndex","push","setInfo","nickname","headimgurl","sex","setOffline","online_status","setScore","setReady","setMultiples","mtp","onCopyCliecked","targer","value","address","href","room_number","gametype","msg","show","onBankerMultiplesClicked","Number","params","operation","session","sign","room_id","is_grab","ws","send","JSON","stringify","onBuqiangClicked","onReadyClicked","onPlayerMultiplesClicked","onShowClicked","onBackClicked","wc","director","loadScene","hide","onChatClicked","onMoreClicked","setChat","setUserName","onThemeClicked","onLookClicked","onPokerClicked","traget","seatIndexs","myLocalIndex","pokerIds","Array","fill","basePoker","readyPokersIds","pi","readyPokerId","position","convertToNodeSpaceAR","clickEventHandler","EventHandler","component","handler","customEventData","clickEvents","j","basePokers","delay","delayTime","spawn","val","content","num","Date","now","_alertStartTime","update","dt","miao","Math","ceil"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        seatPrefab: cc.Prefab,\n\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n        nodeAmins: cc.Node, //用来播放动画\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n\n        btnBankerMtp1: cc.Button,\n        btnBankerMtp2: cc.Button,\n        btnBankerMtp4: cc.Button,\n\n        btnPlayerMtp1: cc.Button,\n        btnPlayerMtp2: cc.Button,\n        btnPlayerMtp3: cc.Button,\n        btnPlayerMtp4: cc.Button,\n\n        btnQiang: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n        btnShow: cc.Button,\n\n        sprWaitBet: cc.Sprite,\n        sprPlayerBet: cc.Sprite,\n        sprQiangzhuang: cc.Sprite,\n        sprReady: cc.Sprite,\n        sprWaitPlayerBet: cc.Sprite,\n        sprWaitShow: cc.Sprite,\n        sprWaitNext: cc.Sprite,\n\n        spriteClickLookPai: cc.Sprite, //点击看牌\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true //用来播放倒计时声音\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n        //自由抢庄需要看牌两次\n        this.initEventHandlers();\n        this.initView();\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"CreateRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.myself.account_id) {\n                this.refreshOptions();\n                this.initSingleSeat(player);\n            }\n        });\n        this.node.on(\"GameStart\", data => {\n            cc.log(\"<<<===[GameStart] GmaeNN\", data);\n            this.initRoomInfo();\n            this.setCountdown(data.limit_time, \"游戏开始了\");\n            this.refreshOptions();\n        });\n        this.node.on(\"MyCards\", player => {\n            cc.log(\"<<<===[MyCards] GmaeNN\", player);\n            this.showPokers();\n            this.refreshOptions();\n        });\n\n        //开始游戏,闲家选倍数\n        this.node.on(\"StartBet\", data => {\n            cc.log(\"<<<===[StartBet] GmaeNN:\", data);\n            this.refreshOptions();\n            this.setCountdown(data.limit_time, \"投注开始了\");\n            //抢庄account_ID数据\n            //\"grab_array\": [\"31\", \"18\"],\n            data.data.forEach(player => {\n                const oldPlayer = th.getPlayerById(player.account_id);\n                this.initSingleSeat(oldPlayer);\n            });\n\n            //TODO\n            cc.log(\"TODO抢庄效果\", data.grab_array);\n            data.grab_array.forEach((account_id, index) => {\n                this.scheduleOnce(() => {\n                    const player = th.getPlayerById(account_id);\n                    const index = th.getLocalIndex(player.serial_num - 1);\n                    this.componentSeats[index].doBlink();\n                }, index * 0.5);\n            });\n            this.scheduleOnce(() => {\n                data.data.forEach(player => {\n                    const oldPlayer = th.getPlayerById(player.account_id);\n                    this.initSingleSeat(oldPlayer);\n                });\n                const player = th.getBankerPlayer();\n                const index = th.getLocalIndex(player.serial_num - 1);\n                this.componentSeats[index].setBanker(true);\n                this.scheduleOnce(() => {\n                    this.refreshOptions();\n                }, 1);\n            }, data.grab_array.length * 0.5);\n        });\n\n        //闲家选倍数 通知\n        this.node.on(\"UpdateAccountMultiples\", player => {\n            cc.log(\"<<<===[UpdateAccountMultiples] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n\n        //显示牌\n        this.node.on(\"StartShow\", data => {\n            cc.log(\"<<<===[StartShow] GmaeNN:\", data);\n\n            this.refreshOptions();\n            //显示我自己的牌\n            let player = th.getMyselfPlayer();\n            let cards = player.cards;\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let pokers = this.nodePokers[index].children;\n            cc.log(\"显示我自己的牌:\", player, cards);\n            pokers.forEach((poker, index) => {\n                poker.pokerId = cards[index];\n            });\n            pokers.forEach((poker, idx) => {\n                if (idx >= 3) return;\n                poker.runAction(\n                    cc.sequence(\n                        cc.scaleTo(0.3, 0, 1),\n                        cc.callFunc(target => {\n                            target.addChild(\n                                th.pokerManager.getPokerSpriteById(\n                                    target.pokerId\n                                )\n                            );\n                        }),\n                        cc.scaleTo(0.3, 1, 1),\n                        cc.callFunc(target => {\n                            target.pokerId = -1;\n                        })\n                    )\n                );\n            });\n\n            this.setCountdown(data.limit_time, \"摊牌开始了\");\n\n            data.data.forEach(item => {\n                let player = th.getPlayerById(item.account_id);\n                this.initSingleSeat(player);\n            });\n        });\n\n        //摊牌\n        this.node.on(\"UpdateAccountShow\", player => {\n            cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n            const index = th.getLocalIndex(player.serial_num - 1);\n            const nodePoker = this.nodePokers[index];\n            const nodeSeat = this.nodeSeats[index];\n            let pokers = nodePoker.children;\n\n            // 大于0为有牛\n            let hasNiu =\n                th.getNiuIndex(player.card_type, player.combo_point) > 0;\n            let cards = hasNiu > 0 ? player.combo_array : player.cards;\n            //如果不是自己\n            //(isMyself ? 100 : seat.x > 0 ? -210 : 90) + basePokers.y +i * (isMyself ? 110 : 30),\n            // isMyself ? -25 : 0,\n            cc.log(isMyself, \"=======================有牛？：\", hasNiu);\n            let isMyself = th.getMyselfLocalIndex() == index;\n            let firstX = isMyself ? 100 : nodeSeat.x > 0 ? -210 : 90;\n            let firstY = isMyself ? -25 : 0;\n            let offset = isMyself ? 110 : 30;\n            pokers.forEach((poker, index) => {\n                poker.runAction(\n                    cc.sequence(\n                        cc.moveTo(0.3, cc.v2(firstX, firstY)),\n                        cc.callFunc(target => {\n                            target.addChild(\n                                th.pokerManager.getPokerSpriteById(cards[index])\n                            );\n                        }),\n                        cc.moveTo(\n                            0.3,\n                            cc.v2(\n                                firstX +\n                                    nodePoker.y +\n                                    index * offset +\n                                    (hasNiu && index > 2 ? 15 : 0),\n                                firstY\n                            )\n                        )\n                    )\n                );\n            });\n            this.showNiuType(player);\n        });\n\n        //结果\n        this.node.on(\"Win\", data => {\n            cc.log(\"<<<===[Win] GmaeNN:\", data);\n            //赢的人\n            //let win = data.winner_array;\n            //输的人\n            //let lose = data.loser_array;\n\n            let score_board = data.score_board;\n            let account_ids = Object.keys(score_board);\n            cc.log(\"AccountIds:\", account_ids);\n            account_ids.forEach(account_id => {\n                const player = th.getPlayerById(account_id);\n                player.account_score = score_board[account_id];\n                const index = th.getLocalIndex(player.serial_num - 1);\n                this.componentSeats[index].setScoreAnim(player.account_score);\n            });\n\n            cc.log(\"TODO 飞筹码效果\");\n\n            this.scheduleOnce(() => {\n                if (th.room.banker_mode == 1) {\n                    th.myself.needLookCount = 2;\n                }\n                th.clear();\n                this.componentSeats.forEach(cpnt => {\n                    cpnt.setBanker(false);\n                });\n                this.nodePokers.forEach(node => {\n                    node.removeAllChildren();\n                });\n                th.room.players.forEach(player => {\n                    this.initSingleSeat(player);\n                });\n                this.refreshOptions();\n            }, 10);\n\n            //\n            if (th.room.game_num == th.room.total_num) {\n                cc.log(\"done........................\");\n            }\n        });\n    },\n    showNiuType(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodeSeat = this.nodeSeats[index];\n        const nodePoker = this.nodePokers[index];\n        if (player.account_id != th.myself.account_id) {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = nodeSeat.x > 0 ? -160 : 150;\n            niuType.y = -20;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.2));\n        } else {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = 310;\n            niuType.y = 85;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.5));\n        }\n        let niuIndex = th.getNiuIndex(player.card_type, player.combo_point);\n        let mp3Name = \"bull\" + niuIndex + \".m4a\";\n        th.audioManager.playSFX(mp3Name);\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.spriteClickLookPai.node.active = false;\n        this.initRoomInfo();\n        this.initSeat();\n        this.initMtpBtn();\n        this.refreshOptions();\n        if (th.room.room_status == 2) {\n            let player = th.getMyselfPlayer();\n            player.cards = th.room.cards;\n            this.showPokers();\n        }\n        //是不是有庄\n        let player = th.getBankerPlayer();\n        if (player) {\n            let index = th.getLocalIndex(player.serial_num - 1);\n            this.componentSeats[index].setBanker(true);\n        }\n    },\n    initMtpBtn() {\n        let [mtp1, mtp2, mtp3, mtp4] = th.room.bet_type_arr;\n        this.btnPlayerMtp1.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp1 + \"倍\";\n        this.btnPlayerMtp2.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp2 + \"倍\";\n        this.btnPlayerMtp3.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp3 + \"倍\";\n        this.btnPlayerMtp4.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp4 + \"倍\";\n        this.btnBankerMtp1.node.acitve = false;\n        this.btnBankerMtp2.node.acitve = false;\n        this.btnBankerMtp4.node.acitve = false;\n        this.btnPlayerMtp1.node.active = false;\n        this.btnPlayerMtp2.node.active = false;\n        this.btnPlayerMtp3.node.active = false;\n        this.btnPlayerMtp4.node.active = false;\n\n        this.btnPlayerMtp1.node.multiples = mtp1;\n        this.btnPlayerMtp2.node.multiples = mtp2;\n        this.btnPlayerMtp3.node.multiples = mtp3;\n        this.btnPlayerMtp4.node.multiples = mtp4;\n\n        this.btnQiang.node.active = false;\n        this.btnBuqiang.node.active = false;\n        this.btnReady.node.active = false;\n        this.btnShow.node.active = false;\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            this.nodeOptions.active = true;\n\n            /*\n            banker_mode: 1,\n            1 = 自由抢庄     抢与不抢（没有倍数）都不抢或者都抢随机一个    选倍数（不是庄选）    开牌\n            2 = 明牌抢庄\n            3 = 转庄牛牛,牛牛上庄\n            4 = 通比牛牛\n            5 = 固定庄家 \n            */\n\n            const banker_mode = th.room.banker_mode;\n            const isZYQZ = banker_mode == 1;\n\n            let player = th.getMyselfPlayer();\n            //准备按钮\n            let isShowBtnReady =\n                (player.account_status == 0 || player.account_status == 1) &&\n                th.room.room_status == 1;\n            this.btnReady.node.active = isShowBtnReady;\n            this.sprReady.node.active = isShowBtnReady;\n            //抢庄按钮\n            let isShowQiangBrank =\n                player.account_status == 3 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnBankerMtp1.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnBankerMtp2.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnBankerMtp4.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnQiang.node.active = isShowQiangBrank && isZYQZ;\n            this.btnBuqiang.node.active = isShowQiangBrank;\n            this.sprQiangzhuang.node.active = isShowQiangBrank;\n            //闲加倍数选择\n            let isShowSelectMultiples =\n                player.is_banker == 0 &&\n                player.account_status == 6 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnPlayerMtp1.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp2.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp3.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp4.node.active = isShowSelectMultiples;\n            this.sprWaitPlayerBet.node.active = isShowSelectMultiples;\n            //摊牌按钮\n            let isShowText =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount <= 0;\n            this.btnShow.node.active = isShowText;\n\n            let isShowClickLookPai =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount > 0;\n            this.spriteClickLookPai.node.active = isShowClickLookPai;\n            this.sprWaitShow.node.active = isShowClickLookPai || isShowText;\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            seat.seatIndex = i; //为座位编号\n            this.node.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n        }\n        const players = th.room.players;\n        for (var i = 0; i < players.length; ++i) {\n            this.initSingleSeat(players[i]);\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == 1 ? false : true\n        );\n        /*\n        this.componentSeats[index].setBanker(\n            player.is_banker == 1 ? true : false\n        );\n        */\n        this.componentSeats[index].setScore(player.account_score);\n        this.componentSeats[index].setReady(player.account_status == 2);\n        if (player.account_status == 4) {\n            //不抢\n            this.componentSeats[index].setMultiples(\"n\");\n        } else if (player.account_status == 5) {\n            //抢庄\n            let mtp = player.multiples != 0 ? \"x\" + player.multiples : \"\";\n            this.componentSeats[index].setMultiples(\"y\" + mtp);\n        } else if (player.account_status == 6) {\n            //闲家倍数\n            if (player.is_banker == 1) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n        } else if (player.account_status == 7) {\n            //未摊牌\n            this.componentSeats[index].setMultiples(\n                player.is_banker == 1 ? null : \"x\" + player.multiples\n            );\n        } else {\n            this.componentSeats[index].setMultiples(null);\n        }\n    },\n    onCopyCliecked: function(targer, value) {\n        let address = `${th.href}?roomId=${th.room.room_number}&type=${\n            th.gametype\n        }`;\n        cc.log(\"address:\", address);\n        th.msg.show(address);\n    },\n    onBankerMultiplesClicked: function(targer, value) {\n        let multiples = 1;\n        if (Number(value) == 0) {\n            multiples = 1;\n            th.audioManager.playSFX(`robbanker.m4a`);\n        } else {\n            multiples = Number(value);\n            th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        }\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 1,\n                multiples: Number(value)\n            }\n        };\n        cc.log(\"===>>>[GrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBuqiangClicked: function() {\n        th.audioManager.playSFX(\"nobanker.m4a\");\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 0,\n                multiples: 1\n            }\n        };\n        cc.log(\"===>>>[NoGrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n        const params = {\n            operation: \"ReadyStart\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ReadyStart] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onPlayerMultiplesClicked: function(targer, value) {\n        let multiples = targer.target.multiples;\n        cc.log(targer);\n        cc.log(\"==============================multiples:\", targer.target);\n        cc.log(\n            \"==============================multiples:\",\n            targer.target.multiples\n        );\n        th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        const params = {\n            operation: \"PlayerMultiples\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[PlayerMultiples] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onShowClicked: function(targer) {\n        cc.log(\"onPlayerMultiplesClicked:\");\n        const params = {\n            operation: \"ShowCard\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ShowCard] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onChatClicked(targer) {\n        /*\n        this.node.getChildByName(\"Poker_Ghost\")\n        .runAction(cc.sequence(cc.rotateBy(0,0,-180),cc.rotateBy(0.5,0,90), cc.callFunc((targer)=>{\n            cc.log(\"换派\",targer);\n            targer.getChildByName(\"bg_back\").active=false;;\n        }),cc.rotateBy(0.5,0,90)) )\n         let poker = th.pokerManager.getPokerSpriteById(\"A1\");\n        this.node.getChildByName(\"Poker_Back\").addChild(poker);\n        this.node.addChild(th.pokerManager.getNiuSprite(4, 0));\n        this.setCountdown(10, \"TEST.....\");\n        */\n        cc.log(th.room);\n    },\n    onMoreClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙\");\n        seat.setReady(true);\n        seat.setOffline(true);\n        seat.setScore(\"-8888\");\n        seat.setUserName(\"我的名字\");\n        seat.setCountdown(10);\n    },\n    onThemeClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙伙右伙历伙\");\n        seat.setReady(false);\n        seat.setOffline(true);\n        seat.setScore(\"+8888\");\n        seat.setCountdown(0);\n    },\n    onLookClicked(targer) {},\n    onPokerClicked(targer, value) {\n        cc.log(\"Poker\", targer.target.pokerId, value);\n        let pokerId = targer.target.pokerId;\n        if (pokerId != -1) {\n            targer.target.runAction(\n                cc.sequence(\n                    cc.scaleTo(0.3, 0, 1),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(pokerId)\n                        );\n                    }),\n                    cc.scaleTo(0.3, 1, 1),\n                    cc.callFunc(traget => {\n                        traget.pokerId = -1;\n                    })\n                )\n            );\n            th.myself.needLookCount = th.myself.needLookCount - 1;\n            this.refreshOptions();\n        }\n    },\n    showPokers() {\n        //找到坐位上有人，且准备的发牌\n        let seatIndexs = [];\n        let players = [];\n        th.room.players.forEach(player => {\n            if (player.account_status) {\n                const index = th.getLocalIndex(player.serial_num - 1);\n                seatIndexs.push(index);\n                players.push(player);\n            }\n        });\n        let myLocalIndex = th.getMyselfLocalIndex();\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            let pokerIds = player.cards;\n            let isMyself = seatIndexs[i] == myLocalIndex;\n            if (player.account_status == 7) {\n                //没摊牌\n                if (isMyself) {\n                    pokerIds = new Array(5).fill(-1);\n                    pokerIds[0] = player.cards[0];\n                    pokerIds[1] = player.cards[1];\n                    pokerIds[2] = player.cards[2];\n                } else {\n                    pokerIds = new Array(5).fill(-1);\n                }\n            } else if (player.account_status == 8) {\n                //摊牌\n                pokerIds = player.cards;\n            } else {\n                //其他\n                pokerIds = new Array(5).fill(-1);\n            }\n            cc.log(\n                \"是自己：\" + isMyself,\n                player.nickname + \" 发牌：\",\n                pokerIds\n            );\n            let basePoker = this.nodePokers[seatIndexs[i]];\n            basePoker.removeAllChildren();\n            let readyPokersIds = player.cards;\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let pokerId = pokerIds[pi];\n                let readyPokerId = readyPokersIds[pi] || -1;\n                let poker = th.pokerManager.getPokerSpriteById(pokerId);\n                poker.pokerId = readyPokerId;\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePoker.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                if (pokerId == -1) {\n                    let clickEventHandler = new cc.Component.EventHandler();\n                    clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n                    clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n                    clickEventHandler.handler = \"onPokerClicked\";\n                    clickEventHandler.customEventData = readyPokerId;\n                    poker\n                        .getComponent(cc.Button)\n                        .clickEvents.push(clickEventHandler);\n                }\n                basePoker.addChild(poker);\n            }\n        }\n        //发牌效果\n        th.audioManager.playSFX(\"fapai.m4a\");\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < seatIndexs.length; j++) {\n                let seatIndex = seatIndexs[j];\n                let seat = this.nodeSeats[seatIndex];\n                let basePokers = this.nodePokers[seatIndex];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = seatIndex == myLocalIndex;\n                //cc.log(seatIndex, myLocalIndex, seatIndex == myLocalIndex);\n                ((poker, delay, x, y, isMyself) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                )\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * seatIndexs.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself\n                );\n            }\n        }\n\n        //如果玩家已经 摊牌，显示牛\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            if (player.account_status == 8) {\n                this.showNiuType(player);\n            }\n        }\n    },\n    setCountdown(val, content) {\n        let num = Number(val);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        if (content) {\n            this.nodeCountdown\n                .getChildByName(\"lbl_title\")\n                .getComponent(\"cc.Label\").string = content;\n        } else {\n            this.nodeCountdown.getChildByName(\"lbl_title\").node.active = false;\n        }\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n    }\n});\n"]}