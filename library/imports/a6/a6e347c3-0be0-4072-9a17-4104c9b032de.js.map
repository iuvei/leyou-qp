{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\GameNN.js"],"names":["cc","Class","extends","Component","properties","seatPrefab","Prefab","nodeSeats","Node","componentSeats","nodePokers","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnBankerMtp1","Button","btnBankerMtp2","btnBankerMtp4","btnPlayerMtp1","btnPlayerMtp2","btnPlayerMtp3","btnPlayerMtp4","btnQiang","btnBuqiang","btnReady","btnShow","spriteClickLookPai","Sprite","_countdownEndTime","_isPlay","onLoad","th","log","initEventHandlers","initView","onEnable","start","webSocketManager","dataEventHandler","node","on","player","initSingleSeat","account_id","myself","refreshOptions","data","initRoomInfo","setCountdown","limit_time","showPokers","forEach","oldPlayer","getPlayerById","grab_array","index","scheduleOnce","getLocalIndex","serial_num","doBlink","getBankerPlayer","length","getMyselfPlayer","cards","pokers","children","poker","pokerId","idx","runAction","sequence","scaleTo","callFunc","target","addChild","pokerManager","getPokerSpriteById","item","nodePoker","showNiuType","score_board","account_ids","Object","keys","account_score","setScoreAnim","room","banker_mode","needLookCount","clear","removeAllChildren","players","nodeSeat","niuType","getNiuSprite","card_type","combo_point","x","y","niuIndex","getNiuIndex","mp3Name","audioManager","playSFX","active","initSeat","initMtpBtn","room_status","bet_type_arr","mtp1","mtp2","mtp3","mtp4","getChildByName","getComponent","string","acitve","multiples","isPlayer","isZYQZ","isShowBtnReady","account_status","isShowQiangBrank","isShowSelectMultiples","is_banker","isShowClickLookPai","game_num","total_num","base_score","seatsxy","getSeatXY","i","seat","instantiate","seatIndex","push","setInfo","nickname","headimgurl","sex","setOffline","online_status","setBanker","setScore","setReady","setMultiples","mtp","onBankerMultiplesClicked","targer","value","Number","params","operation","session","sign","room_id","is_grab","ws","send","JSON","stringify","onBuqiangClicked","onReadyClicked","onPlayerMultiplesClicked","onShowClicked","onBackClicked","wc","show","director","loadScene","hide","onChatClicked","onMoreClicked","setChat","setUserName","onThemeClicked","onLookClicked","onPokerClicked","traget","seatIndexs","myLocalIndex","getMyselfLocalIndex","pokerIds","isMyself","Array","fill","basePoker","readyPokersIds","pi","readyPokerId","scale","position","convertToNodeSpaceAR","v2","clickEventHandler","EventHandler","component","handler","customEventData","clickEvents","j","basePokers","delay","delayTime","spawn","moveTo","val","content","num","Date","now","_alertStartTime","update","dt","miao","Math","ceil"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        seatPrefab: cc.Prefab,\n\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n\n        btnBankerMtp1: cc.Button,\n        btnBankerMtp2: cc.Button,\n        btnBankerMtp4: cc.Button,\n\n        btnPlayerMtp1: cc.Button,\n        btnPlayerMtp2: cc.Button,\n        btnPlayerMtp3: cc.Button,\n        btnPlayerMtp4: cc.Button,\n\n        btnQiang: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n        btnShow: cc.Button,\n\n        spriteClickLookPai: cc.Sprite, //点击看牌\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true //用来播放倒计时声音\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n        //自由抢庄需要看牌两次\n        this.initEventHandlers();\n        this.initView();\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"CreateRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.myself.account_id) {\n                this.refreshOptions();\n                this.initSingleSeat(player);\n            }\n        });\n        this.node.on(\"GameStart\", data => {\n            cc.log(\"<<<===[GameStart] GmaeNN\", data);\n            this.initRoomInfo();\n            this.setCountdown(data.limit_time, \"游戏开始了\");\n            this.refreshOptions();\n        });\n        this.node.on(\"MyCards\", player => {\n            cc.log(\"<<<===[MyCards] GmaeNN\", player);\n            this.showPokers();\n            this.refreshOptions();\n        });\n\n        //开始游戏,闲家选倍数\n        this.node.on(\"StartBet\", data => {\n            cc.log(\"<<<===[StartBet] GmaeNN:\", data);\n            this.refreshOptions();\n            this.setCountdown(data.limit_time, \"投注开始了\");\n            //抢庄account_ID数据\n            //\"grab_array\": [\"31\", \"18\"],\n            data.data.forEach(player => {\n                const oldPlayer = th.getPlayerById(player.account_id);\n                this.initSingleSeat(oldPlayer);\n            });\n\n            //TODO\n            cc.log(\"TODO抢庄效果\", data.grab_array);\n            data.grab_array.forEach((account_id, index) => {\n                this.scheduleOnce(() => {\n                    const player = th.getPlayerById(account_id);\n                    const index = th.getLocalIndex(player.serial_num - 1);\n                    this.componentSeats[index].doBlink();\n                }, index * 0.3 + 0.1);\n            });\n\n            this.scheduleOnce(() => {\n                const player = th.getBankerPlayer();\n                const index = th.getLocalIndex(player.serial_num - 1);\n                this.componentSeats[index].doBlink();\n                this.refreshOptions();\n            }, data.grab_array.length * 0.3 + (data.grab_array.length == 0 ? 0 : 0.6));\n        });\n\n        //闲家选倍数 通知\n        this.node.on(\"UpdateAccountMultiples\", player => {\n            cc.log(\"<<<===[UpdateAccountMultiples] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n\n        //显示牌\n        this.node.on(\"StartShow\", data => {\n            cc.log(\"<<<===[StartShow] GmaeNN:\", data);\n\n            this.refreshOptions();\n            //显示我自己的牌\n            let player = th.getMyselfPlayer();\n            let cards = player.cards;\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let pokers = this.nodePokers[index].children;\n            cc.log(\"显示我自己的牌:\", player, cards);\n            pokers.forEach((poker, index) => {\n                poker.pokerId = cards[index];\n            });\n            pokers.forEach((poker, idx) => {\n                if (idx >= 3) return;\n                poker.runAction(\n                    cc.sequence(\n                        cc.scaleTo(0.3, 0, 1),\n                        cc.callFunc(target => {\n                            target.addChild(\n                                th.pokerManager.getPokerSpriteById(\n                                    target.pokerId\n                                )\n                            );\n                        }),\n                        cc.scaleTo(0.3, 1, 1),\n                        cc.callFunc(target => {\n                            target.pokerId = -1;\n                        })\n                    )\n                );\n            });\n\n            this.setCountdown(data.limit_time, \"摊牌开始了\");\n\n            data.data.forEach(item => {\n                let player = th.getPlayerById(item.account_id);\n                this.initSingleSeat(player);\n            });\n        });\n\n        //摊牌\n        this.node.on(\"UpdateAccountShow\", player => {\n            cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n            const index = th.getLocalIndex(player.serial_num - 1);\n            const nodePoker = this.nodePokers[index];\n            let pokers = nodePoker.children;\n            let cards = player.cards;\n            //如果不是自己\n            if (player.account_id != th.myself.account_id) {\n                pokers.forEach((poker, index) => {\n                    poker.addChild(\n                        th.pokerManager.getPokerSpriteById(cards[index])\n                    );\n                });\n            }\n            this.showNiuType(player);\n        });\n\n        //结果\n        this.node.on(\"Win\", data => {\n            cc.log(\"<<<===[Win] GmaeNN:\", data);\n            //赢的人\n            //let win = data.winner_array;\n            //输的人\n            //let lose = data.loser_array;\n\n            let score_board = data.score_board;\n            let account_ids = Object.keys(score_board);\n            account_ids.forEach(account_id => {\n                const player = th.getPlayerById(account_id);\n                player.account_score = score_board[account_id];\n                const index = th.getLocalIndex(player.serial_num - 1);\n                this.componentSeats[index].setScoreAnim(player.account_score);\n                //this.initSingleSeat(player);\n            });\n            cc.log(\"TODO 赢的效果\");\n\n            cc.log(\"TODO 飞筹码效果\");\n\n            this.scheduleOnce(() => {\n                if (th.room.banker_mode == 1) {\n                    th.myself.needLookCount = 2;\n                }\n                th.clear();\n                this.nodePokers.forEach(node => {\n                    node.removeAllChildren();\n                });\n                th.room.players.forEach(player => {\n                    this.initSingleSeat(player);\n                });\n                this.refreshOptions();\n            }, 3);\n        });\n    },\n    showNiuType(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodeSeat = this.nodeSeats[index];\n        const nodePoker = this.nodePokers[index];\n        if (player.account_id != th.myself.account_id) {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = nodeSeat.x > 0 ? -160 : 150;\n            niuType.y = -20;\n            nodePoker.addChild(niuType);\n        } else {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = 310;\n            niuType.y = 70;\n            nodePoker.addChild(niuType);\n        }\n        let niuIndex = th.getNiuIndex(player.card_type, player.combo_point);\n        let mp3Name = \"bull\" + niuIndex + \".m4a\";\n        th.audioManager.playSFX(mp3Name);\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.spriteClickLookPai.node.active = false;\n        this.initRoomInfo();\n        this.initSeat();\n        this.initMtpBtn();\n        this.refreshOptions();\n        if (th.room.room_status == 2) {\n            let player = th.getMyselfPlayer();\n            player.cards = th.room.cards;\n            this.showPokers();\n        }\n    },\n    initMtpBtn() {\n        let [mtp1, mtp2, mtp3, mtp4] = th.room.bet_type_arr;\n        this.btnPlayerMtp1.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp1 + \"倍\";\n        this.btnPlayerMtp2.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp2 + \"倍\";\n        this.btnPlayerMtp3.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp3 + \"倍\";\n        this.btnPlayerMtp4.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp4 + \"倍\";\n        this.btnBankerMtp1.node.acitve = false;\n        this.btnBankerMtp2.node.acitve = false;\n        this.btnBankerMtp4.node.acitve = false;\n        this.btnPlayerMtp1.node.active = false;\n        this.btnPlayerMtp2.node.active = false;\n        this.btnPlayerMtp3.node.active = false;\n        this.btnPlayerMtp4.node.active = false;\n\n        this.btnPlayerMtp1.node.multiples = mtp1;\n        this.btnPlayerMtp2.node.multiples = mtp2;\n        this.btnPlayerMtp3.node.multiples = mtp3;\n        this.btnPlayerMtp4.node.multiples = mtp4;\n\n        this.btnQiang.node.active = false;\n        this.btnBuqiang.node.active = false;\n        this.btnReady.node.active = false;\n        this.btnShow.node.active = false;\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            this.nodeOptions.active = true;\n\n            /*\n            banker_mode: 1,\n            1 = 自由抢庄     抢与不抢（没有倍数）都不抢或者都抢随机一个    选倍数（不是庄选）    开牌\n            2 = 明牌抢庄\n            3 = 转庄牛牛,牛牛上庄\n            4 = 通比牛牛\n            5 = 固定庄家 \n            */\n\n            const banker_mode = th.room.banker_mode;\n            const isZYQZ = banker_mode == 1;\n\n            let player = th.getMyselfPlayer();\n            //准备按钮\n            let isShowBtnReady =\n                (player.account_status == 0 || player.account_status == 1) &&\n                th.room.room_status == 1;\n            this.btnReady.node.active = isShowBtnReady;\n            //抢庄按钮\n            let isShowQiangBrank =\n                player.account_status == 3 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnBankerMtp1.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnBankerMtp2.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnBankerMtp4.node.active = isShowQiangBrank && !isZYQZ;\n            this.btnQiang.node.active = isShowQiangBrank && isZYQZ;\n            this.btnBuqiang.node.active = isShowQiangBrank;\n            //闲加倍数选择\n            let isShowSelectMultiples =\n                player.is_banker == 0 &&\n                player.account_status == 6 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnPlayerMtp1.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp2.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp3.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp4.node.active = isShowSelectMultiples;\n            //摊牌按钮\n            this.btnShow.node.active =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount <= 0;\n            let isShowClickLookPai =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount > 0;\n            this.spriteClickLookPai.node.active = isShowClickLookPai;\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            seat.seatIndex = i; //为座位编号\n            this.node.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n        }\n        const players = th.room.players;\n        for (var i = 0; i < players.length; ++i) {\n            this.initSingleSeat(players[i]);\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == 1 ? false : true\n        );\n        this.componentSeats[index].setBanker(\n            player.is_banker == 1 ? true : false\n        );\n        this.componentSeats[index].setScore(player.account_score);\n        this.componentSeats[index].setReady(player.account_status == 2);\n        if (player.account_status == 4) {\n            //不抢\n            this.componentSeats[index].setMultiples(\"n\");\n        } else if (player.account_status == 5) {\n            //抢庄\n            let mtp = player.multiples != 0 ? \"x\" + player.multiples : \"\";\n            this.componentSeats[index].setMultiples(\"y\" + mtp);\n        } else if (player.account_status == 6) {\n            //闲家倍数\n            if (player.is_banker == 1) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n        } else if (player.account_status == 7) {\n            //未摊牌\n            this.componentSeats[index].setMultiples(\n                player.is_banker == 1 ? null : \"x\" + player.multiples\n            );\n        } else {\n            this.componentSeats[index].setMultiples(null);\n        }\n    },\n    onBankerMultiplesClicked: function(targer, value) {\n        let multiples = 1;\n        if (Number(value) == 0) {\n            multiples = 1;\n            th.audioManager.playSFX(`robbanker.m4a`);\n        } else {\n            multiples = Number(value);\n            th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        }\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 1,\n                multiples: Number(value)\n            }\n        };\n        cc.log(\"===>>>[GrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBuqiangClicked: function() {\n        th.audioManager.playSFX(\"nobanker.m4a\");\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 0,\n                multiples: 1\n            }\n        };\n        cc.log(\"===>>>[NoGrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n        const params = {\n            operation: \"ReadyStart\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ReadyStart] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onPlayerMultiplesClicked: function(targer, value) {\n        let multiples = targer.target.multiples;\n        cc.log(targer);\n        cc.log(\"==============================multiples:\", targer.target);\n        cc.log(\n            \"==============================multiples:\",\n            targer.target.multiples\n        );\n        th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        const params = {\n            operation: \"PlayerMultiples\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[PlayerMultiples] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onShowClicked: function(targer) {\n        cc.log(\"onPlayerMultiplesClicked:\");\n        const params = {\n            operation: \"ShowCard\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ShowCard] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onChatClicked(targer) {\n        /*\n        this.node.getChildByName(\"Poker_Ghost\")\n        .runAction(cc.sequence(cc.rotateBy(0,0,-180),cc.rotateBy(0.5,0,90), cc.callFunc((targer)=>{\n            cc.log(\"换派\",targer);\n            targer.getChildByName(\"bg_back\").active=false;;\n        }),cc.rotateBy(0.5,0,90)) )\n         let poker = th.pokerManager.getPokerSpriteById(\"A1\");\n        this.node.getChildByName(\"Poker_Back\").addChild(poker);\n        this.node.addChild(th.pokerManager.getNiuSprite(4, 0));\n        this.setCountdown(10, \"TEST.....\");\n        */\n        cc.log(th.room);\n    },\n    onMoreClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙\");\n        seat.setReady(true);\n        seat.setOffline(true);\n        seat.setScore(\"-8888\");\n        seat.setUserName(\"我的名字\");\n        seat.setCountdown(10);\n    },\n    onThemeClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙伙右伙历伙\");\n        seat.setReady(false);\n        seat.setOffline(true);\n        seat.setScore(\"+8888\");\n        seat.setCountdown(0);\n    },\n    onLookClicked(targer) {},\n    onPokerClicked(targer, value) {\n        cc.log(\"Poker\", targer.target.pokerId, value);\n        let pokerId = targer.target.pokerId;\n        if (pokerId != -1) {\n            targer.target.runAction(\n                cc.sequence(\n                    cc.scaleTo(0.3, 0, 1),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(pokerId)\n                        );\n                    }),\n                    cc.scaleTo(0.3, 1, 1),\n                    cc.callFunc(traget => {\n                        traget.pokerId = -1;\n                    })\n                )\n            );\n            th.myself.needLookCount = th.myself.needLookCount - 1;\n            this.refreshOptions();\n        }\n    },\n    showPokers() {\n        //找到坐位上有人，且准备的发牌\n        let seatIndexs = [];\n        let players = [];\n        th.room.players.forEach(player => {\n            if (player.account_status) {\n                const index = th.getLocalIndex(player.serial_num - 1);\n                seatIndexs.push(index);\n                players.push(player);\n            }\n        });\n        let myLocalIndex = th.getMyselfLocalIndex();\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            let pokerIds = player.cards;\n            let isMyself = seatIndexs[i] == myLocalIndex;\n            if (player.account_status == 7) {\n                //没摊牌\n                if (isMyself) {\n                    pokerIds = new Array(5).fill(-1);\n                    pokerIds[0] = player.cards[0];\n                    pokerIds[1] = player.cards[1];\n                    pokerIds[2] = player.cards[2];\n                } else {\n                    pokerIds = new Array(5).fill(-1);\n                }\n            } else if (player.account_status == 8) {\n                //摊牌\n                pokerIds = player.cards;\n            } else {\n                //其他\n                pokerIds = new Array(5).fill(-1);\n            }\n            cc.log(\n                \"是自己：\" + isMyself,\n                player.nickname + \" 发牌：\",\n                pokerIds\n            );\n            let basePoker = this.nodePokers[seatIndexs[i]];\n            basePoker.removeAllChildren();\n            let readyPokersIds = player.cards;\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let pokerId = pokerIds[pi];\n                let readyPokerId = readyPokersIds[pi] || -1;\n                let poker = th.pokerManager.getPokerSpriteById(pokerId);\n                poker.pokerId = readyPokerId;\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePoker.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                if (pokerId == -1) {\n                    let clickEventHandler = new cc.Component.EventHandler();\n                    clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n                    clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n                    clickEventHandler.handler = \"onPokerClicked\";\n                    clickEventHandler.customEventData = readyPokerId;\n                    poker\n                        .getComponent(cc.Button)\n                        .clickEvents.push(clickEventHandler);\n                }\n                basePoker.addChild(poker);\n            }\n        }\n        //发牌效果\n        th.audioManager.playSFX(\"fapai.m4a\");\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < seatIndexs.length; j++) {\n                let seatIndex = seatIndexs[j];\n                let seat = this.nodeSeats[seatIndex];\n                let basePokers = this.nodePokers[seatIndex];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = seatIndex == myLocalIndex;\n                //cc.log(seatIndex, myLocalIndex, seatIndex == myLocalIndex);\n                ((poker, delay, x, y, isMyself) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                )\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * seatIndexs.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself\n                );\n            }\n        }\n\n        //如果玩家已经 摊牌，显示牛\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            if (player.account_status == 8) {\n                this.showNiuType(player);\n            }\n        }\n    },\n    setCountdown(val, content) {\n        let num = Number(val);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        if (content) {\n            this.nodeCountdown\n                .getChildByName(\"lbl_title\")\n                .getComponent(\"cc.Label\").string = content;\n        } else {\n            this.nodeCountdown.getChildByName(\"lbl_title\").node.active = false;\n        }\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n    }\n});\n"]}