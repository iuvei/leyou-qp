{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\GameNN.js"],"names":["cc","Class","extends","Component","properties","seatPrefab","Prefab","nodeSeats","Node","componentSeats","nodePokers","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnMtp1","Button","btnMtp2","btnMtp3","btnMtp4","btnBuqiang","btnReady","_countdownEndTime","_isPlay","onLoad","th","log","initEventHandlers","initView","onEnable","start","webSocketManager","dataEventHandler","node","on","player","initSingleSeat","active","initRoomInfo","initSeat","refreshOptions","intiPoker","pokers","i","length","poker","pokerManager","getPokerSpriteById","pokersNode","addChild","myself","isPlayer","getMyselfPlayer","showBtnReady","account_status","room","can_break","game_num","total_num","banker_mode","is_banker","acitve","showBtnMtp","string","base_score","seatsxy","getSeatXY","x","y","seat","instantiate","push","getComponent","getChildByName","players","index","getLocalIndex","serial_num","nickname","setInfo","account_id","account_score","headimgurl","sex","setOffline","online_status","setBanker","setScore","onReadyClicked","onMultiplesClicked","target","value","onBackClicked","targer","wc","show","director","loadScene","hide","onChatClicked","setCountdown","onMoreClicked","setChat","setReady","setUserName","onThemeClicked","onLookClicked","showPokers","pokerIds","basePokers","removeAllChildren","pi","scale","position","convertToNodeSpaceAR","v2","j","children","isMyself","delay","runAction","sequence","delayTime","spawn","moveTo","scaleTo","val","num","Number","Date","now","_alertStartTime","scheduleOnce","update","dt","miao","Math","ceil","audioManager","playSFX"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        seatPrefab: cc.Prefab,\n\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n        btnMtp1: cc.Button,\n        btnMtp2: cc.Button,\n        btnMtp3: cc.Button,\n        btnMtp4: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true //用来播放倒计时声音\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n\n        /*\n        const cvs = this.node.getComponent(cc.Canvas);\n        const {\n            width: designWidth,\n            height: designHeight\n        } = cc.view.getDesignResolutionSize();\n        const {\n            width: visibleWidth,\n            height: visibleHeight\n        } = cc.view.getFrameSize();\n        cc.log(visibleHeight / visibleWidth, designHeight / designWidth);\n        cc.log(visibleHeight / visibleWidth > designHeight / designWidth);\n        if (visibleHeight / visibleWidth > designHeight / designWidth) {\n            cvs.fitWidth = true;\n            cvs.fitHeight = false;\n            cc.log(\"等比拉伸宽度到全屏：FitWidth\");\n        } else if (visibleHeight / visibleWidth < designHeight / designWidth) {\n            cvs.fitWidth = false;\n            cvs.fitHeight = true;\n            cc.log(\"等比拉伸高度到全屏：FitHeight\");\n        } else {\n            cvs.fitWidth = true;\n            cvs.fitHeight = true;\n            cc.log(\"按比例放缩，全部展示不裁剪：ShowALl\");\n        }\n\n        this.label.string = cc.view.getFrameSize();\n\n        //cvs.fitHeight = true;\n        //cvs.fitWidth = true;\n        */\n        this.initEventHandlers();\n        this.initView();\n\n        //this.intiPoker();\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"CreateRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\");\n            this.initSingleSeat(player);\n        });\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.initRoomInfo();\n        this.initSeat();\n        this.refreshOptions();\n    },\n    intiPoker() {\n        let pokers = [\"A1\"];\n\n        for (let i = 0; i < pokers.length; i++) {\n            let poker = th.pokerManager.getPokerSpriteById(pokers[i]);\n            this.pokersNode.addChild(poker);\n        }\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            //准备按钮\n            let player = th.getMyselfPlayer();\n            let showBtnReady =\n                (player.account_status == 1 || player.account_status == 2) &&\n                th.room.can_break == 1 &&\n                th.room.game_num != th.room.total_num &&\n                th.room.banker_mode == 5 &&\n                player.is_banker == 1;\n            this.btnReady.node.acitve = showBtnReady;\n            //1倍\n            //2倍\n            //4倍\n            //不抢\n            let showBtnMtp = th.room.banker_mode == 2;\n            this.btnMtp1.node.acitve = showBtnMtp;\n            this.btnMtp2.node.acitve = showBtnMtp;\n            this.btnMtp3.node.acitve = showBtnMtp;\n            this.btnBuqiang.node.acitve = showBtnMtp;\n\n            cc.log(showBtnReady, showBtnMtp);\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            this.node.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n        }\n        const players = th.room.players;\n        for (var i = 0; i < players.length; ++i) {\n            this.initSingleSeat(players[i]);\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        cc.log(\n            `${\n                player.nickname\n            } local index = ${index}  serial_num=${player.serial_num - 1}`\n        );\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == \"1\" ? false : true\n        );\n        this.componentSeats[index].setBanker(\n            player.is_banker == \"1\" ? true : false\n        );\n        this.componentSeats[index].setScore(player.account_score);\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n    },\n    onMultiplesClicked: function(target, value) {\n        cc.log(\"onMultiplesClicked\");\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n\n    onChatClicked(targer) {\n        this.setCountdown(10);\n    },\n    onMoreClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙\");\n        seat.setReady(true);\n        seat.setOffline(true);\n        seat.setScore(\"-8888\");\n        seat.setUserName(\"我的名字\");\n        seat.setCountdown(10);\n    },\n    onThemeClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙伙右伙历伙\");\n        seat.setReady(false);\n        seat.setOffline(true);\n        seat.setScore(\"+8888\");\n        seat.setCountdown(0);\n    },\n    onLookClicked(targer) {},\n    showPokers(pokerIds) {\n        //let pokerIds = [\"-A9\", \"-A10\", \"-A11\", \"-A12\", \"-A13\"];\n        //生成牌\n        for (let i = 0; i < this.nodePokers.length; i++) {\n            let basePokers = this.nodePokers[i];\n            basePokers.removeAllChildren();\n\n            let pokers = [];\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let poker = th.pokerManager.getPokerSpriteById(pokerIds[pi]);\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePokers.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                basePokers.addChild(poker);\n                pokers.push(poker);\n            }\n        }\n        //发牌效果\n        for (let i = 0; i < pokerIds.length; i++) {\n            for (let j = 0; j < this.nodeSeats.length; j++) {\n                let seat = this.nodeSeats[j];\n                let basePokers = this.nodePokers[j];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = j == this.nodeSeats.length - 1;\n                ((poker, delay, x, y, isMyself) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                )\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * this.nodeSeats.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself\n                );\n            }\n        }\n    },\n    setCountdown(val) {\n        let num = Number(val);\n        cc.log(\"countdown num:\", num > 0);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n    }\n});\n"]}