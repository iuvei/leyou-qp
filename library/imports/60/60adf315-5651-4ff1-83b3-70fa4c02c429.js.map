{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Fangzuobi.js"],"names":["cc","Class","extends","Component","properties","nobind","Node","yesbind","lblId","Label","lblName","lblAnhao","lblLevel","headImg","Sprite","expBar","ProgressBar","inputAnhao","EditBox","_isLoadHeadImg","onLoad","th","node","active","show","x","y","myself","individuality","log","string","account_id","nickname","level","progress","parseFloat","exp","loader","load","url","headimgurl","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","onCloseClicked","targer","value","audioManager","playSFX","onSaveAanhaoClicked","length","params","operation","session","sign","data","ws","send","JSON","stringify","onEnable"],"mappings":"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","file":"Fangzuobi.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        nobind: cc.Node,\r\n        yesbind: cc.Node,\r\n\r\n        lblId: cc.Label,\r\n        lblName: cc.Label,\r\n        lblAnhao: cc.Label,\r\n        lblLevel: cc.Label,\r\n        headImg: cc.Sprite,\r\n        expBar: cc.ProgressBar,\r\n\r\n        inputAnhao: cc.EditBox,\r\n\r\n        _isLoadHeadImg: false\r\n    },\r\n\r\n    onLoad: function() {\r\n        if (th == null) {\r\n            return;\r\n        }\r\n        this.node.active = false;\r\n    },\r\n\r\n    // update: function (dt) {\r\n\r\n    // },\r\n    show() {\r\n        this.node.x = 0;\r\n        this.node.y = 0;\r\n        this.node.active = true;\r\n        if (th.myself.individuality == \"\" || th.myself.individuality == null) {\r\n            cc.log(\"没设置暗号\");\r\n            this.nobind.active = true;\r\n            this.yesbind.active = false;\r\n        } else {\r\n            cc.log(\"已设置暗号\");\r\n            this.nobind.active = false;\r\n            this.yesbind.active = true;\r\n\r\n            this.lblId.string = \"ID:\" + th.myself.account_id;\r\n            this.lblName.string = th.myself.nickname;\r\n            this.lblAnhao.string = th.myself.individuality;\r\n            this.lblLevel.string = th.myself.level + \"级\";\r\n            this.expBar.progress = parseFloat(th.myself.exp);\r\n            if (!this._isLoadHeadImg) {\r\n                cc.loader.load(\r\n                    { url: th.myself.headimgurl, type: \"jpg\" },\r\n                    (err, texture) => {\r\n                        if (!err) {\r\n                            this._isLoadHeadImg = true;\r\n                            cc.log(\r\n                                th.myself.nickname +\r\n                                    \" 下载头像成功：\" +\r\n                                    th.myself.headimgurl\r\n                            );\r\n                            let headSpriteFrame = new cc.SpriteFrame(\r\n                                texture,\r\n                                cc.Rect(0, 0, texture.width, texture.height)\r\n                            );\r\n                            th.myself.headSpriteFrame = headSpriteFrame;\r\n                            this.headImg.spriteFrame = headSpriteFrame;\r\n                            this.headImg.node.setScale(2 - texture.width / 105);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    },\r\n    onCloseClicked: function(targer, value) {\r\n        th.audioManager.playSFX(\"click.mp3\");\r\n        this.node.active = false;\r\n    },\r\n    onSaveAanhaoClicked: function() {\r\n        if (\r\n            this.inputAnhao.string == null ||\r\n            this.inputAnhao.string == \"\" ||\r\n            this.inputAnhao.string.length == 0\r\n        ) {\r\n            return;\r\n        }\r\n        const params = {\r\n            operation: \"setIndividuality\", //操作标志\r\n            account_id: th.myself.account_id, //用户id};\r\n            session: th.sign,\r\n            data: {\r\n                account_id: th.myself.account_id,\r\n                individuality: this.inputAnhao.string\r\n            }\r\n        };\r\n        cc.log(\"===>>>[setIndividuality] GameNN:\", params);\r\n        th.ws.send(JSON.stringify(params));\r\n        this.node.active = false;\r\n    },\r\n    onEnable: function() {}\r\n});\r\n"]}