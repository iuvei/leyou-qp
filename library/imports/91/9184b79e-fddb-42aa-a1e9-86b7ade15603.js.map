{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Seat.js"],"names":["cc","Class","extends","Component","properties","headImg","Sprite","lblName","Label","lblWinScore","lblLoseScore","offline","fangzhu","ready","banker","emoji","countdown","chat","btnNull","Button","userNode","Node","_userId","_userName","_headImgUrl","_sex","_score","_countdown","_isOffline","_isReady","_isFangzhu","_isbanker","_lastChatTime","_lastCountdownTime","onLoad","node","active","refresh","start","string","th","socketIOManager","status","setUserID","id","setUserName","name","setSex","sex","setHeadImgUrl","headImgUrl","self","headwho","loader","load","url","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","setScore","score","setFangzhu","isFangzhu","setReady","isReady","x","setBanker","isbanker","setOffline","isOffline","setChat","content","anchorX","getChildByName","getComponent","log","getContentSize","setQuickVoice","fileName","audioManager","playSFX","setEmoji","idx","textureCache","addImage","raw","setTexture","setInfo","setCountdown","Math","max","update","dt","fillRange"],"mappings":"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","file":"Seat.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        headImg: cc.Sprite,\r\n        //headwho: cc.Sprite,\r\n        lblName: cc.Label,\r\n        lblWinScore: cc.Label,\r\n        lblLoseScore: cc.Label,\r\n        offline: cc.Sprite,\r\n        fangzhu: cc.Sprite,\r\n        ready: cc.Sprite,\r\n        banker: cc.Sprite,\r\n        emoji: cc.Sprite,\r\n        countdown: cc.Sprite,\r\n        chat: cc.Label,\r\n        btnNull: cc.Button,\r\n        userNode: cc.Node,\r\n\r\n        _userId: null,\r\n        _userName: \"--\",\r\n        _headImgUrl: null,\r\n        _sex: 0,\r\n        _score: 0,\r\n        _countdown: 0,\r\n        _isOffline: false,\r\n        _isReady: false,\r\n        _isFangzhu: false,\r\n        _isbanker: false,\r\n        _lastChatTime: -1,\r\n        _lastCountdownTime: -1\r\n    },\r\n\r\n    onLoad() {\r\n        if (this.chat) {\r\n            this.chat.node.active = false;\r\n        }\r\n        if (this.emoji) {\r\n            this.emoji.node.active = false;\r\n        }\r\n        this.refresh();\r\n    },\r\n    start() {},\r\n\r\n    refresh: function() {\r\n        if (this._userName) {\r\n            this.lblName.string = this._userName;\r\n        }\r\n        if (this._score) {\r\n            if (this._score >= 0) {\r\n                this.lblWinScore.string = this._score;\r\n                this.lblWinScore.node.active = true;\r\n                this.lblLoseScore.node.active = false;\r\n            } else {\r\n                this.lblLoseScore.string = this._score;\r\n                this.lblLoseScore.node.active = true;\r\n                this.lblWinScore.node.active = false;\r\n            }\r\n        }\r\n        if (this.offline) {\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n\r\n        if (this.ready) {\r\n            this.ready.node.active =\r\n                this._isReady && th.socketIOManager.status == \"idle\";\r\n        }\r\n        if (this.fangzhu) {\r\n            this.fangzhu.node.active = this._isFangzhu;\r\n        }\r\n        if (this.banker) {\r\n            this.banker.node.active = this._isbanker;\r\n        }\r\n        if (this.countdown) {\r\n            this.countdown.node.active = this._countdown > 0 ? true : false;\r\n        }\r\n        if (this.btnNull) {\r\n            this.btnNull.node.active = this._userId ? false : true;\r\n        }\r\n        if (this.userNode) {\r\n            this.userNode.active = this._userId ? true : false;\r\n        }\r\n\r\n        //this.node.active = this._userId!=null;\r\n    },\r\n\r\n    setUserID: function(id) {\r\n        this._userId = id;\r\n    },\r\n\r\n    setUserName: function(name) {\r\n        this._userName = name;\r\n        if (this.lblName) {\r\n            this.lblName.string = this._userName;\r\n        }\r\n    },\r\n\r\n    setSex: function(sex) {\r\n        this._sex = sex;\r\n    },\r\n\r\n    setHeadImgUrl: function(headImgUrl) {\r\n        var self = this;\r\n        this._headImgUrl = headImgUrl;\r\n        if (this._headImgUrl && this.headImg) {\r\n            this.headwho.node.active = false;\r\n            this.headImg.node.active = true;\r\n            cc.loader.load({ url: this._headImgUrl, type: \"jpg\" }, function(\r\n                err,\r\n                texture\r\n            ) {\r\n                if (!err) {\r\n                    var headSpriteFrame = new cc.SpriteFrame(\r\n                        texture,\r\n                        cc.Rect(0, 0, texture.width, texture.height)\r\n                    );\r\n                    self.headImg.spriteFrame = headSpriteFrame;\r\n                    self.headImg.node.setScale(2 - texture.width / 94);\r\n                }\r\n            });\r\n        } else if (!this._headImgUrl && self.headImg) {\r\n            this.headwho.node.active = true;\r\n            this.headImg.node.active = false;\r\n        }\r\n    },\r\n\r\n    setScore: function(score) {\r\n        this._score = score;\r\n        if (this.lblLoseScore && this.lblWinScore) {\r\n            if (this._score >= 0) {\r\n                this.lblWinScore.string = this._score;\r\n                this.lblWinScore.node.active = true;\r\n                this.lblLoseScore.node.active = false;\r\n            } else {\r\n                this.lblLoseScore.string = this._score;\r\n                this.lblLoseScore.node.active = true;\r\n                this.lblWinScore.node.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    setFangzhu: function(isFangzhu) {\r\n        this._isFangzhu = isFangzhu;\r\n        if (this.fangzhu) {\r\n            this.fangzhu.node.active = this._isFangzhu;\r\n        }\r\n    },\r\n\r\n    setReady: function(isReady) {\r\n        this._isReady = isReady;\r\n        if (this.ready) {\r\n            let { x } = this.node;\r\n            this.ready.node.x = x > 0 ? -88 : 88;\r\n            this.ready.node.active = this._isReady; //&& th.socketIOManager.status == \"idle\";\r\n        }\r\n    },\r\n\r\n    setBanker: function(isbanker) {\r\n        this._isbanker = isbanker;\r\n        if (this.banker) {\r\n            this.banker.node.active = this._isbanker;\r\n        }\r\n    },\r\n\r\n    setOffline: function(isOffline) {\r\n        this._isOffline = isOffline;\r\n        if (this.offline) {\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n    },\r\n\r\n    setChat: function(content) {\r\n        if (this.chat) {\r\n            let { x } = this.node;\r\n            if (x > 0) {\r\n                this.chat.node.x = -75;\r\n                this.chat.node.anchorX = 1;\r\n                this.chat.node.getChildByName(\"lbl_msg\").anchorX = 1;\r\n                this.chat.node.getChildByName(\"bg_left\").active = false;\r\n                this.chat.node.getChildByName(\"bg_right\").active = true;\r\n            } else {\r\n                this.chat.node.x = 75;\r\n                this.chat.node.anchorX = 0;\r\n                this.chat.node.getChildByName(\"lbl_msg\").anchorX = 0;\r\n                this.chat.node.getChildByName(\"bg_left\").active = true;\r\n                this.chat.node.getChildByName(\"bg_right\").active = false;\r\n            }\r\n\r\n            this.emoji.node.active = false;\r\n            this.chat.node.active = true;\r\n            this.chat.getComponent(cc.Label).string = content;\r\n            cc.log(\"content:\", this.chat.node.getContentSize());\r\n            this.chat.node\r\n                .getChildByName(\"lbl_msg\")\r\n                .getComponent(cc.Label).string = content;\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n    setQuickVoice: function(fileName) {\r\n        if (this._sex == 1) {\r\n            th.audioManager.playSFX(\"chat/man/Speak/M_\" + fileName);\r\n        } else {\r\n            th.audioManager.playSFX(\"chat/women/Speak/W_\" + fileName);\r\n        }\r\n    },\r\n\r\n    setEmoji: function(idx) {\r\n        if (this.emoji) {\r\n            this.chat.node.active = false;\r\n            this.emoji.node.active = true;\r\n            var texture = cc.textureCache.addImage(\r\n                cc.url.raw(\"resources/images/emoji/emoji\" + idx + \".png\")\r\n            );\r\n            //cc.log(texture);\r\n            //cc.log(this.emoji.node.getComponent(cc.Sprite));\r\n            //cc.log(this.emoji.spriteFrame);\r\n            this.emoji.node\r\n                .getComponent(cc.Sprite)\r\n                .spriteFrame.setTexture(texture);\r\n            /*\r\n            cc.loader.loadRes(\"emoji\"+idx,cc.SpriteFrame,function (err,spriteFrame) {\r\n                this.emoji.node.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n            }.bind(this));\r\n            */\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n    setInfo: function(id, name, score, headImgUrl, sex) {\r\n        this.setUserID(id);\r\n        this._sex = sex;\r\n        if (id) {\r\n            this.setUserName(name);\r\n            this.setScore(score);\r\n            this.setHeadImgUrl(headImgUrl);\r\n        } else {\r\n            this.setUserName(\"--\");\r\n            this.setScore(\"--\");\r\n            this.setHeadImgUrl(null);\r\n        }\r\n    },\r\n\r\n    setCountdown: function(countdown) {\r\n        this._countdown = Math.max(0, countdown);\r\n        this._lastCountdownTime = this._countdown;\r\n        this.countdown.node.active = countdown > 0 ? true : false;\r\n    },\r\n\r\n    update: function(dt) {\r\n        if (this._lastChatTime > 0) {\r\n            this._lastChatTime -= dt;\r\n            if (this._lastChatTime < 0) {\r\n                this.chat.node.active = false;\r\n                this.emoji.node.active = false;\r\n            }\r\n        }\r\n        if (this._lastCountdownTime > 0) {\r\n            this._lastCountdownTime -= dt;\r\n            this.countdown.fillRange =\r\n                this._lastCountdownTime / this._countdown;\r\n            if (this._lastCountdownTime < 0) {\r\n                this._lastCountdownTime = 0;\r\n                this._countdown = 0;\r\n                this.countdown.active = false;\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}