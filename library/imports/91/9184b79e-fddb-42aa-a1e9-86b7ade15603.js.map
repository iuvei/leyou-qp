{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Seat.js"],"names":["cc","Class","extends","Component","properties","headImg","Sprite","lblName","Label","lblWinScore","lblLoseScore","offline","fangzhu","ready","banker","emoji","countdown","blink","chat","btnNull","Button","userNode","Node","multiples","nodePokers","animWinScore","animLoseScore","_userId","_userName","_headImgUrl","_headSpriteFrame","_sex","_score","_countdown","_isOffline","_isReady","_isFangzhu","_isbanker","_lastChatTime","_lastCountdownTime","_multiples","onLoad","node","active","refresh","start","string","th","socketIOManager","status","setUserID","id","setUserName","name","setSex","sex","setHeadImgUrl","headImgUrl","loader","load","url","type","err","texture","log","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","setScoreAnim","score","diff","Number","anim","y","scale","runAction","sequence","fadeIn","spawn","moveBy","v2","scaleTo","fadeOut","callFunc","setScore","setFangzhu","isFangzhu","setReady","isReady","x","setBanker","isbanker","scaleX","scaleY","stopAllActions","scheduleOnce","setOffline","isOffline","setChat","content","anchorX","getChildByName","getComponent","setMultiples","setQuickVoice","idx","audioManager","playSFX","setEmoji","play","setInfo","setCountdown","Math","max","doBlink","target","update","dt","fillRange"],"mappings":"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","file":"Seat.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        headImg: cc.Sprite,\r\n        //headwho: cc.Sprite,\r\n        lblName: cc.Label,\r\n        lblWinScore: cc.Label,\r\n        lblLoseScore: cc.Label,\r\n        offline: cc.Sprite,\r\n        fangzhu: cc.Sprite,\r\n        ready: cc.Sprite,\r\n        banker: cc.Sprite,\r\n        emoji: cc.Sprite,\r\n        countdown: cc.Sprite,\r\n        blink: cc.Sprite,\r\n        chat: cc.Label,\r\n        btnNull: cc.Button,\r\n        userNode: cc.Node,\r\n        multiples: cc.Label,\r\n\r\n        nodePokers: cc.Node,\r\n\r\n        animWinScore: cc.Label,\r\n        animLoseScore: cc.Label,\r\n\r\n        _userId: null,\r\n        _userName: \"--\",\r\n        _headImgUrl: null,\r\n        _headSpriteFrame: null,\r\n        _sex: 0,\r\n        _score: 0,\r\n        _countdown: 0,\r\n        _isOffline: false,\r\n        _isReady: false,\r\n        _isFangzhu: false,\r\n        _isbanker: false,\r\n        _lastChatTime: -1,\r\n        _lastCountdownTime: -1,\r\n        _multiples: null\r\n    },\r\n\r\n    onLoad() {\r\n        if (this.chat) {\r\n            this.chat.node.active = false;\r\n        }\r\n        if (this.emoji) {\r\n            this.emoji.node.active = false;\r\n        }\r\n        if (this.blink) {\r\n            this.blink.node.active = false;\r\n        }\r\n        if (this.animWinScore) {\r\n            this.animWinScore.node.active = false;\r\n        }\r\n        if (this.animLoseScore) {\r\n            this.animLoseScore.node.active = false;\r\n        }\r\n        if (this.multiples) {\r\n            this.multiples.node.active = false;\r\n        }\r\n        this.refresh();\r\n    },\r\n    start() {},\r\n\r\n    refresh: function() {\r\n        if (this._userName) {\r\n            this.lblName.string = this._userName;\r\n        }\r\n        if (this._score) {\r\n            if (this._score >= 0) {\r\n                this.lblWinScore.string = this._score;\r\n                this.lblWinScore.node.active = true;\r\n                this.lblLoseScore.node.active = false;\r\n            } else {\r\n                this.lblLoseScore.string = this._score;\r\n                this.lblLoseScore.node.active = true;\r\n                this.lblWinScore.node.active = false;\r\n            }\r\n        }\r\n        if (this.offline) {\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n\r\n        if (this.ready) {\r\n            this.ready.node.active =\r\n                this._isReady && th.socketIOManager.status == \"idle\";\r\n        }\r\n        if (this.fangzhu) {\r\n            this.fangzhu.node.active = this._isFangzhu;\r\n        }\r\n        if (this.banker) {\r\n            this.banker.node.active = this._isbanker;\r\n        }\r\n        if (this.countdown) {\r\n            this.countdown.node.active = this._countdown > 0 ? true : false;\r\n        }\r\n        if (this.btnNull) {\r\n            this.btnNull.node.active = this._userId ? false : true;\r\n        }\r\n        if (this.userNode) {\r\n            this.userNode.active = this._userId ? true : false;\r\n        }\r\n\r\n        //this.node.active = this._userId!=null;\r\n    },\r\n\r\n    setUserID: function(id) {\r\n        this._userId = id;\r\n    },\r\n\r\n    setUserName: function(name) {\r\n        this._userName = name;\r\n        if (this.lblName) {\r\n            this.lblName.string = this._userName;\r\n        }\r\n    },\r\n\r\n    setSex: function(sex) {\r\n        this._sex = sex;\r\n    },\r\n\r\n    setHeadImgUrl: function(headImgUrl) {\r\n        this._headImgUrl = headImgUrl;\r\n        if (this._headImgUrl && this.headImg) {\r\n            //this.headwho.node.active = false;\r\n            this.headImg.node.active = true;\r\n            if (!this._headSpriteFrame) {\r\n                cc.loader.load(\r\n                    { url: this._headImgUrl, type: \"jpg\" },\r\n                    (err, texture) => {\r\n                        if (!err) {\r\n                            cc.log(\r\n                                this._userName + \" 下载头像成功：\" + headImgUrl\r\n                            );\r\n                            let headSpriteFrame = new cc.SpriteFrame(\r\n                                texture,\r\n                                cc.Rect(0, 0, texture.width, texture.height)\r\n                            );\r\n                            this._headSpriteFrame = headSpriteFrame;\r\n                            this.headImg.spriteFrame = headSpriteFrame;\r\n                            this.headImg.node.setScale(2 - texture.width / 105);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        } else if (!this._headImgUrl && this.headImg) {\r\n            //this.headwho.node.active = true;\r\n            this.headImg.node.active = false;\r\n            this._headSpriteFrame = null;\r\n        }\r\n    },\r\n    setScoreAnim: function(score) {\r\n        let diff = Number(score) - this._score;\r\n        if (diff == 0) return;\r\n        let anim = diff >= 0 ? this.animWinScore : this.animLoseScore;\r\n        anim.string = diff >= 0 ? \"+\" + diff : diff;\r\n        anim.node.active = true;\r\n        anim.node.y = 0;\r\n        anim.node.scale = 0.5;\r\n        anim.node.runAction(\r\n            cc.sequence(\r\n                cc.fadeIn(0),\r\n                cc.spawn(cc.moveBy(1, cc.v2(0, 100)), cc.scaleTo(1, 2.5)),\r\n                cc.fadeOut(0),\r\n                cc.callFunc(() => {\r\n                    this.setScore(score);\r\n                })\r\n            )\r\n        );\r\n        this._score = Number(score);\r\n    },\r\n    setScore: function(score) {\r\n        if (this.lblLoseScore && this.lblWinScore) {\r\n            this._score = Number(score);\r\n            if (this._score >= 0) {\r\n                this.lblWinScore.string = this._score;\r\n                this.lblWinScore.node.active = true;\r\n                this.lblLoseScore.node.active = false;\r\n            } else {\r\n                this.lblLoseScore.string = this._score;\r\n                this.lblLoseScore.node.active = true;\r\n                this.lblWinScore.node.active = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    setFangzhu: function(isFangzhu) {\r\n        this._isFangzhu = isFangzhu;\r\n        if (this.fangzhu) {\r\n            this.fangzhu.node.active = this._isFangzhu;\r\n        }\r\n    },\r\n\r\n    setReady: function(isReady) {\r\n        //cc.log(\"read:\",this.node.seatIndex )\r\n        this._isReady = isReady;\r\n        if (this.ready) {\r\n            let { x } = this.node;\r\n            this.ready.node.x = x > 0 ? -100 : 100;\r\n            if (this._isReady == true) {\r\n                this.ready.node.scale = 0.1;\r\n                this.ready.node.active = true;\r\n                this.ready.node.runAction(cc.scaleTo(0.3, 1.3));\r\n            } else {\r\n                this.ready.node.active = false; //&& th.socketIOManager.status == \"idle\";\r\n            }\r\n        }\r\n    },\r\n\r\n    setBanker: function(isbanker) {\r\n        cc.log(\r\n            `name: ${this._userName} , this._isbanker:${\r\n                this._isbanker\r\n            } , isbanker:${isbanker} , result:${this._isbanker != isbanker}`\r\n        );\r\n        if (this._isbanker != isbanker) {\r\n            if (isbanker) {\r\n                this.blink.node.active = true;\r\n                this.blink.node.scaleX = 1;\r\n                this.blink.node.scaleY = 0.9;\r\n                this.blink.node.stopAllActions();\r\n                this.blink.node.runAction(\r\n                    cc.sequence(\r\n                        cc.fadeIn(0),\r\n                        cc.spawn(cc.scaleTo(0.5, 1.3), cc.fadeOut(0.5))\r\n                    )\r\n                );\r\n                this.scheduleOnce(() => {\r\n                    this.banker.node.active = true;\r\n                    this.banker.node.scale = 0.1;\r\n                    this.banker.node.runAction(cc.scaleTo(0.3, 1));\r\n                }, 0.5);\r\n            } else {\r\n                this.banker.node.scale = 1;\r\n                this.banker.node.active = false;\r\n            }\r\n        }\r\n        this._isbanker = isbanker;\r\n    },\r\n\r\n    setOffline: function(isOffline) {\r\n        this._isOffline = isOffline;\r\n        if (this.offline) {\r\n            this.offline.node.active = this._isOffline && this._userId != null;\r\n        }\r\n    },\r\n\r\n    setChat: function(content) {\r\n        if (this.chat) {\r\n            let { x } = this.node;\r\n            if (x > 0) {\r\n                this.chat.node.x = -75;\r\n                this.chat.node.anchorX = 1;\r\n                this.chat.node.getChildByName(\"lbl_msg\").anchorX = 1;\r\n                this.chat.node.getChildByName(\"bg_left\").active = false;\r\n                this.chat.node.getChildByName(\"bg_right\").active = true;\r\n            } else {\r\n                this.chat.node.x = 75;\r\n                this.chat.node.anchorX = 0;\r\n                this.chat.node.getChildByName(\"lbl_msg\").anchorX = 0;\r\n                this.chat.node.getChildByName(\"bg_left\").active = true;\r\n                this.chat.node.getChildByName(\"bg_right\").active = false;\r\n            }\r\n\r\n            this.emoji.node.active = false;\r\n            this.chat.node.active = true;\r\n            this.chat.getComponent(cc.Label).string = content;\r\n            this.chat.node\r\n                .getChildByName(\"lbl_msg\")\r\n                .getComponent(cc.Label).string = content;\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n    setMultiples: function(content) {\r\n        if (this._multiples == content) {\r\n            return;\r\n        }\r\n        if (!content) {\r\n            this.multiples.getComponent(cc.Label).string = \"\";\r\n            this.multiples.node.active = false;\r\n            return;\r\n        }\r\n        cc.log(`${this._userName}, multiples: ${content}`);\r\n        this._multiples = content;\r\n        this.multiples.node.active = true;\r\n        if (this.multiples) {\r\n            let { x } = this.node;\r\n            if (x > 0) {\r\n                this.multiples.node.x = -100;\r\n                this.multiples.node.anchorX = 1;\r\n            } else {\r\n                this.multiples.node.x = 100;\r\n                this.multiples.node.anchorX = 0;\r\n            }\r\n            this.multiples.getComponent(cc.Label).string = content;\r\n            this.multiples.node.scale = 0.1;\r\n            this.multiples.node.active = true;\r\n            this.multiples.node.runAction(cc.scaleTo(0.3, 1.3));\r\n        }\r\n    },\r\n\r\n    setQuickVoice: function(idx) {\r\n        if (this._sex == 1) {\r\n            th.audioManager.playSFX(\"qc/qc\" + idx);\r\n        } else {\r\n            th.audioManager.playSFX(\"qc/qc\" + idx);\r\n        }\r\n    },\r\n\r\n    setEmoji: function(idx) {\r\n        if (this.emoji) {\r\n            this.emoji.node.active = true;\r\n\r\n            this.emoji.getComponent(\"cc.Animation\").play(\"emoji\" + idx, () => {\r\n                this.emoji.node.active = false;\r\n            });\r\n            this._lastChatTime = 3;\r\n        }\r\n    },\r\n\r\n    setInfo: function(id, name, score, headImgUrl, sex) {\r\n        this.setUserID(id);\r\n        this._sex = sex;\r\n        if (id) {\r\n            this.setUserName(name);\r\n            this.setScore(score);\r\n            this.setHeadImgUrl(headImgUrl);\r\n            this.userNode.active = true;\r\n            this.btnNull.node.active = false;\r\n        } else {\r\n            this.setUserName(\"--\");\r\n            this.setScore(\"--\");\r\n            this.setHeadImgUrl(null);\r\n            this.userNode.active = false;\r\n            this.btnNull.node.active = true;\r\n        }\r\n    },\r\n\r\n    setCountdown: function(countdown) {\r\n        this._countdown = Math.max(0, countdown);\r\n        this._lastCountdownTime = this._countdown;\r\n        this.countdown.node.active = countdown > 0 ? true : false;\r\n    },\r\n\r\n    doBlink: function() {\r\n        this.blink.node.active = true;\r\n        this.blink.node.scaleX = 1;\r\n        this.blink.node.scaleY = 0.9;\r\n        this.blink.node.runAction(\r\n            cc.sequence(\r\n                cc.blink(0.5, 2),\r\n                cc.callFunc(target => {\r\n                    target.active = false;\r\n                })\r\n            )\r\n        );\r\n    },\r\n\r\n    update: function(dt) {\r\n        if (this._lastChatTime > 0) {\r\n            this._lastChatTime -= dt;\r\n            if (this._lastChatTime < 0) {\r\n                this.chat.node.active = false;\r\n                this.emoji.node.active = false;\r\n            }\r\n        }\r\n        if (this._lastCountdownTime > 0) {\r\n            this._lastCountdownTime -= dt;\r\n            this.countdown.fillRange =\r\n                this._lastCountdownTime / this._countdown;\r\n            if (this._lastCountdownTime < 0) {\r\n                this._lastCountdownTime = 0;\r\n                this._countdown = 0;\r\n                this.countdown.active = false;\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}