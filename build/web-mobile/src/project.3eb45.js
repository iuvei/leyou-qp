window.__require=function e(t,n,o){function c(a,s){if(!n[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+a+"'")}}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){return c(t[a][1][e]||e)},h,h.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)c(o[a]);return c}({Alert:[function(e,t,n){"use strict";cc._RF.push(t,"92b221INIJJb5nBIGItKv1h","Alert"),cc.Class({extends:cc.Component,properties:{btnConfirm:cc.Button,btnCancel:cc.Button,title:cc.Label,content:cc.Label,_fnConfirm:null},onLoad:function(){if(cc.log("Alert====>onload"),null==th)return null;th.alert=this,this.node.active=!1,this._fnConfirm=null},show:function(e,t,n,o){cc.log("showBtnCancel:"+o),this.node&&(this.node.active=!0),this.title&&(this.title.string=e||""),this.content&&(this.content.string=t||""),this._fnConfirm=n,o?(this.btnCancel.node.active=!0,this.btnCancel.node.x=100,this.btnConfirm.node.x=-100):(this.btnCancel.node.active=!1,this.btnConfirm.node.x=0)},onCancelClicked:function(){th.audioManager.playSFX("click.mp3"),this.node.active=!1},onConfirmClicked:function(){th.audioManager.playSFX("click.mp3"),this.node.active=!1,this._fnConfirm&&this._fnConfirm()},hide:function(){this.node&&(this.node.active=!1)},onDestory:function(){th&&(th.alert=null)}}),cc._RF.pop()},{}],AppStart:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","AppStart"),cc.Class({extends:cc.Component,properties:{lblLoadingMsg:cc.Label,_index:null,_scheduleId:null},onLoad:function(){this._index=0,null!=th&&this.initEventHandlers()},initEventHandlers:function(){cc.log("AppStart initEventHandlers()"),th.webSocketManager.dataEventHandler=this.node},start:function(){var e=this;th.webSocketManager.connectGameServer({ip:"47.96.177.207",port:1e4,namespace:"api"},function(){e.unschedule(e._scheduleId),th.wc.show("\u6b63\u5728\u83b7\u53d6TOKEN...");var t={operation:"getToken",data:{code:th.args.code}};cc.log("===>>>[getToken] WebSocketManager:",t),th.ws.send(JSON.stringify(t))}),this._scheduleId=this.schedule(function(){var t=e._index%6,n="".padStart(t+1,".");++e._index,e.lblLoadingMsg.string="\u6b63\u5728\u8fde\u63a5\u670d\u52a1\u5668"+n},.25)},onDestroy:function(){cc.log("Appstart onDestroy"),this.unschedule(this._scheduleId)},update:function(e){}}),cc._RF.pop()},{}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"49eabkSZJVCNYmReqIl35Mp","AudioManager"),cc.Class({extends:cc.Component,properties:{bgmVolume:.5,sfxVolume:.5,bgmAudioID:-1,sfxAudioID:-1,_pauseBgm:!0},onLoad:function(){cc.log("AudioManager OnLoad.....")},init:function(){var e=cc.sys.localStorage.getItem("bgmVolume");e?this.bgmVolume=parseFloat(e):cc.sys.localStorage.setItem("bgmVolume",this.bgmVolume);var t=cc.sys.localStorage.getItem("sfxVolume");t?this.sfxVolume=parseFloat(t):cc.sys.localStorage.setItem("sfxVolume",this.sfxVolume),cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(e){var t=e.lastIndexOf(".");return"sounds/"+(t>-1?e.substr(0,t):e)},playBGM:function(e){var t=this,n=this.getUrl(e);this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this._pauseBgm=!0,cc.loader.loadRes(n,cc.AudioClip,function(e,n){e||(t.bgmAudioID=cc.audioEngine.play(n,!0,t.bgmVolume))})},playSFX:function(e){var t=this,n=this.getUrl(e);this.sfxVolume>0&&cc.loader.loadRes(n,cc.AudioClip,function(e,n){e||(t.sfxAudioID=cc.audioEngine.play(n,!1,t.sfxVolume))})},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e){this.bgmAudioID>=0&&(this._pauseBgm&&e>0?(this._pauseBgm=!1,cc.audioEngine.resume(this.bgmAudioID)):this._pauseBgm||0!=e||(this._pauseBgm=!0,cc.audioEngine.pause(this.bgmAudioID))),this.bgmVolume!=e&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],CreateNN:[function(e,t,n){"use strict";cc._RF.push(t,"f9be6OCtzFFjb+Jw0VMXcmZ","CreateNN");var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,c=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(c)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();cc.Class({extends:cc.Component,properties:{mode:cc.Node,ghost:cc.Node,ghostLine:cc.Sprite,bankScore:cc.Node,bankScoreLine:cc.Sprite,people:cc.Node,peopleLine:cc.Sprite,dropdown:cc.Node,dropdownContent:cc.Node,dropdownPrefab:cc.Prefab,lblTicketRemark1:cc.Label,lblTicketRemark2:cc.Label,createFrom:null},onLoad:function(){null!=th&&(this.dropdown.active=!1,this.showGhost(!1),this.showBankScore(!1),this.createFrom={banker_mode:1,theme:1,score_type:1,is_laizi:0,max_count_type:1,rule_type:1,is_cardfour:1,is_cardfourtiny:1,is_cardfive:1,is_straight:1,is_flush:1,is_calabash:1,is_cardbomb:1,is_sequence:1,is_cardtiny:1,banker_score_type:1,bet_type:1,ready_time:3,grab_time:5,bet_time:5,show_time:3,ticket_type:1,auto:0},this.initEventHandlers())},initEventHandlers:function(){cc.log("CreateNN initEventHandlers()"),this.node.on("game_connect_success",function(){cc.log("<<<===[game_connect_success] CreateNN")})},show:function(e){switch(cc.log("CreateNN:",e),cc.log("createFrom:",this.createFrom),e){case"jdnn":this.createFrom.is_laizi=0,this.createFrom.max_count_type=1,this.showPeoples(!0,6,3),this.showGhost(!1);break;case"12rnn":this.createFrom.is_laizi=0,this.createFrom.max_count_type=4,this.showPeoples(!1,12,5),this.showGhost(!1);break;case"13rnn":this.createFrom.is_laizi=0,this.createFrom.max_count_type=5,this.showPeoples(!1,13,5),this.showGhost(!1);break;case"lznn":this.createFrom.is_laizi=2,this.createFrom.max_count_type=1,this.showPeoples(!0,6,5),this.showGhost(!0),this.showMode(2)}this.node.active=!0},showGhost:function(e){this.ghost.active=e,this.ghostLine.node.active=e},showBankScore:function(e){this.bankScore.active=e,this.bankScoreLine.node.active=e},showPeoples:function(e,t,n){this.people.active=e,this.peopleLine.node.active=e,this.people.getChildByName("toggle").getComponent("cc.ToggleContainer").allowSwitchOff=!0,this.people.getChildByName("toggle").children.forEach(function(e,o){e.active=o<n,e.name==="btn_"+t+"ren"?e.getComponent("cc.Toggle").check():e.getComponent("cc.Toggle").uncheck()}),this.people.getChildByName("toggle").getComponent("cc.ToggleContainer").allowSwitchOff=!1},showMode:function(e){this.mode.getComponent("cc.ToggleContainer").allowSwitchOff=!0,this.mode.children.forEach(function(t,n){t.active=n<e,0===n?t.getComponent("cc.Toggle").check():t.getComponent("cc.Toggle").uncheck()}),this.mode.getComponent("cc.ToggleContainer").allowSwitchOff=!1},onBankerModeGroupClicked:function(e,t){th.audioManager.playSFX("click.mp3")},onBankerModeClicked:function(e,t){if(e.isChecked)switch(t){case"mpqz":this.createFrom.banker_mode=2,this.showBankScore(!1);break;case"zjqz":this.createFrom.banker_mode=1,this.showBankScore(!1);break;case"zznn":this.createFrom.banker_mode=3,this.showBankScore(!1);break;case"tbnn":this.createFrom.banker_mode=4,this.showBankScore(!1);break;case"gdzj":this.createFrom.banker_mode=5,this.showBankScore(!0)}},onThemeClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom.theme=Number(t)},onDifengClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom.score_type=Number(t)},onGhostClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom.is_laizi=Number(t)},onPeopleGrouplicked:function(e,t){th.audioManager.playSFX("click.mp3")},onPeopleClicked:function(e,t){if(e.isChecked){var n=Number(t);this.createFrom.max_count_type=n,1==n?(this.lblTicketRemark1.string="10\u5c40X1\u623f\u5361",this.lblTicketRemark2.string="20\u5c40X2\u623f\u5361"):2==n||3==n?(this.lblTicketRemark1.string="10\u5c40X2\u623f\u5361",this.lblTicketRemark2.string="20\u5c40X4\u623f\u5361"):4!=n&&5!=n||(this.lblTicketRemark1.string="10\u5c40X3\u623f\u5361",this.lblTicketRemark2.string="20\u5c40X6\u623f\u5361")}},onRuleClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom.rule_type=Number(t)},onPaixingClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom[t]=e.isChecked?1:0},onBankScoreClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom.banker_score_type=Number(t)},onBetTypeClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom.bet_type=Number(t)},onShijianClicked:function(e){cc.log("onCreateClicked:",this.createFrom)},onFangkaClicked:function(e,t){th.audioManager.playSFX("click.mp3"),this.createFrom.ticket_type=Number(t)},onAutoClicked:function(e,t){th.audioManager.playSFX("click.mp3"),cc.log("onAutoClicked:",e.isChecked),this.createFrom.auto=e.isChecked?1:0},onShowDropDown:function(e,t){this.dropdownContent.removeAllChildren(),this.dropdownContent.target=e.target,this.dropdownContent.type=t;var n=[0,0],c="\u79d2";switch(t){case"score_type":n=[6,100],c="\u5206";break;case"ready_time":n=[3,6];break;case"grab_time":case"bet_time":n=[5,10];break;case"show_time":n=[3,6]}this.dropdownContent.suffix=c;for(var i=o(n,2),a=i[0],s=i[1],r=a;r<=s;r++){var l=cc.instantiate(this.dropdownPrefab);l.val=r,l.getChildByName("lbl_remark").getComponent("cc.Label").string=""+r+c,r===a?l.getComponent("cc.Toggle").check():l.getComponent("cc.Toggle").uncheck(),this.dropdownContent.addChild(l)}this.dropdown.active=!0},onDropDownClicked:function(e,t){switch(this.dropdownContent.target.getChildByName("lbl_value").getComponent("cc.Label").string=""+e.target.val+this.dropdownContent.suffix,this.dropdownContent.type){case"score_type":this.createFrom.score_type=e.target.val;break;case"ready_time":this.createFrom.ready_time=e.target.val;break;case"grab_time":this.createFrom.grab_time=e.target.val;break;case"bet_time":this.createFrom.bet_time=e.target.val;break;case"show_time":this.createFrom.show_time=e.target.val}this.dropdown.active=!1},onDropDownCloseClicked:function(e,t){this.dropdown.active=!1},onCloseClicked:function(e){this.node.active=!1},randomString:function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length,o="",c=0;c<e;c++)o+=t.charAt(Math.floor(Math.random()*n));return o},onCreateClicked:function(e){var t=this;cc.log("onCreateClicked:",this.createFrom),th.webSocketManager.connectGameServer({ip:"47.96.177.207",port:1e4,namespace:"gamebdn"},function(){th.wc.show("\u6b63\u5728\u521b\u5efa\u623f\u95f4...");var e=Object.assign({},t.createFrom);e.data_key=Date.parse(new Date)+t.randomString(5);var n={operation:"CreateRoom",account_id:th.myself.account_id,session:th.sign,data:e};Object.assign(th.room,e),cc.log("===>>>[CreateRoom] CreateNN:",n),th.ws.send(JSON.stringify(n))})}}),cc._RF.pop()},{}],CreateZJH:[function(e,t,n){"use strict";cc._RF.push(t,"69681YtmUFJCYNJqaYi8v2w","CreateZJH"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){th},show:function(e){cc.log("CreateZJH:",e),this.node.active=!0},onCloseClicked:function(e){this.node.active=!1},onCreateClicked:function(e){var t=this;cc.log("onCreateClicked:",this.createFrom),th.webSocketManager.connectGameServer({ip:"47.96.177.207",port:1e4,namespace:"gamezjh"},function(){th.wc.show("\u6b63\u5728\u521b\u5efa\u623f\u95f4...");var e=Object.assign({},t.createFrom);e.data_key=Date.parse(new Date)+t.randomString(5);var n={operation:"CreateRoom",account_id:th.myself.account_id,session:th.sign,data:e};Object.assign(th.room,e),cc.log("===>>>[CreateRoom] CreateNN:",n),th.ws.send(JSON.stringify(n))})},start:function(){}}),cc._RF.pop()},{}],GameNN:[function(e,t,n){"use strict";cc._RF.push(t,"a6e34fDC+BAcpoXQQTJsDLe","GameNN");var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,c=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(c)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();cc.Class({extends:cc.Component,properties:{seatPrefab:cc.Prefab,baseNode:cc.Node,nodeSeats:[cc.Node],componentSeats:[cc.Component],nodePokers:[cc.Node],nodeAmins:cc.Node,nodeOptions:cc.Node,nodeCountdown:cc.Node,lblCountdown:cc.Label,lblRoomInfo:cc.Label,btnBankerMtp1:cc.Button,btnBankerMtp2:cc.Button,btnBankerMtp4:cc.Button,btnPlayerMtp1:cc.Button,btnPlayerMtp2:cc.Button,btnPlayerMtp3:cc.Button,btnPlayerMtp4:cc.Button,btnQiang:cc.Button,btnBuqiang:cc.Button,btnReady:cc.Button,btnShow:cc.Button,sprWaitBet:cc.Sprite,sprPlayerBet:cc.Sprite,sprQiangzhuang:cc.Sprite,sprReady:cc.Sprite,sprWaitPlayerBet:cc.Sprite,sprWaitShow:cc.Sprite,sprWaitNext:cc.Sprite,spriteClickLookPai:cc.Sprite,coinPrefab:cc.Prefab,resultNode:cc.Node,resultDeatilNode:cc.Node,resultItemPrefab:cc.Prefab,resultDetailItemPrefab:cc.Prefab,resultDetailSonItemPrefab:cc.Prefab,btnCaptureScreen:cc.Button,btnTest:cc.Button,holdTimeEclipse:0,holdClick:!1,_countdownEndTime:0,_isPlay:!0},onLoad:function(){var e=this;null!=th&&(cc.log("GameNN onLoad"),this.initEventHandlers(),this.initView(),this.btnCaptureScreen.node.on("touchstart",function(t){e.holdClick=!0,e.holdTimeEclipse=0}),this.btnCaptureScreen.node.on("touchend",function(t){e.holdClick=!1,e.holdTimeEclipse>=30&&e.node.emit("captureScreenLongClicked"),e.holdTimeEclipse=0}),this.node.on("captureScreenLongClicked",function(t){e.onChanganbaocunClicked()}))},onEnable:function(){cc.log("GameNN onEnable")},start:function(){cc.log("GameNN start")},initEventHandlers:function(){var e=this;cc.log("GameNN initEventHandlers()"),th.webSocketManager.dataEventHandler=this.node,this.node.on("CreateRoom",function(){cc.log("<<<===[JoinRoom] GmaeNN")}),this.node.on("GuestRoom",function(){cc.log("<<<===[GuestRoom] GmaeNN")}),this.node.on("AllGamerInfo",function(){cc.log("<<<===[AllGamerInfo] GmaeNN")}),this.node.on("AllGuestInfo",function(){cc.log("<<<===[AllGuestInfo] GmaeNN")}),this.node.on("UpdateGamerInfo",function(t){cc.log("<<<===[UpdateGamerInfo] GmaeNN:",t),e.initSingleSeat(t)}),this.node.on("UpdateGuestInfo",function(){cc.log("<<<===[UpdateGuestInfo] GmaeNN")}),this.node.on("UpdateAccountStatus",function(t){cc.log("<<<===[UpdateAccountStatus] GmaeNN",t),e.initSingleSeat(t),t.account_id==th.myself.account_id&&(e.refreshOptions(),e.initSingleSeat(t))}),this.node.on("GameStart",function(t){cc.log("<<<===[GameStart] GmaeNN",t),e.initRoomInfo(),e.setCountdown(t.limit_time,"\u6e38\u620f\u5f00\u59cb\u4e86"),e.refreshOptions()}),this.node.on("MyCards",function(t){cc.log("<<<===[MyCards] GmaeNN",t),e.showPokers(),e.refreshOptions()}),this.node.on("StartBet",function(t){cc.log("<<<===[StartBet] GmaeNN:",t),e.setCountdown(t.limit_time,"\u6295\u6ce8\u5f00\u59cb\u4e86"),t.data.forEach(function(t){var n=th.getPlayerById(t.account_id);e.initSingleSeat(n)}),cc.log("TODO\u62a2\u5e84\u6548\u679c",t.grab_array),t.grab_array.forEach(function(t,n){e.scheduleOnce(function(){var n=th.getPlayerById(t),o=th.getLocalIndex(n.serial_num-1);e.componentSeats[o].doBlink()},.5*n)}),cc.log("\u62a2\u5e84\u4eba\u6570"+t.grab_array.length+" \u603b\u7528\u65f6\uff1a"+.5*t.grab_array.length),e.scheduleOnce(function(){t.data.forEach(function(t){var n=th.getPlayerById(t.account_id);e.initSingleSeat(n)});var n=th.getBankerPlayer(),o=th.getLocalIndex(n.serial_num-1);cc.log("\u5e84 "+n.nickname+" player.serial_num:"+n.serial_num+", index: "+o),e.componentSeats[o].setBanker(!0)},.5*t.grab_array.length);var n=.5*t.grab_array.length+1;cc.log("\u663e\u793a\u500d\u6570\u6309\u94ae\u5ef6\u65f6\uff1a"+n),e.scheduleOnce(function(){e.refreshOptions()},n)}),this.node.on("UpdateAccountMultiples",function(t){cc.log("<<<===[UpdateAccountMultiples] GmaeNN:",t),e.initSingleSeat(t),t.account_id==th.myself.account_id&&e.refreshOptions()}),this.node.on("StartShow",function(t){cc.log("<<<===[StartShow] GmaeNN:",t),e.refreshOptions();var n=th.getMyselfPlayer(),o=n.cards,c=th.getLocalIndex(n.serial_num-1),i=e.nodePokers[c].children;cc.log("\u663e\u793a\u6211\u81ea\u5df1\u7684\u724c:",n,o),i.forEach(function(e,t){e.pokerId=o[t]}),i.forEach(function(e,t){t>=3||e.runAction(cc.sequence(cc.scaleTo(.3,0,1),cc.callFunc(function(e){e.addChild(th.pokerManager.getPokerSpriteById(e.pokerId))}),cc.scaleTo(.3,1,1),cc.callFunc(function(e){e.pokerId=-1})))}),e.setCountdown(t.limit_time,"\u644a\u724c\u5f00\u59cb\u4e86"),t.data.forEach(function(t){var n=th.getPlayerById(t.account_id);e.initSingleSeat(n)})}),this.node.on("UpdateAccountShow",function(t){cc.log("<<<===[UpdateAccountShow] GmaeNN:",t);var n=th.getLocalIndex(t.serial_num-1),o=e.nodePokers[n],c=e.nodeSeats[n],i=o.children,a=th.getNiuIndex(t.card_type,t.combo_point)>0,s=a>0?t.combo_array:t.cards,r=th.getMyselfLocalIndex()==n,l=r?100:c.x>0?-210:90,h=r?-25:0,d=r?110:30;i.forEach(function(e,t){e.runAction(cc.sequence(cc.moveTo(.3,cc.v2(l,h)),cc.callFunc(function(e){e.addChild(th.pokerManager.getPokerSpriteById(s[t]))}),cc.moveTo(.3,cc.v2(l+o.y+t*d+(a&&t>2?15:0),h))))}),e.showNiuType(t)}),this.node.on("Win",function(t){cc.log("<<<===[Win] GmaeNN:",t),e.scheduleOnce(function(){e.nodeAmins.removeAllChildren(),cc.log("TODO \u98de\u7b79\u7801\u6548\u679c");var n=4==th.room.banker_mode?th.getPlayerById(t.winner_array[0].account_id):th.getBankerPlayer(),c=th.getSeatXY(),i=th.getLocalIndex(n.serial_num-1),a=o(c[i],2),s=a[0],r=a[1];th.audioManager.playSFX("coin.mp3"),t.loser_array.forEach(function(t){if(t.account_id!=n.account_id)for(var i=th.getPlayerById(t.account_id),a=th.getLocalIndex(i.serial_num-1),l=o(c[a],2),h=l[0],d=l[1],u=0;u<5;u++){var m=cc.instantiate(e.coinPrefab);m.x=h,m.y=d,e.nodeAmins.addChild(m),m.runAction(cc.sequence(cc.delayTime(.1+.05*u),cc.moveTo(.5,cc.v2(s,r)).easing(cc.easeSineOut()),cc.callFunc(function(e){e.removeFromParent()})))}});var l=t.loser_array.filter(function(e){return e.account_id!=n.account_id}).length;e.scheduleOnce(function(){th.audioManager.playSFX("coin.mp3"),t.winner_array.forEach(function(t){if(t.account_id!=n.account_id)for(var i=th.getPlayerById(t.account_id),a=th.getLocalIndex(i.serial_num-1),l=o(c[a],2),h=l[0],d=l[1],u=0;u<5;u++){var m=cc.instantiate(e.coinPrefab);m.x=s,m.y=r,e.nodeAmins.addChild(m),m.runAction(cc.sequence(cc.delayTime(.1+.05*u),cc.moveTo(.5,cc.v2(h,d)).easing(cc.easeSineOut()),cc.callFunc(function(e){e.removeFromParent()})))}})},.6+.05*l);var h=l+t.winner_array.filter(function(e){return e.account_id!=n.account_id}).length;cc.log("==================offsetCount:",h),e.scheduleOnce(function(){var n=t.score_board,o=Object.keys(n);cc.log("AccountIds:",o),o.forEach(function(t){var o=th.getPlayerById(t);o.account_score=n[t];var c=th.getLocalIndex(o.serial_num-1);e.componentSeats[c].setScoreAnim(o.account_score)})},.6+.05*h+.5),e.scheduleOnce(function(){1==th.room.banker_mode&&(th.myself.needLookCount=2),th.clear(),e.componentSeats.forEach(function(e){e.setBanker(!1)}),e.nodePokers.forEach(function(e){e.removeAllChildren()}),th.room.players.forEach(function(t){e.initSingleSeat(t)}),e.refreshOptions(),th.room.game_num==th.room.total_num&&(cc.log("done........................"),e.toConnectApi())},.6+.05*h+3)},1)}),this.node.on("getScoreBoard",function(t){cc.log("<<<===[getScoreBoard] GameNN:",t),th.wc.hide(),e.resultNode.x=0,e.resultNode.y=0,e.resultNode.active=!0;var n=t.balance_scoreboard,o=n.room_number,c=n.time,i=n.total_num,a=n.room_creator,s=n.scoreboard;e.resultNode.getChildByName("lbl_roomId").getComponent("cc.Label").string="\u623f\u95f4\u53f7\uff1a"+o,e.resultNode.getChildByName("lbl_time").getComponent("cc.Label").string=c,e.resultNode.getChildByName("lbl_round").getComponent("cc.Label").string=i+"\u5c40",e.resultNode.getChildByName("lbl_banker").getComponent("cc.Label").string="\u623f\u4e3b\uff1a"+a;var r=e.resultNode.getChildByName("results").getChildByName("view").getChildByName("content");s.forEach(function(t,n){var o=cc.instantiate(e.resultItemPrefab);o.getChildByName("lbl_id").getComponent("cc.Label").string="ID\uff1a"+t.account_id,o.getChildByName("lbl_name").getComponent("cc.Label").string=t.name,o.getChildByName("lbl_score").getComponent("cc.Label").string=t.score;var c=o.getChildByName("headImg").getComponent("cc.Sprite");cc.loader.load({url:t.avatar,type:"jpg"},function(e,t){if(!e){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));c.spriteFrame=n,c.node.setScale(2-t.width/120)}}),0==n&&(o.getChildByName("dayinjia").active=!0),r.addChild(o)})}),this.node.on("getScoreDetail",function(t){cc.log("<<<===[getScoreDetail] GameNN:",t),th.wc.hide(),e.resultDeatilNode.x=0,e.resultDeatilNode.y=0,e.resultDeatilNode.active=!0;var n=t.room_number,o=t.create_time,c=t.game_num,i=t.rule_text;e.resultDeatilNode.getChildByName("lbl_roomId").getComponent("cc.Label").string="\u623f\u95f4\u53f7\uff1a"+n,e.resultDeatilNode.getChildByName("lbl_time").getComponent("cc.Label").string=o,e.resultDeatilNode.getChildByName("lbl_round").getComponent("cc.Label").string=c+"\u5c40",e.resultDeatilNode.getChildByName("lbl_info").getComponent("cc.Label").string=i;var a=e.resultDeatilNode.getChildByName("results").getChildByName("view").getChildByName("content"),s={};t.balance_board.forEach(function(e){s[e.name]=e}),t.player_array.forEach(function(n){var o=n.game_num,c=n.total_num,i=n.player_cards,r=cc.instantiate(e.resultDetailItemPrefab);r.height=100+100*t.balance_board.length,r.getChildByName("lbl_round").getComponent("cc.Label").string=o+"/"+c;var l=r.getChildByName("players");i.forEach(function(t){var n=cc.instantiate(e.resultDetailSonItemPrefab);n.getChildByName("lbl_id").getComponent("cc.Label").string=s[t.name].account_id+"",n.getChildByName("lbl_name").getComponent("cc.Label").string=t.name+"",n.getChildByName("lbl_mtp").getComponent("cc.Label").string=t.chip+"",n.getChildByName("lbl_score").getComponent("cc.Label").string=t.score+"",n.getChildByName("lbl_niu").getComponent("cc.Label").string=t.card_type_str+"",n.getChildByName("icon_banker").active=1==t.is_banker;var o=n.getChildByName("headImg").getComponent("cc.Sprite");cc.loader.load({url:s[t.name].avatar,type:"jpg"},function(e,t){if(!e){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));o.spriteFrame=n,o.node.setScale(2-t.width/120)}});var c=n.getChildByName("pokers");t.player_cards.forEach(function(e){c.addChild(th.pokerManager.getPokerSpriteById(e))}),l.addChild(n)}),a.addChild(r)})}),this.node.on("getCopyUrl",function(e){cc.log("<<<===[getCopyUrl] GameNN:",e)})},onResultCloseClicked:function(){th.wc.show("\u6b63\u5728\u8fd4\u56de\u5927\u5385\u3002\u3002\u3002"),th.args={},th.room.room_id=null,th.room.room_number=null,th.gametype=null,cc.director.loadScene("Hall",function(){th.wc.hide()})},onZhanjiseachClicked:function(){var e={operation:"getScoreDetail",account_id:th.myself.account_id,session:th.sign,data:{type:1,num2:10291,num:th.room.room_number}};cc.log("===>>>[getScoreDetail] GameNN:",e),th.ws.send(JSON.stringify(e))},onResultDetailCloseClicked:function(){this.resultDeatilNode.active=!1},onChanganbaocunClicked:function(){cc.log("\u957f\u6309\u4fdd\u5b58....")},showNiuType:function(e){var t=th.getLocalIndex(e.serial_num-1),n=this.nodeSeats[t],o=this.nodePokers[t];if(e.account_id!=th.myself.account_id){var c=th.pokerManager.getNiuSprite(e.card_type,e.combo_point);c.x=n.x>0?-160:150,c.y=-20,c.scale=.1,o.addChild(c),c.runAction(cc.scaleTo(.3,1.2))}else{var i=th.pokerManager.getNiuSprite(e.card_type,e.combo_point);i.x=310,i.y=85,i.scale=.1,o.addChild(i),i.runAction(cc.scaleTo(.3,1.5))}var a="bull"+th.getNiuIndex(e.card_type,e.combo_point)+".m4a";th.audioManager.playSFX(a)},initView:function(){(cc.log("GameNN initView"),this.nodeCountdown.active=!1,this.spriteClickLookPai.node.active=!1,this.initRoomInfo(),this.initSeat(),this.initMtpBtn(),this.refreshOptions(),2==th.room.room_status)&&(th.getMyselfPlayer().cards=th.room.cards,this.showPokers());var e=th.getBankerPlayer();if(e){var t=th.getLocalIndex(e.serial_num-1);this.componentSeats[t].setBanker(!0)}},initMtpBtn:function(){var e=o(th.room.bet_type_arr,4),t=e[0],n=e[1],c=e[2],i=e[3];this.btnPlayerMtp1.node.getChildByName("lbl_txt").getComponent("cc.Label").string=t+"\u500d",this.btnPlayerMtp2.node.getChildByName("lbl_txt").getComponent("cc.Label").string=n+"\u500d",this.btnPlayerMtp3.node.getChildByName("lbl_txt").getComponent("cc.Label").string=c+"\u500d",this.btnPlayerMtp4.node.getChildByName("lbl_txt").getComponent("cc.Label").string=i+"\u500d",this.btnBankerMtp1.node.acitve=!1,this.btnBankerMtp2.node.acitve=!1,this.btnBankerMtp4.node.acitve=!1,this.btnPlayerMtp1.node.active=!1,this.btnPlayerMtp2.node.active=!1,this.btnPlayerMtp3.node.active=!1,this.btnPlayerMtp4.node.active=!1,this.btnPlayerMtp1.node.multiples=t,this.btnPlayerMtp2.node.multiples=n,this.btnPlayerMtp3.node.multiples=c,this.btnPlayerMtp4.node.multiples=i,this.btnQiang.node.active=!1,this.btnBuqiang.node.active=!1,this.btnReady.node.active=!1,this.btnShow.node.active=!1},refreshOptions:function(){if(th.myself.isPlayer){this.nodeOptions.active=!0;var e=1==th.room.banker_mode,t=th.getMyselfPlayer(),n=(0==t.account_status||1==t.account_status)&&1==th.room.room_status;this.btnReady.node.active=n,this.sprReady.node.active=n;var o=3==t.account_status&&(1==th.room.room_status||2==th.room.room_status);this.btnBankerMtp1.node.active=o&&!e,this.btnBankerMtp2.node.active=o&&!e,this.btnBankerMtp4.node.active=o&&!e,this.btnQiang.node.active=o&&e,this.btnBuqiang.node.active=o,this.sprQiangzhuang.node.active=o;var c=0==t.is_banker&&6==t.account_status&&(1==th.room.room_status||2==th.room.room_status)&&0==t.multiples;this.btnPlayerMtp1.node.active=c,this.btnPlayerMtp2.node.active=c,this.btnPlayerMtp3.node.active=c,this.btnPlayerMtp4.node.active=c,this.sprWaitPlayerBet.node.active=c;var i=7==t.account_status&&(1==th.room.room_status||2==th.room.room_status)&&th.myself.needLookCount<=0;this.btnShow.node.active=i;var a=7==t.account_status&&(1==th.room.room_status||2==th.room.room_status)&&th.myself.needLookCount>0;this.spriteClickLookPai.node.active=a,this.sprWaitShow.node.active=a||i}else this.nodeOptions.active=!1},initRoomInfo:function(){this.lblRoomInfo.string=th.room.game_num+"/"+th.room.total_num+"\u5c40 \u5e95\u5206\uff1a"+th.room.base_score+"\u5206"},initSeat:function(){for(var e=th.getSeatXY(),t=0;t<e.length;t++){var n=o(e[t],2),c=n[0],i=n[1],a=cc.instantiate(this.seatPrefab);a.x=c,a.y=i,a.seatIndex=t,this.baseNode.addChild(a),this.nodeSeats.push(a),this.componentSeats.push(a.getComponent("Seat")),this.nodePokers.push(a.getChildByName("info").getChildByName("pokers"))}for(var s=th.room.players,r=0;r<s.length;++r)this.initSingleSeat(s[r])},initSingleSeat:function(e){var t=th.getLocalIndex(e.serial_num-1);if(this.componentSeats[t].setInfo(e.account_id,e.nickname,e.account_score,e.headimgurl,e.sex),this.componentSeats[t].setOffline(1!=e.online_status),this.componentSeats[t].setScore(e.account_score),this.componentSeats[t].setReady(2==e.account_status),4==e.account_status)this.componentSeats[t].setMultiples("n");else if(5==e.account_status){var n=0!=e.multiples?"x"+e.multiples:"";this.componentSeats[t].setMultiples("y"+n)}else 6==e.account_status?this.componentSeats[t].setMultiples(0!=e.multiples?"x"+e.multiples:""):7==e.account_status?this.componentSeats[t].setMultiples(1==e.is_banker?null:"x"+e.multiples):this.componentSeats[t].setMultiples(null)},onCopyCliecked:function(e,t){var n=th.webCopyString(th.room.copyurl);cc.log("address:",th.room.copyurl),th.msg.show(n?"\u590d\u5236\u6210\u529f\uff01":"\u590d\u5236\u5931\u8d25")},onBankerMultiplesClicked:function(e,t){var n=1;0==Number(t)?(n=1,th.audioManager.playSFX("robbanker.m4a")):(n=Number(t),th.audioManager.playSFX("multiples"+n+".m4a"));var o={operation:"GrabBanker",account_id:th.myself.account_id,session:th.sign,data:{room_id:th.room.room_id,is_grab:1,multiples:Number(t)}};cc.log("===>>>[GrabBanker] GameNN:",o),th.ws.send(JSON.stringify(o))},onBuqiangClicked:function(){th.audioManager.playSFX("nobanker.m4a");var e={operation:"GrabBanker",account_id:th.myself.account_id,session:th.sign,data:{room_id:th.room.room_id,is_grab:0,multiples:1}};cc.log("===>>>[NoGrabBanker] GameNN:",e),th.ws.send(JSON.stringify(e))},onReadyClicked:function(){cc.log("onReadyClicked");var e={operation:"ReadyStart",account_id:th.myself.account_id,session:th.sign,data:{room_id:th.room.room_id}};cc.log("===>>>[ReadyStart] GameNN:",e),th.ws.send(JSON.stringify(e))},onPlayerMultiplesClicked:function(e,t){var n=e.target.multiples;th.audioManager.playSFX("multiples"+n+".m4a");var o={operation:"PlayerMultiples",account_id:th.myself.account_id,session:th.sign,data:{room_id:th.room.room_id,multiples:Number(n)}};cc.log("===>>>[PlayerMultiples] GameNN:",o),th.ws.send(JSON.stringify(o))},onShowClicked:function(e){cc.log("onPlayerMultiplesClicked:");var t={operation:"ShowCard",account_id:th.myself.account_id,session:th.sign,data:{room_id:th.room.room_id}};cc.log("===>>>[ShowCard] GameNN:",t),th.ws.send(JSON.stringify(t))},onBackClicked:function(e){th.wc.show("\u6b63\u5728\u52a0\u8f7d\u3002\u3002\u3002"),cc.director.loadScene("Hall",function(){th.wc.hide()})},onChatClicked:function(e){cc.log(th.room)},onMoreClicked:function(e){var t=this.componentSeats[0];t.setChat("\u4f19\u53f3\u4f19\u5386\u4f19"),t.setReady(!0),t.setOffline(!0),t.setScore("-8888"),t.setUserName("\u6211\u7684\u540d\u5b57"),t.setCountdown(10)},onThemeClicked:function(e){var t=this.componentSeats[0];t.setChat("\u4f19\u53f3\u4f19\u5386\u4f19\u4f19\u53f3\u4f19\u5386\u4f19"),t.setReady(!1),t.setOffline(!0),t.setScore("+8888"),t.setCountdown(0)},onLookClicked:function(e){cc.log("onLookClickedonLookClickedonLookClickedonLookClicked");var t=th.webCopyString("onLookClickedonLookClickedonLookClickedonLookClickedCopy");th.msg.show(t?"\u590d\u5236\u6210\u529f\uff01":"\u590d\u5236\u5931\u8d25")},onPokerClicked:function(e,t){cc.log("Poker",e.target.pokerId,t);var n=e.target.pokerId;-1!=n&&(e.target.runAction(cc.sequence(cc.scaleTo(.3,0,1),cc.callFunc(function(e){e.addChild(th.pokerManager.getPokerSpriteById(n))}),cc.scaleTo(.3,1,1),cc.callFunc(function(e){e.pokerId=-1}))),th.myself.needLookCount=th.myself.needLookCount-1,this.refreshOptions())},showPokers:function(){var e=[],t=[];th.room.players.forEach(function(n){if(cc.log("showPokers:",n.account_status),n.account_status>1){var o=th.getLocalIndex(n.serial_num-1);e.push(o),t.push(n)}});for(var n=th.getMyselfLocalIndex(),o=0;o<e.length;o++){var c=t[o],i=c.cards,a=e[o]==n;7==c.account_status?a?((i=new Array(5).fill(-1))[0]=c.cards[0],i[1]=c.cards[1],i[2]=c.cards[2]):i=new Array(5).fill(-1):i=8==c.account_status?c.cards:new Array(5).fill(-1),cc.log("\u662f\u81ea\u5df1\uff1a"+a,c.nickname+" \u53d1\u724c\uff1a",i);var s=this.nodePokers[e[o]];s.removeAllChildren();for(var r=c.cards,l=0;l<i.length;l++){var h=i[l],d=r[l]||-1,u=th.pokerManager.getPokerSpriteById(h);if(u.pokerId=d,u.scale=.65,u.position=s.convertToNodeSpaceAR(cc.v2(375,663)),-1==h){var m=new cc.Component.EventHandler;m.target=this.node,m.component="GameNN",m.handler="onPokerClicked",m.customEventData=d,u.getComponent(cc.Button).clickEvents.push(m)}s.addChild(u)}}th.audioManager.playSFX("fapai.m4a");for(var g=0;g<5;g++)for(var p=0;p<e.length;p++){var f=e[p],b=this.nodeSeats[f],y=this.nodePokers[f],_=f==n;(function(e,t,n,o,c){_?e.runAction(cc.sequence(cc.delayTime(t),cc.spawn(cc.moveTo(.2,cc.v2(n,o)),cc.scaleTo(.2,1)))):e.runAction(cc.sequence(cc.delayTime(t),cc.moveTo(.2,cc.v2(n,o))))})(y.children[g],.1+.04*g*e.length+.04*p,(_?100:b.x>0?-210:90)+y.y+g*(_?110:30),_?-25:0)}for(var C=0;C<e.length;C++){var v=t[C];8==v.account_status&&this.showNiuType(v)}},setCountdown:function(e,t){var n=this,o=Number(e);this.nodeCountdown.active=o>0,t?this.nodeCountdown.getChildByName("lbl_title").getComponent("cc.Label").string=t:this.nodeCountdown.getChildByName("lbl_title").node.active=!1,this._countdownEndTime=Date.now()+1e3*o,this._alertStartTime=Date.now()+1e3*(o-3),this._isPlay=!1,this.scheduleOnce(function(){n._countdownEndTime<=Date.now()&&(n.nodeCountdown.active=!1)},o+.1)},update:function(e){var t=Date.now();if(this._countdownEndTime>t){var n=Math.ceil((this._countdownEndTime-t)/1e3);this.lblCountdown.string=n}this._alertStartTime<t&&!this._isPlay&&(this._isPlay=!0),this.holdClick&&(this.holdTimeEclipse++,this.holdTimeEclipse>120&&(this.holdTimeEclipse=120))},toConnectApi:function(e){cc.log("onCreateClicked:",this.createFrom),th.webSocketManager.connectGameServer({ip:"47.96.177.207",port:1e4,namespace:"api"},function(){th.wc.show("\u6b63\u5728\u83b7\u53d6\u7ed3\u679c...");var e={operation:"getScoreBoard",account_id:th.myself.account_id,session:th.sign,data:{type:1,num2:10291,num:th.room.room_number}};cc.log("===>>>[getScoreBoard] GameNN:",e),th.ws.send(JSON.stringify(e))})}}),cc._RF.pop()},{}],GameZJH:[function(e,t,n){"use strict";cc._RF.push(t,"8a4ebFylIpDrpobnyYgCN5a","GameZJH"),cc.Class({extends:cc.Component,properties:{createFrom:null},onLoad:function(){null!=th&&(cc.log("GameNN onLoad"),this.initEventHandlers(),this.createFrom={})},initEventHandlers:function(){th.webSocketManager.dataEventHandler=this.node},start:function(){}}),cc._RF.pop()},{}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"7c6aas2kcFG5KBfpRPpUiDm","Global"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.log("Global onLoad...................."),window.th=window.th||{},this.initManager(),this.urlParse();var e=this.node.getContentSize(),t=e.width,n=e.height;th.wsurl="ws://47.96.177.207:10000/api",th.width=t,th.height=n,th.myself={account_id:"000000",nickname:"\u6e38\u5ba2",headimgurl:"",account_ticket:0,phone:"--------",isPlayer:!1,needLookCount:0},th.token=null,th.sign=null,th.gametype=null,th.room={room_id:null,room_number:null,players:[],guests:[],max_count:0,copyurl:null},th.seatxy={6:[[-305,-420],[305,-100],[305,200],[-100,485],[-305,200],[-305,-100]],9:[[-305,-420],[305,-200],[305,0],[305,200],[305,400],[-305,400],[-305,200],[-305,0],[-305,-200]],10:[[-305,-420],[305,-220],[305,-40],[305,140],[305,320],[-100,485],[-305,320],[-305,140],[-305,-40],[-305,-220]],12:[[-305,-420],[305,-260],[305,-110],[305,40],[305,190],[305,340],[-100,485],[-305,340],[-305,190],[-305,40],[-305,-110],[-305,-260]],13:[[-305,-420],[305,-260],[305,-110],[305,40],[305,190],[305,340],[305,485],[-305,485],[-305,340],[-305,190],[-305,40],[-305,-110],[-305,-260]]},th.getNiuIndex=function(e,t){return 1==(e=Number(e))?0:e>=4&&e<=14?e+6:t},th.getSeatXY=function(){return th.seatxy[this.room.max_count.toString()]},th.getGuestById=function(e){return this.room.guests.find(function(t){return t.account_id==e})},th.getPlayerById=function(e){return this.room.players.find(function(t){return t.account_id==e})},th.getLocalIndex=function(e){if(!th.myself.isPlayer)return 0;var t=Number(th.room.max_count);return(Number(e)-th.getMyselfSeatIndex()+t)%t},th.getSeatIndexById=function(e){return th.myself.isPlayer?this.getPlayerById(e).serial_num-1:0},th.getMyselfSeatIndex=function(){if(!th.myself.isPlayer)return 0;var e=this.getPlayerById(th.myself.account_id);return Number(e.serial_num)-1},th.getMyselfPlayer=function(){return th.myself.isPlayer?this.getPlayerById(th.myself.account_id):null},th.getMyselfLocalIndex=function(){if(!th.myself.isPlayer)return 0;var e=this.getMyselfPlayer();return this.getLocalIndex(e.serial_num-1)},th.getBankerPlayer=function(){return this.room.players.find(function(e){return 1==e.is_banker})},th.initRoom=function(){1==th.room.banker_mode&&(th.myself.needLookCount=2)},th.clear=function(){th.room.room_status=1,th.room.players.forEach(function(e){e.account_status=1,e.banker_multiples="",e.multiples=0,e.cards=[],e.card_type=0,e.combo_array=[],e.combo_point=0,e.is_banker=0})},th.getRoomCopyUrl=function(){var e={operation:"getCopyUrl",account_id:th.myself.account_id,session:th.sign,data:{roomId:th.room.room_number,type:th.gametype,url:th.href}};cc.log("===>>>[getCopyUrl] Global:",e),th.ws.send(JSON.stringify(e))},th.webCopyString=function(e){if(cc.sys.isBrowser){var t=e+"",n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";var o=getSelection(),c=!1;o.rangeCount>0&&(c=o.getRangeAt(0)),document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length;var i=!1;try{i=document.execCommand("copy")}catch(e){}return document.body.removeChild(n),c&&(o.removeAllRanges(),o.addRange(c)),i}return!1},th.webCaptureScreen=function(){cc.sys.isBrowser&&cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){var e=document.getElementById("GameCanvas").toDataURL(),t=new Image;t.src=e;var n=document.createElement("body");n.append(t),document.body=n,t.setAttribute("width","100%"),t.setAttribute("height","100%")})}},initManager:function(){th.ws=e("WebSocket");var t=e("AudioManager");th.audioManager=new t,th.audioManager.init(),th.audioManager.playBGM("background.mp3");var n=e("WebSocketManager");th.webSocketManager=new n,th.webSocketManager.initHandlers()},urlParse:function(){var e={code:123};if(null==window.location)return e;for(var t=void 0,n=void 0,o=window.location.href,c=o.indexOf("?"),i=o.substr(c+1).split("&"),a=0;a<i.length;a++)(c=i[a].indexOf("="))>0&&(t=i[a].substring(0,c),n=i[a].substr(c+1),e[t]=n);cc.log("Params:",e),th.href=o.substr(0,o.indexOf("?")),th.args=e}}),cc._RF.pop()},{AudioManager:"AudioManager",WebSocket:"WebSocket",WebSocketManager:"WebSocketManager"}],Hall:[function(e,t,n){"use strict";var o;function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"773fdxZFshNqYWrF+ZWmpkp","Hall"),cc.Class((c(o={extends:cc.Component,properties:{dock:cc.Node,dating:cc.Node,yuleting:cc.Node,zhanji:cc.Node,gerenzhongxin:cc.Node,selectNN:cc.Node,selectZJH:cc.Node,voiceToggle:cc.Toggle,fangzuobi:cc.Node,bangdingshouji:cc.Node,sendfangka:cc.Node,zhanjitongji:cc.Node,shimingrenzheng:cc.Node,lblId:cc.Label,lblName:cc.Label,lblFangka:cc.Label,lblPhone:cc.Label,headImg:cc.Sprite,createNN:cc.Node,createZJH:cc.Node,createNNComponent:cc.Class,createZJHComponent:cc.Class,selectGame:cc.Node,createGame:cc.Node,joinOrLook:cc.Node},onLoad:function(){null!=th&&(this.initEventHandlers(),this.initUserInfo(),this.createNNComponent=this.node.getChildByName("CreateNN").getComponent("CreateNN"),this.createZJHComponent=this.node.getChildByName("CreateZJH").getComponent("CreateZJH"),cc.log("args:",th.args),th.args.roomId&&th.args.type&&(cc.log("\u76f4\u63a5\u8fdb\u5165\u623f\u95f4\uff1a"+th.args.type+"=="+th.args.roomId),th.room.room_number=th.args.roomId,"nn"==th.args.type?th.webSocketManager.connectGameServer({ip:"47.96.177.207",port:1e4,namespace:"gamebdn"},function(){var e={operation:"PrepareJoinRoom",account_id:th.myself.account_id,session:th.sign,data:{room_number:th.args.roomId}};cc.log("===>>>[PrepareJoinRoom] Hall:",e),th.ws.send(JSON.stringify(e))}):cc.err("\u6e38\u620f\u7c7b\u578b\u9519\u8bef\uff1a"+th.args.type)))},onEnable:function(){cc.log("Hall onEnable"),cc.log("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA")},start:function(){cc.log("Hall start"),cc.log("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA")},initEventHandlers:function(){var e=this;cc.log("Hall initEventHandlers()"),th.webSocketManager.dataEventHandler=this.node,this.node.on("game_connect_success",function(){e.createGame&&e.createGame.emit("game_connect_success")}),this.node.on("CreateRoom",function(){cc.log("<<<===[CreateRoom] Hall"),th.wc.hide(),e.createGame.active=!1,e.selectGame.active=!1,e.topToBottomAnim(e.selectGame)}),this.node.on("PrepareJoinRoom",function(t){cc.log("<<<===[PrepareJoinRoom],Hall"),4!=t.room_status?e.joinOrLook.getComponent("JoinOrLook").show(th.gametype):th.alert.show("\u63d0\u793a","\u623f\u95f4\u5df2\u7ecf\u5173\u95ed")})},initUserInfo:function(){var e=this;this.lblId.string=th.myself.account_id,this.lblName.string=th.myself.nickname,this.lblFangka.string="x"+th.myself.account_ticket,this.lblPhone.string=th.myself.phone,!th.myself.headSpriteFrame&&th.myself.headimgurl&&cc.loader.load({url:th.myself.headimgurl,type:"jpg"},function(t,n){if(!t){cc.log(th.myself.nickname+" \u4e0b\u8f7d\u5934\u50cf\u6210\u529f\uff1a"+th.myself.headimgurl);var o=new cc.SpriteFrame(n,cc.Rect(0,0,n.width,n.height));th.myself.headSpriteFrame=o,e.headImg.spriteFrame=o,e.headImg.node.setScale(2-n.width/105)}})}},"onEnable",function(){var e=cc.sys.localStorage.getItem("bgmVolume");"0"!=e?(th.audioManager.setBGMVolume(e),this.voiceToggle.isChecked=!1):this.voiceToggle.isChecked=!0}),c(o,"start",function(){}),c(o,"update",function(e){}),c(o,"onFangkaChecked",function(e){th.wc.show("\u6b63\u5728\u52a0\u8f7d\u3002\u3002\u3002"),cc.director.loadScene("GameNN",function(){th.wc.hide()})}),c(o,"onFzbChecked",function(e){th.audioManager.playSFX("click.mp3"),this.fangzuobi.x=0,this.fangzuobi.y=0,this.fangzuobi.active=!0}),c(o,"onFzbCloseChecked",function(e){th.audioManager.playSFX("click.mp3"),this.fangzuobi.active=!1}),c(o,"onFzbYesChecked",function(e){th.audioManager.playSFX("click.mp3"),this.fangzuobi.active=!1}),c(o,"onBdsjChecked",function(e){th.audioManager.playSFX("click.mp3"),this.bangdingshouji.x=0,this.bangdingshouji.y=0,this.bangdingshouji.active=!0}),c(o,"onBdsjCloseChecked",function(e){th.audioManager.playSFX("click.mp3"),this.bangdingshouji.active=!1}),c(o,"onBdsjYesChecked",function(e){th.audioManager.playSFX("click.mp3"),this.bangdingshouji.active=!1}),c(o,"onZhanjiChecked",function(e){th.audioManager.playSFX("click.mp3"),this.dating.active=!1,this.yuleting.active=!1,this.zhanji.active=!0,this.gerenzhongxin.active=!1,this.dock.getChildByName("toogle_menu").getComponent("cc.ToggleContainer").allowSwitchOff=!0,this.dock.getChildByName("toogle_menu").children.forEach(function(e,t){"btn_zhanji"===e.name?e.getComponent("cc.Toggle").check():e.getComponent("cc.Toggle").uncheck()}),this.dock.getChildByName("toogle_menu").getComponent("cc.ToggleContainer").allowSwitchOff=!1}),c(o,"onZhanjitongjiChecked",function(e){th.audioManager.playSFX("click.mp3"),this.zhanjitongji.x=0,this.zhanjitongji.y=0,this.zhanjitongji.active=!0}),c(o,"onZhanjitongjiCloseChecked",function(e){th.audioManager.playSFX("click.mp3"),this.zhanjitongji.active=!1}),c(o,"onSendFangkaChecked",function(e){th.audioManager.playSFX("click.mp3"),this.sendfangka.x=0,this.sendfangka.y=0,this.sendfangka.active=!0}),c(o,"onSendFangkaCloseChecked",function(e){th.audioManager.playSFX("click.mp3"),this.sendfangka.active=!1}),c(o,"onShimingrenzhengChecked",function(e){th.audioManager.playSFX("click.mp3"),this.shimingrenzheng.x=0,this.shimingrenzheng.y=0,this.shimingrenzheng.active=!0}),c(o,"onShimingrenzhengCloseChecked",function(e){th.audioManager.playSFX("click.mp3"),this.shimingrenzheng.active=!1}),c(o,"onVoiceChecked",function(e){th.audioManager.playSFX("click.mp3"),cc.log("\u5f00\u5173\u58f0\u97f3",e.isChecked),e.isChecked?th.audioManager.setBGMVolume(0):th.audioManager.setBGMVolume(.5)}),c(o,"onCopyIdChecked",function(e){th.audioManager.playSFX("click.mp3"),cc.log("\u590d\u5236ID")}),c(o,"onDockChecked",function(e,t){switch(th.audioManager.playSFX("click.mp3"),t){case"dating":this.dating.active=!0,this.yuleting.active=!1,this.zhanji.active=!1,this.gerenzhongxin.active=!1;break;case"yuleting":this.dating.active=!1,this.yuleting.active=!0,this.zhanji.active=!1,this.gerenzhongxin.active=!1;break;case"zhanji":this.dating.active=!1,this.yuleting.active=!1,this.zhanji.active=!0,this.gerenzhongxin.active=!1;break;case"gerenzhongxin":this.dating.active=!1,this.yuleting.active=!1,this.zhanji.active=!1,this.gerenzhongxin.active=!0}}),c(o,"onHallGameChecked",function(e,t){switch(th.audioManager.playSFX("click.mp3"),t){case"nn":this.selectGame=this.selectNN,this.bottomToTopAnim(this.selectNN);break;case"zjh":this.selectGame=this.selectZJH,this.bottomToTopAnim(this.selectZJH)}}),c(o,"onSelectGameCloseClicked",function(e,t){switch(th.audioManager.playSFX("click.mp3"),this.selectGame=null,t){case"nn":this.topToBottomAnim(this.selectNN);break;case"zjh":this.topToBottomAnim(this.selectZJH)}}),c(o,"bottomToTopAnim",function(e){e.isRun||(e.position=cc.v2(0,-th.height),e.runAction(cc.sequence(cc.callFunc(function(){e.isRun=!0}),cc.moveTo(.2,cc.v2(0,0)).easing(cc.easeSineIn()),cc.callFunc(function(){e.isRun=!1}))))}),c(o,"topToBottomAnim",function(e){e.isRun||e.runAction(cc.sequence(cc.callFunc(function(){e.isRun=!0}),cc.moveTo(.2,cc.v2(0,-th.height)).easing(cc.easeSineIn()),cc.callFunc(function(){e.isRun=!1})))}),c(o,"onSelectNNChecked",function(e,t){th.audioManager.playSFX("click.mp3"),this.createNN.x=0,this.createNN.y=0,this.createNNComponent.show(t),this.createGame=this.createNN}),c(o,"onSelectZJHChecked",function(e,t){th.audioManager.playSFX("click.mp3"),this.createZJH.x=0,this.createZJH.y=0,this.createZJHComponent.show(t),this.createGame=this.createZJH}),o)),cc._RF.pop()},{}],JoinOrLook:[function(e,t,n){"use strict";cc._RF.push(t,"d872ee2ZINNjY/rcTOfi+fr","JoinOrLook"),cc.Class(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({extends:cc.Component,properties:{gameNN:cc.Node,gameZJH:cc.Node,btnJoin:cc.Button,btnLook:cc.Button},onLoad:function(){null!=th&&(this.node.x=0,this.node.y=0,this.node.active=!0)},start:function(){this.node.active=!1},show:function(e){switch(cc.log("===JoinOrLook===",e),this.node.x=0,this.node.y=0,this.node.active=!0,e){case"nn":this.initGameNN();break;case"zjh":this.initGameZJH()}},initGameNN:function(){this.node.getChildByName("lbl_id").getComponent("cc.Label").string="\u60a8\u7684\u5929\u73e0ID\uff1a"+th.myself.account_id,this.gameNN.getChildByName("lbl_mode").getComponent("cc.Label").string=1==th.room.banker_mode?"\u81ea\u7531\u62a2\u5e84":2==th.room.banker_mode?"\u660e\u724c\u62a2\u5e84":3==th.room.banker_mode?"\u8f6c\u5e84\u725b\u725b":4==th.room.banker_mode?"\u901a\u6bd4\u725b\u725b":5==th.room.banker_mode?"\u56fa\u5b9a\u5e84\u5bb6":"\u672a\u77e5",this.gameNN.getChildByName("lbl_difeng").getComponent("cc.Label").string=th.room.score_type+"",this.gameNN.getChildByName("lbl_renshu").getComponent("cc.Label").string=th.room.max_count+"",this.gameNN.getChildByName("lbl_guize").getComponent("cc.Label").string=1==th.room.rule_type?"\u725b\u725b*3\uff0c\u725b\u4e5d*2 \uff0c\u725b\u516b*2":2==th.room.rule_type?"\u725b\u725b*4\uff0c\u725b\u4e5d*3\uff0c\u725b\u516b*2\uff0c\u725b\u4e03*2":"\u672a\u77e5";var e=this.gameNN.getChildByName("lbl_paixing").getComponent("cc.Label"),t=[];1==th.room.is_cardfour&&t.push("\u56db\u82b1\u725b(4\u500d)"),1==th.room.is_cardfourtiny&&t.push("\u56db\u5c0f\u725b(4\u500d)"),1==th.room.is_cardfive&&t.push("\u4e94\u82b1\u725b(5\u500d)"),1==th.room.is_straight&&t.push("\u987a\u5b50\u725b(6\u500d)"),1==th.room.is_flush&&t.push("\u540c\u82b1\u725b(6\u500d)"),1==th.room.is_calabash&&t.push("\u846b\u82a6\u725b(7\u500d)"),1==th.room.is_cardbomb&&t.push("\u70b8\u5f39\u725b(8\u500d)"),1==th.room.is_sequence&&t.push("\u540c\u82b1\u987a\u725b(9\u500d)"),1==th.room.is_cardtiny&&t.push("\u4e94\u5c0f\u725b(10\u500d)"),e.string=t.join("   ");var n=this.gameNN.getChildByName("lbl_jushu").getComponent("cc.Label"),o=6==th.room.max_count?1:9==th.room.max_count||10==th.room.max_count?2:12==th.room.max_count||13==th.room.max_count?3:0;n.string=10*th.room.ticket_type+"\u5c40X"+th.room.ticket_type*o+"\u623f\u5361",this.gameNN.getChildByName("lbl_beishu").getComponent("cc.Label").string=0==th.room.bet_type?"1\uff0c2\uff0c4\uff0c5 \u500d":1==th.room.bet_type?"1\uff0c3\uff0c5\uff0c8 \u500d":2==th.room.bet_type?"2\uff0c4\uff0c5\uff0c10 \u500d":3==th.room.bet_type?"2\uff0c6\uff0c10\uff0c15 \u500d":"\u672a\u77e5",this.btnJoin.node.active=1==th.room.can_join,this.btnLook.node.active=1==th.room.can_guest},initGameZJH:function(){},onJoinClicked:function(e){cc.log("onJoinClicked"),th.wc.show("\u6b63\u5728\u52a0\u5165\u623f\u95f4...");var t={operation:"JoinRoom",account_id:th.myself.account_id,session:th.sign,data:{room_number:th.room.room_number}};cc.log("===>>>[JoinRoom] JoinOrLook:",t),th.ws.send(JSON.stringify(t))},onLookClicked:function(e){}},"start",function(){})),cc._RF.pop()},{}],Message:[function(e,t,n){"use strict";cc._RF.push(t,"15051BPFbNCjIvQHBN9Rlp7","Message"),cc.Class({extends:cc.Component,properties:{ltlMsg:cc.Label},onLoad:function(){if(cc.log("Message====>onload"),null==th)return null;th.msg=this,this.node.active=!1},show:function(e){this.node&&(this.node.active=!0,this.ltlMsg.string=e||"",this.node.runAction(cc.sequence(cc.fadeIn(0),cc.moveTo(1,cc.v2(0,150)),cc.fadeOut(0),cc.callFunc(function(e){return e.y=0}))))},onDestory:function(){th&&(th.msg=null)}}),cc._RF.pop()},{}],PokerManager:[function(e,t,n){"use strict";cc._RF.push(t,"b2baaa/XkdKv5ET39gDTU6S","PokerManager");var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,c=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(c)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();cc.Class({extends:cc.Component,properties:{niuAtlas:cc.SpriteAtlas,pokerAtlas:cc.SpriteAtlas,pokerNormal:cc.Prefab,pokerGhost:cc.Prefab,pokerFlower:cc.Prefab,pokerBack:cc.Prefab,niuType:cc.Prefab,normalIds:null,ghostIds:null,flowerIds:null},onLoad:function(){null!=th&&(th.pokerManager=this,this.normalIds={A1:["A","1","A"],A2:["A","2","A"],A3:["A","3","A"],A4:["A","4","A"],A5:["A","5","A"],A6:["A","6","A"],A7:["A","7","A"],A8:["A","8","A"],A9:["A","9","A"],A10:["A","10","A"],A11:["A","11","11F"],A12:["A","12","12F"],A13:["A","13","13F"],B1:["B","1","B"],B2:["B","2","B"],B3:["B","3","B"],B4:["B","4","B"],B5:["B","5","B"],B6:["B","6","B"],B7:["B","7","B"],B8:["B","8","B"],B9:["B","9","B"],B10:["B","10","B"],B11:["B","11","11F"],B12:["B","12","12F"],B13:["B","13","13F"],C1:["C","1","C"],C2:["C","2","C"],C3:["C","3","C"],C4:["C","4","C"],C5:["C","5","C"],C6:["C","6","C"],C7:["C","7","C"],C8:["C","8","C"],C9:["C","9","C"],C10:["C","10","C"],C11:["C","11","11F"],C12:["C","12","12F"],C13:["C","13","13F"],D1:["D","1","D"],D2:["D","2","D"],D3:["D","3","D"],D4:["D","4","D"],D5:["D","5","D"],D6:["D","6","D"],D7:["D","7","D"],D8:["D","8","D"],D9:["D","9","D"],D10:["D","10","D"],D11:["D","11","11F"],D12:["D","12","12F"],D13:["D","13","13F"]},this.ghostIds={D0:["14","D0"],E0:["15","E0"]},this.flowerIds={A0:null,B0:null,C0:null,N0:null,M0:null,F0:null,G0:null,H0:null},cc.log("PokerManager onload........"))},getPokerSpriteById:function(e){if(Reflect.has(this.normalIds,e)){var t=o(this.normalIds[e],3),n=t[0],c=t[1],i=t[2],a=cc.instantiate(this.pokerNormal);return a.getChildByName("num").getComponent("cc.Sprite").spriteFrame=this.pokerAtlas.getSpriteFrame(c),a.getChildByName("flower_small").getComponent("cc.Sprite").spriteFrame=this.pokerAtlas.getSpriteFrame(n),a.getChildByName("flower_big").getComponent("cc.Sprite").spriteFrame=this.pokerAtlas.getSpriteFrame(i),a}if(Reflect.has(this.flowerIds,e)){var s=e,r=cc.instantiate(this.pokerFlower);return r.getChildByName("flower").getComponent("cc.Sprite").spriteFrame=this.pokerAtlas.getSpriteFrame(s),r}if(Reflect.has(this.ghostIds,e)){var l=o(this.ghostIds[e],2),h=l[0],d=l[1],u=cc.instantiate(this.pokerGhost),m=u.getChildByName("num").getComponent("cc.Sprite");return cc.log("ghost",u,m),m.spriteFrame=this.pokerAtlas.getSpriteFrame(h),u.getChildByName("flower_big").getComponent("cc.Sprite").spriteFrame=this.pokerAtlas.getSpriteFrame(d),u}return cc.instantiate(this.pokerBack)},getNiuSprite:function(e,t){e=Number(e);var n=th.getNiuIndex(e,t),o=cc.instantiate(this.niuType);return o.getComponent("cc.Sprite").spriteFrame=this.niuAtlas.getSpriteFrame("bull"+n),o},start:function(){}}),cc._RF.pop()},{}],Seat:[function(e,t,n){"use strict";cc._RF.push(t,"9184bee/dtCqqHphret4VYD","Seat"),cc.Class({extends:cc.Component,properties:{headImg:cc.Sprite,lblName:cc.Label,lblWinScore:cc.Label,lblLoseScore:cc.Label,offline:cc.Sprite,fangzhu:cc.Sprite,ready:cc.Sprite,banker:cc.Sprite,emoji:cc.Sprite,countdown:cc.Sprite,blink:cc.Sprite,chat:cc.Label,btnNull:cc.Button,userNode:cc.Node,multiples:cc.Label,nodePokers:cc.Node,animWinScore:cc.Label,animLoseScore:cc.Label,_userId:null,_userName:"--",_headImgUrl:null,_headSpriteFrame:null,_sex:0,_score:0,_countdown:0,_isOffline:!1,_isReady:!1,_isFangzhu:!1,_isbanker:!1,_lastChatTime:-1,_lastCountdownTime:-1},onLoad:function(){this.chat&&(this.chat.node.active=!1),this.emoji&&(this.emoji.node.active=!1),this.blink&&(this.blink.node.active=!1),this.animWinScore&&(this.animWinScore.node.active=!1),this.animLoseScore&&(this.animLoseScore.node.active=!1),this.multiples&&(this.multiples.node.active=!1),this.refresh()},start:function(){},refresh:function(){this._userName&&(this.lblName.string=this._userName),this._score&&(this._score>=0?(this.lblWinScore.string=this._score,this.lblWinScore.node.active=!0,this.lblLoseScore.node.active=!1):(this.lblLoseScore.string=this._score,this.lblLoseScore.node.active=!0,this.lblWinScore.node.active=!1)),this.offline&&(this.offline.node.active=this._isOffline&&null!=this._userId),this.ready&&(this.ready.node.active=this._isReady&&"idle"==th.socketIOManager.status),this.fangzhu&&(this.fangzhu.node.active=this._isFangzhu),this.banker&&(this.banker.node.active=this._isbanker),this.countdown&&(this.countdown.node.active=this._countdown>0),this.btnNull&&(this.btnNull.node.active=!this._userId),this.userNode&&(this.userNode.active=!!this._userId)},setUserID:function(e){this._userId=e},setUserName:function(e){this._userName=e,this.lblName&&(this.lblName.string=this._userName)},setSex:function(e){this._sex=e},setHeadImgUrl:function(e){var t=this;this._headImgUrl=e,this._headImgUrl&&this.headImg?(this.headImg.node.active=!0,this._headSpriteFrame||cc.loader.load({url:this._headImgUrl,type:"jpg"},function(n,o){if(!n){cc.log(t._userName+" \u4e0b\u8f7d\u5934\u50cf\u6210\u529f\uff1a"+e);var c=new cc.SpriteFrame(o,cc.Rect(0,0,o.width,o.height));t._headSpriteFrame=c,t.headImg.spriteFrame=c,t.headImg.node.setScale(2-o.width/105)}})):!this._headImgUrl&&this.headImg&&(this.headImg.node.active=!1,this._headSpriteFrame=null)},setScoreAnim:function(e){var t=this,n=Number(e)-this._score;if(0!=n){var o=n>=0?this.animWinScore:this.animLoseScore;o.string=n>=0?"+"+n:n,o.node.active=!0,o.node.y=0,o.node.scale=.5,o.node.runAction(cc.sequence(cc.fadeIn(0),cc.spawn(cc.moveBy(1,cc.v2(0,100)),cc.scaleTo(1,2.5)),cc.fadeOut(0),cc.callFunc(function(){t.setScore(e)}))),this._score=Number(e)}},setScore:function(e){this.lblLoseScore&&this.lblWinScore&&(this._score=Number(e),this._score>=0?(this.lblWinScore.string=this._score,this.lblWinScore.node.active=!0,this.lblLoseScore.node.active=!1):(this.lblLoseScore.string=this._score,this.lblLoseScore.node.active=!0,this.lblWinScore.node.active=!1))},setFangzhu:function(e){this._isFangzhu=e,this.fangzhu&&(this.fangzhu.node.active=this._isFangzhu)},setReady:function(e){if(this._isReady=e,this.ready){var t=this.node.x;this.ready.node.x=t>0?-100:100,1==this._isReady?(this.ready.node.scale=.1,this.ready.node.active=!0,this.ready.node.runAction(cc.scaleTo(.3,1.3))):this.ready.node.active=!1}},setBanker:function(e){var t=this;cc.log("name: "+this._userName+" , this._isbanker:"+this._isbanker+" , isbanker:"+e+" , result:"+(this._isbanker!=e)),this._isbanker!=e&&(e&&0==this.banker.node.active?(this.blink.node.active=!0,this.blink.node.scaleX=1,this.blink.node.scaleY=.9,this.blink.node.runAction(cc.sequence(cc.fadeIn(0),cc.spawn(cc.scaleTo(.5,1.3),cc.fadeOut(.5)),cc.callFunc(function(e){e.active=!1,t.banker.node.scale=.1,t.banker.node.active=!0,t.banker.node.runAction(cc.scaleTo(.3,1))})))):(this.banker.node.scale=1,this.banker.node.active=!1)),this._isbanker=e},setOffline:function(e){this._isOffline=e,this.offline&&(this.offline.node.active=this._isOffline&&null!=this._userId)},setChat:function(e){this.chat&&(this.node.x>0?(this.chat.node.x=-75,this.chat.node.anchorX=1,this.chat.node.getChildByName("lbl_msg").anchorX=1,this.chat.node.getChildByName("bg_left").active=!1,this.chat.node.getChildByName("bg_right").active=!0):(this.chat.node.x=75,this.chat.node.anchorX=0,this.chat.node.getChildByName("lbl_msg").anchorX=0,this.chat.node.getChildByName("bg_left").active=!0,this.chat.node.getChildByName("bg_right").active=!1),this.emoji.node.active=!1,this.chat.node.active=!0,this.chat.getComponent(cc.Label).string=e,this.chat.node.getChildByName("lbl_msg").getComponent(cc.Label).string=e,this._lastChatTime=3)},setMultiples:function(e){if(!e)return this.multiples.getComponent(cc.Label).string="",void(this.multiples.node.active=!1);(cc.log(this._userName+", multiples: "+e),this.multiples.node.active=!0,this.multiples)&&(this.node.x>0?(this.multiples.node.x=-100,this.multiples.node.anchorX=1):(this.multiples.node.x=100,this.multiples.node.anchorX=0),this.multiples.getComponent(cc.Label).string=e,this.multiples.node.scale=.1,this.multiples.node.active=!0,this.multiples.node.runAction(cc.scaleTo(.3,1.5)))},setQuickVoice:function(e){1==this._sex?th.audioManager.playSFX("chat/man/Speak/M_"+e):th.audioManager.playSFX("chat/women/Speak/W_"+e)},setEmoji:function(e){if(this.emoji){this.chat.node.active=!1,this.emoji.node.active=!0;var t=cc.textureCache.addImage(cc.url.raw("resources/images/emoji/emoji"+e+".png"));this.emoji.node.getComponent(cc.Sprite).spriteFrame.setTexture(t),this._lastChatTime=3}},setInfo:function(e,t,n,o,c){this.setUserID(e),this._sex=c,e?(this.setUserName(t),this.setScore(n),this.setHeadImgUrl(o),this.userNode.active=!0,this.btnNull.node.active=!1):(this.setUserName("--"),this.setScore("--"),this.setHeadImgUrl(null),this.userNode.active=!1,this.btnNull.node.active=!0)},setCountdown:function(e){this._countdown=Math.max(0,e),this._lastCountdownTime=this._countdown,this.countdown.node.active=e>0},doBlink:function(){this.blink.node.active=!0,this.blink.node.scaleX=1,this.blink.node.scaleY=.9,this.blink.node.runAction(cc.sequence(cc.blink(.5,2),cc.callFunc(function(e){e.active=!1})))},update:function(e){this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0&&(this.chat.node.active=!1,this.emoji.node.active=!1)),this._lastCountdownTime>0&&(this._lastCountdownTime-=e,this.countdown.fillRange=this._lastCountdownTime/this._countdown,this._lastCountdownTime<0&&(this._lastCountdownTime=0,this._countdown=0,this.countdown.active=!1))}}),cc._RF.pop()},{}],WaitingConnection:[function(e,t,n){"use strict";cc._RF.push(t,"a72bdeeZb1Dvq/oXNZxwibM","WaitingConnection"),cc.Class({extends:cc.Component,properties:{target:cc.Node,lblContent:cc.Label},onLoad:function(){if(null==th)return null;th.wc=this,this.node.active=!1},start:function(){},update:function(e){this.target.rotation=this.target.rotation+90*e*2},show:function(e){this.node&&(this.node.x=0,this.node.y=0,this.node.active=!0),this.lblContent&&(this.lblContent.string=e||"")},hide:function(){this.node&&(this.node.active=!1)},onDestory:function(){th&&(th.wc=null)}}),cc._RF.pop()},{}],WebSocketManager:[function(e,t,n){"use strict";cc._RF.push(t,"cd3cdeY/i1G4q9ogKSoyNIL","WebSocketManager"),cc.Class({extends:cc.Component,properties:{dataEventHandler:null},dispatchEvent:function(e,t){this.dataEventHandler&&this.dataEventHandler.emit(e,t)},initHandlers:function(){var e=this;cc.log("==>WebSocketManager initHandlers"),th.ws.msgprefn=function(e){var t=e.result,n=e.result_message;return 0==t||(th.wc.hide(),th.alert.show("\u63d0\u793a",th.args.debug?n:"\u7cfb\u7edf\u7ef4\u62a4\u66f4\u65b0"),!1)},th.ws.addHandler("getToken",function(t){var n=t.data;cc.log("<<<===[getToken] WebSocketManager:",n),e.dispatchEvent("getToken",n),th.wc.show("\u6b63\u5728\u83b7\u751f\u6210\u7b7e\u540d..."),th.token=n.t;var o={operation:"makeSign",data:{timestamp:Date.parse(new Date)/1e3,token:n.t}};cc.log("===>>>[makeSign] WebSocketManager:",o),th.ws.send(JSON.stringify(o))}),th.ws.addHandler("makeSign",function(t){var n=t.data;cc.log("<<<===[makeSign] WebSocketManager:",n),e.dispatchEvent("makeSign",n),th.wc.show("\u6b63\u5728\u7528\u6237\u4fe1\u606f..."),th.sign=n.sign;var o={operation:"pullUserInfo",data:{timestamp:Date.parse(new Date)/1e3,token:th.token,sign:n.sign}};cc.log("===>>>[pullUserInfo] WebSocketManager:",o),th.ws.send(JSON.stringify(o))}),th.ws.addHandler("pullUserInfo",function(t){var n=t.data;cc.log("<<<===[pullUserInfo] WebSocketManager:",n),e.dispatchEvent("pullUserInfo",n),th.wc.show("\u6b63\u5728\u52a0\u8f7d\u6e38\u620f..."),Object.assign(th.myself,n),cc.director.loadScene("Hall",function(){th.wc.hide()})}),th.ws.addHandler("CreateRoom",function(t){var n=t.data;cc.log("<<<===[CreateRoom] WebSocketManager:",n),th.wc.show("\u6b63\u5728\u52a0\u8bf7\u6c42\u623f\u95f4\u6570\u636e..."),Object.assign(th.room,n),e.dispatchEvent("CreateRoom",n);var o={operation:"PrepareJoinRoom",account_id:th.myself.account_id,session:th.sign,data:{room_number:th.room.room_number}};cc.log("===>>>[PrepareJoinRoom] WebSocketManager:",o),th.ws.send(JSON.stringify(o))}),th.ws.addHandler("PrepareJoinRoom",function(t){var n=t.data;cc.log("<<<===[PrepareJoinRoom] WebSocketManager:",n),th.room=Object.assign(th.room,n),e.dispatchEvent("PrepareJoinRoom",n),th.wc.hide()}),th.ws.addHandler("JoinRoom",function(t){var n=t.data;cc.log("<<<===[JoinRoom] WebSocketManager:",n),Object.assign(th.room,n),th.initRoom(),th.getRoomCopyUrl();var o="nn"==th.gametype?"GameNN":"GameZJH";cc.director.loadScene(o,function(){th.wc.hide()}),e.dispatchEvent("JoinRoom",n)}),th.ws.addHandler("GuestRoom",function(t){var n=t.data;cc.log("<<<===[GuestRoom] WebSocketManager:",n),th.getRoomCopyUrl(),Object.assign(th.room,n);var o="nn"==th.gametype?"GameNN":"GameZJH";cc.director.loadScene(o,function(){th.wc.hide()}),e.dispatchEvent("GuestRoom",n)}),th.ws.addHandler("AllGamerInfo",function(t){var n=t.data;cc.log("<<<===[AllGamerInfo] WebSocketManager:",n),th.room.players=n,th.myself.isPlayer=n.findIndex(function(e){return e.account_id==th.myself.account_id})>-1,e.dispatchEvent("AllGamerInfo",n)}),th.ws.addHandler("AllGuestInfo",function(t){var n=t.data;cc.log("<<<===[AllGuestInfo] WebSocketManager:",n),th.room.guests=n,e.dispatchEvent("AllGuestInfo",n)}),th.ws.addHandler("UpdateGamerInfo",function(t){var n=t.data;cc.log("<<<===[UpdateGamerInfo] WebSocketManager:",n);var o=th.room.players.find(function(e){return e.account_id==n.account_id});o?(Object.assign(o,n),e.dispatchEvent("UpdateGamerInfo",o)):(th.room.players.push(n),e.dispatchEvent("UpdateGamerInfo",n))}),th.ws.addHandler("UpdateGuestInfo",function(t){var n=t.data;cc.log("<<<===[UpdateGuestInfo] WebSocketManager:",n);var o=th.getGuestById(n.account_id);o?(Object.assign(o,n),e.dispatchEvent("UpdateGuestInfo",o)):(th.room.guests.push(n),e.dispatchEvent("UpdateGuestInfo",n))}),th.ws.addHandler("UpdateAccountStatus",function(t){var n=t.data;cc.log("<<<===[UpdateAccountStatus] WebSocketManager:",n);var o=th.getPlayerById(n.account_id);o&&(Object.assign(o,n),cc.log("UpdateAccountStatus player:",o),e.dispatchEvent("UpdateAccountStatus",o))}),th.ws.addHandler("GameStart",function(t){cc.log("<<<===[GameStart] WebSocketManager:",t);var n=t.game_num,o=t.limit_time,c=t.data;th.room.game_num=n,th.room.limit_time=o,c.forEach(function(t){var n=th.getPlayerById(t.account_id);Object.assign(n,t),e.dispatchEvent("UpdateAccountStatus",n)}),e.dispatchEvent("GameStart",t)}),th.ws.addHandler("MyCards",function(t){var n=t.data;cc.log("<<<===[MyCards] WebSocketManager:",n);var o=th.getPlayerById(n.account_id);o.cards=n.cards,e.dispatchEvent("MyCards",o)}),th.ws.addHandler("StartBet",function(t){cc.log("<<<===[StartBet] WebSocketManager:",t),t.data.forEach(function(e){var t=th.getPlayerById(e.account_id);Object.assign(t,e)}),e.dispatchEvent("StartBet",t)}),th.ws.addHandler("UpdateAccountMultiples",function(t){var n=t.data;cc.log("<<<===[UpdateAccountMultiples] WebSocketManager:",n);var o=th.getPlayerById(n.account_id);o.multiples=n.multiples,e.dispatchEvent("UpdateAccountMultiples",o)}),th.ws.addHandler("StartShow",function(t){cc.log("<<<===[StartShow] WebSocketManager:",t),t.data.forEach(function(e){var t=th.getPlayerById(e.account_id);Object.assign(t,e)}),e.dispatchEvent("StartShow",t)}),th.ws.addHandler("UpdateAccountShow",function(t){var n=t.data;cc.log("<<<===[UpdateAccountShow] WebSocketManager:",n);var o=th.getPlayerById(n.account_id);Object.assign(o,n),e.dispatchEvent("UpdateAccountShow",o)}),th.ws.addHandler("Win",function(t){var n=t.data;cc.log("<<<===[Win] WebSocketManager:",n),Object.assign(th.room,n),e.dispatchEvent("Win",n)}),th.ws.addHandler("getScoreBoard",function(t){var n=t.data;cc.log("<<<===[getScoreBoard] WebSocketManager:",n),e.dispatchEvent("getScoreBoard",n)}),th.ws.addHandler("getScoreDetail",function(t){var n=t.data;cc.log("<<<===[getScoreDetail] WebSocketManager:",n),e.dispatchEvent("getScoreDetail",n)}),th.ws.addHandler("getCopyUrl",function(t){var n=t.data;cc.log("<<<===[getCopyUrl] WebSocketManager:",n),th.room.copyurl=n.url,e.dispatchEvent("getCopyUrl",n)})},connectGameServer:function(e,t){var n=this,o=e.ip,c=e.port,i=e.namespace;th.ws.close(),th.ws.ip=o,th.ws.port=c,th.ws.addr="ws://"+o+":"+c+"/"+i,th.gametype="nn",th.ws.connect(function(){n.dispatchEvent("game_connect_success"),t(),cc.log("===WebSocketManager \u8fde\u63a5\u6210\u529f:"+o+":"+c+"/"+i+"===")},function(){cc.log("===WebSocketManager \u8fde\u63a5\u5931\u8d25:"+o+":"+c+"/"+i+"==="),th.alert.show("\u63d0\u793a","\u8fde\u63a5\u5931\u8d25:"+o+":"+c+"/"+i)})}}),cc._RF.pop()},{}],WebSocket:[function(e,t,n){"use strict";cc._RF.push(t,"8b182TVaatK/p4c8JGIa9Ek","WebSocket");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.Class({extends:cc.Component,statics:{ip:null,port:null,addr:null,ws:null,handlers:{},fnDisconnect:null,isPinging:!1,lastSendTime:0,lastRecieveTime:0,delay:0,connected:!1,pingRef:null,checkRef:null,msgprefn:null,addHandler:function(e,t){if(cc.log("AddHandler ",e),this.handlers[e])cc.log("event:"+e+"' handler has been registered.");else{this.handlers[e]=function(n){"disconnect"!=e&&"string"==typeof n&&(n=JSON.parse(n)),t(n)}}},connect:function(e,t){var n=this;cc.log("connect to "+this.addr),this.ws=new WebSocket(this.addr),this.ws.onopen=function(t){cc.log("WebSocket instance onopen.",n.ws),n.ws.connected=!0,e(t.data),n.heartbeat()},this.ws.onmessage=function(e){n.lastRecieveTime=Date.now(),n.delay=n.lastRecieveTime-n.lastSendTime;var t=e.data;if("@"!==t){var o=JSON.parse(t),c=!0;n.msgprefn&&(c=n.msgprefn(o)),c&&Reflect.has(n.handlers,o.operation)?n.handlers[o.operation](o):cc.log("<<<===[\u672a\u5904\u7406\u7684]\uff1a",o)}},this.ws.onerror=function(e){cc.log("WebSocket instance error."),t(e)};this.ws.onclose=function(e){cc.log("WebSocket instance closed."),n.ws.connected=!1,n.isPinging=!1}},heartbeat:function(){var e=this;this.lastRecieveTime=Date.now(),this.isPinging||(this.isPinging=!0,cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("cc.game.EVENT_HIDE"),e.ping()}),this.pingRef=setInterval(function(){e.ws&&e.ping()},2e3),this.checkRef=setInterval(function(){e.ws&&Date.now()-e.lastRecieveTime>1e4&&e.close()},1e3))},close:function(){clearInterval(this.pingRef),clearInterval(this.checkRef),this.ws&&this.ws.connected&&(this.ws.connected=!1,this.ws.close()),this.fnDisconnect&&(this.fnDisconnect(),this.fnDisconnect=null)},send:function(e){this.ws&&this.ws.connected&&(e&&"object"==(void 0===e?"undefined":o(e))&&JSON.stringify(e),this.ws.send(e))},ping:function(){this.ws&&(this.lastSendTime=Date.now(),this.send("@"))}}});cc._RF.pop()},{}],Zhanji:[function(e,t,n){"use strict";cc._RF.push(t,"e12c4RB1GBDZoKMb7DwPJUA","Zhanji"),cc.Class({extends:cc.Component,properties:{},onTypeClicked:function(e,t){th.audioManager.playSFX("click.mp3"),cc.log("\u6218\u7ee9\u7c7b\u522b\u9009\u62e9:",t)},onGameClicked:function(e,t){th.audioManager.playSFX("click.mp3"),cc.log("\u6218\u7ee9\u6e38\u620f\u9009\u62e9:",t)}}),cc._RF.pop()},{}]},{},["AudioManager","Global","PokerManager","WebSocket","WebSocketManager","Alert","AppStart","CreateNN","CreateZJH","GameNN","GameZJH","Hall","JoinOrLook","Message","Seat","WaitingConnection","Zhanji"]);