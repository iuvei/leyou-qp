{"version":3,"sources":["AppStart.js"],"names":["cc","Class","extends","Component","properties","lblLoadingMsg","Label","_index","_scheduleId","onLoad","th","initEventHandlers","log","webSocketManager","dataEventHandler","node","on","unschedule","start","connectApiServer","ip","port","namespace","schedule","x","dian","padStart","string","onDestroy","update","dt"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,uBAAeL,GAAGM,KADV;AAERC,gBAAQ,IAFA;AAGRC,qBAAa;AAHL,KAHP;;AASLC,YAAQ,kBAAW;AACf,aAAKF,MAAL,GAAc,CAAd;AACA,YAAIG,MAAM,IAAV,EAAgB;AACZ;AACH;AACD,aAAKC,iBAAL;AACH,KAfI;AAgBLA,qBAhBK,+BAgBe;AAAA;;AAChBX,WAAGY,GAAH,CAAO,8BAAP;AACAF,WAAGG,gBAAH,CAAoBC,gBAApB,GAAuC,KAAKC,IAA5C;AACA,aAAKA,IAAL,CAAUC,EAAV,CAAa,qBAAb,EAAoC,YAAM;AACtChB,eAAGY,GAAH,CAAO,oCAAP;AACA,kBAAKK,UAAL,CAAgB,MAAKT,WAArB;AACH,SAHD;AAIH,KAvBI;;AAwBLU,WAAO,iBAAW;AAAA;;AACdR,WAAGG,gBAAH,CAAoBM,gBAApB,CAAqC;AACjCC,gBAAI,eAD6B;AAEjCC,kBAAM,KAF2B;AAGjCC,uBAAW;AAHsB,SAArC;AAKA;;AAEA,aAAKd,WAAL,GAAmB,KAAKe,QAAL,CAAc,YAAM;AACnC,gBAAIC,IAAI,OAAKjB,MAAL,GAAc,CAAtB;AACA,gBAAIkB,OAAO,GAAGC,QAAH,CAAYF,IAAI,CAAhB,EAAmB,GAAnB,CAAX;AACA,cAAE,OAAKjB,MAAP;AACA,mBAAKF,aAAL,CAAmBsB,MAAnB,kDAAsCF,IAAtC;AACH,SALkB,EAKhB,IALgB,CAAnB;AAMH,KAtCI;AAuCLG,eAAW,qBAAW;AAClB5B,WAAGY,GAAH,CAAO,oBAAP;AACA,aAAKK,UAAL,CAAgB,KAAKT,WAArB;AACH,KA1CI;AA2CLqB,YAAQ,gBAASC,EAAT,EAAa,CAAE;AA3ClB,CAAT","file":"AppStart.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        lblLoadingMsg: cc.Label,\n        _index: null,\n        _scheduleId: null\n    },\n\n    onLoad: function() {\n        this._index = 0;\n        if (th == null) {\n            return;\n        }\n        this.initEventHandlers();\n    },\n    initEventHandlers() {\n        cc.log(\"AppStart initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n        this.node.on(\"api_connect_success\", () => {\n            cc.log(\"<<<===AppStart api_connect_success\");\n            this.unschedule(this._scheduleId);\n        });\n    },\n    start: function() {\n        th.webSocketManager.connectApiServer({\n            ip: \"47.96.177.207\",\n            port: 10000,\n            namespace: \"api\"\n        });\n        //cc.director.loadScene(\"Hall\");\n\n        this._scheduleId = this.schedule(() => {\n            let x = this._index % 6;\n            let dian = \"\".padStart(x + 1, \".\");\n            ++this._index;\n            this.lblLoadingMsg.string = `正在连接服务器${dian}`;\n        }, 0.25);\n    },\n    onDestroy: function() {\n        cc.log(\"Appstart onDestroy\");\n        this.unschedule(this._scheduleId);\n    },\n    update: function(dt) {}\n});\n"]}