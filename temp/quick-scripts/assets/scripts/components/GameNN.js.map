{"version":3,"sources":["GameNN.js"],"names":["cc","Class","extends","Component","properties","seatPrefab","Prefab","baseNode","Node","nodeSeats","componentSeats","nodePokers","nodeAmins","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnBankerMtp1","Button","btnBankerMtp2","btnBankerMtp4","btnPlayerMtp1","btnPlayerMtp2","btnPlayerMtp3","btnPlayerMtp4","btnQiang","btnBuqiang","btnReady","btnShow","btnXiazhuang","btnShangzhuang","btnBuShangzhuang","sprWaitBet","Sprite","sprPlayerBet","sprQiangzhuang","sprReady","sprWaitPlayerBet","sprWaitShow","sprWaitNext","spriteClickLookPai","coinPrefab","resultNode","resultDeatilNode","resultItemPrefab","resultDetailItemPrefab","resultDetailSonItemPrefab","btnCaptureScreen","btnTest","holdTimeEclipse","holdClick","_countdownEndTime","_isPlay","onLoad","th","log","initEventHandlers","initView","node","on","emit","onChanganbaocunClicked","onEnable","start","webSocketManager","dataEventHandler","player","initSingleSeat","account_id","myself","refreshOptions","data","initRoomInfo","setCountdown","limit_time","bankerMode","room","banker_mode","showPokers","forEach","oldPlayer","getPlayerById","grab_array","index","scheduleOnce","getLocalIndex","serial_num","doBlink","length","getBankerPlayer","nickname","setBanker","delayTime","getMyselfPlayer","cards","pokers","children","showCard","needLookCount","poker","pokerId","idx","showOpenPokerAnim","item","nodePoker","nodeSeat","hasNiu","getNiuIndex","card_type","combo_point","combo_array","isMyself","getMyselfLocalIndex","firstX","x","firstY","offset","runAction","sequence","moveTo","v2","callFunc","target","addChild","pokerManager","getPokerSpriteById","y","showNiuType","removeAllChildren","tagerPalyer","winner_array","seatxy","getSeatXY","tx","ty","audioManager","playSFX","loser_array","loser","i","coin","instantiate","easing","easeSineOut","removeFromParent","loserCount","filter","winer","winerCount","winner","offsetCount","score_board","account_ids","Object","keys","account_score","setScoreAnim","clear","players","is_banker","game_num","total_num","wc","show","toConnectApi","hide","active","balance_scoreboard","room_number","time","room_creator","scoreboard","getChildByName","getComponent","string","itemNode","name","score","headImg","loader","load","url","avatar","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","create_time","rule_text","resultDetailNode","balance_board","player_array","player_cards","roundNode","playersNode","playerNode","chip","card_type_str","headimg","pokerNode","card","alert","onResultCloseClicked","args","room_id","gametype","director","loadScene","onZhanjiseachClicked","params","operation","session","sign","num2","num","ws","send","JSON","stringify","onResultDetailCloseClicked","niuType","getNiuSprite","scale","scaleTo","niuIndex","mp3Name","initSeat","initMtpBtn","room_status","account_status","bet_type_arr","mtp1","mtp2","mtp3","mtp4","acitve","multiples","isPlayer","noBanker","isZYQZ","isMPQZ","isGDZJ","isShowBtnReady","isShowQiangBrank","isShowSelectMultiples","isShowText","isShowClickLookPai","base_score","seatsxy","seat","seatIndex","push","setInfo","headimgurl","sex","setOffline","online_status","setScore","setReady","setMultiples","mtp","onCopyCliecked","targer","result","webCopyString","copyurl","msg","onBankerMultiplesClicked","value","Number","is_grab","onBuqiangClicked","onReadyClicked","onPlayerMultiplesClicked","onShowClicked","onBackClicked","onChatClicked","onMoreClicked","setChat","setUserName","onThemeClicked","onLookClicked","onPokerClicked","onXiazhuang","traget","seatIndexs","myLocalIndex","pokerIds","Array","fill","j","basePoker","realPokersIds","pi","realPokerId","position","convertToNodeSpaceAR","clickEventHandler","EventHandler","component","handler","customEventData","clickEvents","basePokers","delay","spawn","val","content","Date","now","_alertStartTime","update","dt","miao","Math","ceil","createFrom","connectGameServer","ip","port","namespace"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        seatPrefab: cc.Prefab,\n\n        baseNode: cc.Node,\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n        nodeAmins: cc.Node, //用来播放动画\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n\n        btnBankerMtp1: cc.Button,\n        btnBankerMtp2: cc.Button,\n        btnBankerMtp4: cc.Button,\n\n        btnPlayerMtp1: cc.Button,\n        btnPlayerMtp2: cc.Button,\n        btnPlayerMtp3: cc.Button,\n        btnPlayerMtp4: cc.Button,\n\n        btnQiang: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n        btnShow: cc.Button,\n\n        btnXiazhuang: cc.Button,\n        btnShangzhuang: cc.Button,\n        btnBuShangzhuang: cc.Button,\n\n        sprWaitBet: cc.Sprite,\n        sprPlayerBet: cc.Sprite,\n        sprQiangzhuang: cc.Sprite,\n        sprReady: cc.Sprite,\n        sprWaitPlayerBet: cc.Sprite,\n        sprWaitShow: cc.Sprite,\n        sprWaitNext: cc.Sprite,\n\n        spriteClickLookPai: cc.Sprite, //点击看牌\n\n        coinPrefab: cc.Prefab,\n\n        resultNode: cc.Node,\n        resultDeatilNode: cc.Node,\n        resultItemPrefab: cc.Prefab,\n        resultDetailItemPrefab: cc.Prefab,\n        resultDetailSonItemPrefab: cc.Prefab,\n\n        btnCaptureScreen: cc.Button,\n        btnTest: cc.Button,\n\n        holdTimeEclipse: 0, //用来检测长按\n        holdClick: false,\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true //用来播放倒计时声音\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n        //自由抢庄需要看牌两次\n        this.initEventHandlers();\n        this.initView();\n\n        this.btnCaptureScreen.node.on(\"touchstart\", event => {\n            this.holdClick = true;\n            this.holdTimeEclipse = 0;\n        });\n        this.btnCaptureScreen.node.on(\"touchend\", event => {\n            this.holdClick = false;\n            if (this.holdTimeEclipse >= 30) {\n                this.node.emit(\"captureScreenLongClicked\");\n            }\n            this.holdTimeEclipse = 0;\n        });\n\n        this.node.on(\"captureScreenLongClicked\", data => {\n            this.onChanganbaocunClicked();\n        });\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"JoinRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.myself.account_id) {\n                this.refreshOptions();\n                this.initSingleSeat(player);\n            }\n        });\n        this.node.on(\"GameStart\", data => {\n            cc.log(\"<<<===[GameStart] GmaeNN\", data);\n            this.initRoomInfo();\n            this.setCountdown(data.limit_time, \"游戏开始了\");\n            this.refreshOptions();\n        });\n        this.node.on(\"MyCards\", player => {\n            cc.log(\"<<<===[MyCards] GmaeNN\", player);\n            let bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 2 ||\n                bankerMode == 3 ||\n                bankerMode == 4\n            ) {\n                this.showPokers();\n            }\n            this.refreshOptions();\n        });\n\n        //开始游戏,闲家选倍数\n        this.node.on(\"StartBet\", data => {\n            cc.log(\"<<<===[StartBet] GmaeNN:\", data);\n            this.setCountdown(data.limit_time, \"投注开始了\");\n            //抢庄account_ID数据\n            //\"grab_array\": [\"31\", \"18\"],\n            data.data.forEach(player => {\n                const oldPlayer = th.getPlayerById(player.account_id);\n                this.initSingleSeat(oldPlayer);\n            });\n\n            //TODO\n            cc.log(\"TODO抢庄效果\", data.grab_array);\n            data.grab_array.forEach((account_id, index) => {\n                this.scheduleOnce(() => {\n                    const player = th.getPlayerById(account_id);\n                    const index = th.getLocalIndex(player.serial_num - 1);\n                    this.componentSeats[index].doBlink();\n                }, index * 0.5);\n            });\n            cc.log(\n                `抢庄人数${data.grab_array.length} 总用时：${data.grab_array\n                    .length * 0.5}`\n            );\n            this.scheduleOnce(() => {\n                data.data.forEach(player => {\n                    const oldPlayer = th.getPlayerById(player.account_id);\n                    this.initSingleSeat(oldPlayer);\n                });\n                const player = th.getBankerPlayer();\n                const index = th.getLocalIndex(player.serial_num - 1);\n                cc.log(\n                    `庄 ${player.nickname} player.serial_num:${\n                        player.serial_num\n                    }, index: ${index}`\n                );\n                this.componentSeats[index].setBanker(true);\n                //固定庄家 些时发牌\n                if (th.room.banker_mode == 5) {\n                    this.showPokers();\n                }\n            }, data.grab_array.length * 0.5);\n\n            let delayTime = data.grab_array.length * 0.5 + 1;\n            cc.log(`显示倍数按钮延时：${delayTime}`);\n\n            this.scheduleOnce(() => {\n                this.refreshOptions();\n            }, delayTime);\n        });\n\n        //闲家选倍数 通知\n        this.node.on(\"UpdateAccountMultiples\", player => {\n            cc.log(\"<<<===[UpdateAccountMultiples] GmaeNN:\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.myself.account_id) {\n                this.refreshOptions();\n            }\n        });\n\n        //显示牌\n        this.node.on(\"StartShow\", data => {\n            cc.log(\"<<<===[StartShow] GmaeNN:\", data);\n\n            this.refreshOptions();\n            //1 自由抢庄\n\n            //显示我自己的牌\n            let player = th.getMyselfPlayer();\n            let cards = player.cards;\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let pokers = this.nodePokers[index].children;\n            let showCard = 5 - th.myself.needLookCount;\n            cc.log(\"显示我自己的牌:\", showCard, player, cards);\n            //3=转庄牛牛, 2 = 明牌抢庄 5 = 固定庄家 1 = 自由抢庄 4 = 通比牛牛\n            const bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 3 ||\n                bankerMode == 4 ||\n                bankerMode == 5\n            ) {\n                //自由抢庄 通比牛牛 固定庄家 转庄牛牛\n                pokers.forEach((poker, index) => {\n                    poker.pokerId = cards[index];\n                });\n                if (th.room.banker_mode != 4) {\n                    //通比牛牛通比牛牛不用开牌，因为mycard直接把牌发来了\n                    pokers.forEach((poker, idx) => {\n                        if (idx >= showCard) return;\n                        this.showOpenPokerAnim(poker);\n                    });\n                }\n            } else if (bankerMode == 2) {\n                //明牌抢庄\n                pokers.forEach((poker, index) => {\n                    if (index >= showCard) {\n                        poker.pokerId = cards[index];\n                    }\n                });\n            }\n\n            this.setCountdown(data.limit_time, \"摊牌开始了\");\n\n            data.data.forEach(item => {\n                let player = th.getPlayerById(item.account_id);\n                this.initSingleSeat(player);\n            });\n        });\n\n        //摊牌\n        this.node.on(\"UpdateAccountShow\", player => {\n            cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n            const index = th.getLocalIndex(player.serial_num - 1);\n            const nodePoker = this.nodePokers[index];\n            const nodeSeat = this.nodeSeats[index];\n            let pokers = nodePoker.children;\n\n            // 大于0为有牛\n            let hasNiu =\n                th.getNiuIndex(player.card_type, player.combo_point) > 0;\n            let cards = hasNiu > 0 ? player.combo_array : player.cards;\n            //如果不是自己\n            //(isMyself ? 100 : seat.x > 0 ? -210 : 90) + basePokers.y +i * (isMyself ? 110 : 30),\n            // isMyself ? -25 : 0,\n            let isMyself = th.getMyselfLocalIndex() == index;\n            let firstX = isMyself ? 100 : nodeSeat.x > 0 ? -210 : 90;\n            let firstY = isMyself ? -25 : 0;\n            let offset = isMyself ? 110 : 30;\n            pokers.forEach((poker, index) => {\n                poker.runAction(\n                    cc.sequence(\n                        cc.moveTo(0.3, cc.v2(firstX, firstY)),\n                        cc.callFunc(target => {\n                            target.addChild(\n                                th.pokerManager.getPokerSpriteById(cards[index])\n                            );\n                        }),\n                        cc.moveTo(\n                            0.3,\n                            cc.v2(\n                                firstX +\n                                    nodePoker.y +\n                                    index * offset +\n                                    (hasNiu && index > 2 ? 15 : 0),\n                                firstY\n                            )\n                        )\n                    )\n                );\n            });\n            this.showNiuType(player);\n        });\n\n        //结果\n        this.node.on(\"Win\", data => {\n            cc.log(\"<<<===[Win] GmaeNN:\", data);\n            //赢的人\n            //let win = data.winner_array;\n            //输的人\n            //let lose = data.loser_array;\n            this.scheduleOnce(() => {\n                this.nodeAmins.removeAllChildren();\n\n                cc.log(\"TODO 飞筹码效果\");\n                //通比牛牛先飞向最大的人，否则先飞向庄\n                let tagerPalyer =\n                    th.room.banker_mode == 4\n                        ? th.getPlayerById(data.winner_array[0].account_id)\n                        : th.getBankerPlayer();\n\n                const seatxy = th.getSeatXY();\n                const index = th.getLocalIndex(tagerPalyer.serial_num - 1);\n                let [tx, ty] = seatxy[index];\n                //输得的人先飞向tagerPalyer\n                th.audioManager.playSFX(\"coin.mp3\");\n                data.loser_array.forEach(loser => {\n                    if (loser.account_id != tagerPalyer.account_id) {\n                        const player = th.getPlayerById(loser.account_id);\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        let [x, y] = seatxy[index];\n                        for (let i = 0; i < 5; i++) {\n                            let coin = cc.instantiate(this.coinPrefab);\n                            coin.x = x;\n                            coin.y = y;\n                            this.nodeAmins.addChild(coin);\n                            coin.runAction(\n                                cc.sequence(\n                                    cc.delayTime(0.1 + i * 0.05),\n                                    cc\n                                        .moveTo(0.5, cc.v2(tx, ty))\n                                        .easing(cc.easeSineOut()),\n                                    cc.callFunc(target => {\n                                        target.removeFromParent();\n                                    })\n                                )\n                            );\n                        }\n                    }\n                });\n                let loserCount = data.loser_array.filter(\n                    loser => loser.account_id != tagerPalyer.account_id\n                ).length;\n                //this.nodeAmins.removeAllChildren();\n                this.scheduleOnce(() => {\n                    //tagerPalyer输得的人先飞向赢的人\n                    th.audioManager.playSFX(\"coin.mp3\");\n                    data.winner_array.forEach(winer => {\n                        if (winer.account_id != tagerPalyer.account_id) {\n                            const player = th.getPlayerById(winer.account_id);\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            let [x, y] = seatxy[index];\n                            for (let i = 0; i < 5; i++) {\n                                let coin = cc.instantiate(this.coinPrefab);\n                                coin.x = tx;\n                                coin.y = ty;\n                                this.nodeAmins.addChild(coin);\n                                coin.runAction(\n                                    cc.sequence(\n                                        cc.delayTime(0.1 + i * 0.05),\n                                        cc\n                                            .moveTo(0.5, cc.v2(x, y))\n                                            .easing(cc.easeSineOut()),\n                                        cc.callFunc(target => {\n                                            target.removeFromParent();\n                                        })\n                                    )\n                                );\n                            }\n                        }\n                    });\n                }, 0.1 + 0.5 + loserCount * 0.05);\n\n                let winerCount = data.winner_array.filter(\n                    winner => winner.account_id != tagerPalyer.account_id\n                ).length;\n\n                let offsetCount = loserCount + winerCount;\n                cc.log(\"==================offsetCount:\", offsetCount);\n\n                this.scheduleOnce(() => {\n                    let score_board = data.score_board;\n                    let account_ids = Object.keys(score_board);\n                    cc.log(\"AccountIds:\", account_ids);\n                    account_ids.forEach(account_id => {\n                        const player = th.getPlayerById(account_id);\n                        player.account_score = score_board[account_id];\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        this.componentSeats[index].setScoreAnim(\n                            player.account_score\n                        );\n                    });\n                }, 0.1 + 0.5 + offsetCount * 0.05 + 0.5);\n\n                this.scheduleOnce(() => {\n                    th.clear();\n                    th.room.players.forEach(player => {\n                        const index = th.getLocalIndex(player.serial_num - 1);\n                        this.componentSeats[index].setBanker(player.is_banker);\n                    });\n                    this.nodePokers.forEach(node => {\n                        node.removeAllChildren();\n                    });\n                    th.room.players.forEach(player => {\n                        this.initSingleSeat(player);\n                    });\n                    this.refreshOptions();\n                    if (th.room.game_num == th.room.total_num) {\n                        cc.log(\"done........................\");\n                        th.wc.show(\"下在获取战绩\");\n                        this.toConnectApi();\n                    }\n                }, 0.1 + 0.5 + offsetCount * 0.05 + 3);\n            }, 1);\n        });\n\n        //战绩\n        this.node.on(\"getScoreBoard\", data => {\n            cc.log(\"<<<===[getScoreBoard] GameNN:\", data);\n            th.wc.hide();\n            this.resultNode.x = 0;\n            this.resultNode.y = 0;\n            this.resultNode.active = true;\n            let {\n                room_number,\n                time,\n                total_num,\n                room_creator,\n                scoreboard\n            } = data.balance_scoreboard;\n\n            this.resultNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = time;\n\n            this.resultNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = total_num + \"局\";\n\n            this.resultNode\n                .getChildByName(\"lbl_banker\")\n                .getComponent(\"cc.Label\").string = \"房主：\" + room_creator;\n\n            let itemNode = this.resultNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n            itemNode.removeAllChildren();\n            scoreboard.forEach((player, index) => {\n                let item = cc.instantiate(this.resultItemPrefab);\n                item.getChildByName(\"lbl_id\").getComponent(\"cc.Label\").string =\n                    \"ID：\" + player.account_id;\n                item\n                    .getChildByName(\"lbl_name\")\n                    .getComponent(\"cc.Label\").string = player.name;\n                item\n                    .getChildByName(\"lbl_score\")\n                    .getComponent(\"cc.Label\").string = player.score;\n\n                let headImg = item\n                    .getChildByName(\"headImg\")\n                    .getComponent(\"cc.Sprite\");\n                cc.loader.load(\n                    {\n                        url: player.avatar,\n                        type: \"jpg\"\n                    },\n                    (err, texture) => {\n                        if (!err) {\n                            let headSpriteFrame = new cc.SpriteFrame(\n                                texture,\n                                cc.Rect(0, 0, texture.width, texture.height)\n                            );\n                            headImg.spriteFrame = headSpriteFrame;\n                            headImg.node.setScale(2 - texture.width / 120);\n                        }\n                    }\n                );\n\n                if (index == 0) {\n                    item.getChildByName(\"dayinjia\").active = true;\n                }\n                itemNode.addChild(item);\n            });\n            //Object.assign(th.room, data);\n        });\n\n        //战绩明细\n        this.node.on(\"getScoreDetail\", data => {\n            cc.log(\"<<<===[getScoreDetail] GameNN:\", data);\n            //Object.assign(th.room, data);\n            th.wc.hide();\n            this.resultDeatilNode.x = 0;\n            this.resultDeatilNode.y = 0;\n            this.resultDeatilNode.active = true;\n            let { room_number, create_time, game_num, rule_text } = data;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = create_time;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = game_num + \"局\";\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_info\")\n                .getComponent(\"cc.Label\").string = rule_text;\n\n            let resultDetailNode = this.resultDeatilNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n\n            //加载头像\n            let players = {};\n            data.balance_board.forEach(item => {\n                players[item.name] = item;\n            });\n\n            data.player_array.forEach(player => {\n                let { game_num, total_num, player_cards } = player;\n                let roundNode = cc.instantiate(this.resultDetailItemPrefab);\n                roundNode.height = 100 + data.balance_board.length * 100;\n                roundNode\n                    .getChildByName(\"lbl_round\")\n                    .getComponent(\n                        \"cc.Label\"\n                    ).string = `${game_num}/${total_num}`;\n                let playersNode = roundNode.getChildByName(\"players\");\n                player_cards.forEach(item => {\n                    let playerNode = cc.instantiate(\n                        this.resultDetailSonItemPrefab\n                    );\n\n                    playerNode\n                        .getChildByName(\"lbl_id\")\n                        .getComponent(\"cc.Label\").string =\n                        players[item.name].account_id + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_name\")\n                        .getComponent(\"cc.Label\").string = item.name + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_mtp\")\n                        .getComponent(\"cc.Label\").string = item.chip + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_score\")\n                        .getComponent(\"cc.Label\").string = item.score + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_niu\")\n                        .getComponent(\"cc.Label\").string =\n                        item.card_type_str + \"\";\n                    playerNode.getChildByName(\"icon_banker\").active =\n                        item.is_banker == 1;\n\n                    let headimg = playerNode\n                        .getChildByName(\"headImg\")\n                        .getComponent(\"cc.Sprite\");\n\n                    cc.loader.load(\n                        {\n                            url: players[item.name].avatar,\n                            type: \"jpg\"\n                        },\n                        (err, texture) => {\n                            if (!err) {\n                                let headSpriteFrame = new cc.SpriteFrame(\n                                    texture,\n                                    cc.Rect(0, 0, texture.width, texture.height)\n                                );\n                                headimg.spriteFrame = headSpriteFrame;\n                                headimg.node.setScale(2 - texture.width / 120);\n                            }\n                        }\n                    );\n\n                    let pokerNode = playerNode.getChildByName(\"pokers\");\n                    item.player_cards.forEach(card => {\n                        pokerNode.addChild(\n                            th.pokerManager.getPokerSpriteById(card)\n                        );\n                    });\n                    playersNode.addChild(playerNode);\n                });\n                resultDetailNode.addChild(roundNode);\n            });\n        });\n\n        this.node.on(\"getCopyUrl\", data => {\n            cc.log(\"<<<===[getCopyUrl] GameNN:\", data);\n            /*\n            let result = th.webCopyString(data.url);\n            cc.log(\"address:\", data.url);\n            th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n            */\n        });\n\n        //解散房间\n        this.node.on(\"BreakRoom\", data => {\n            cc.log(\"<<<===[BreakRoom] GameNN:\", data);\n            const player = th.getMyselfPlayer();\n            if (player.is_banker == 1) {\n                this.toConnectApi();\n            } else {\n                th.alert.show(\n                    \"提示\",\n                    \"庄家主动下庄，点击确定查看结算。\",\n                    () => {\n                        this.toConnectApi();\n                    },\n                    true\n                );\n            }\n            //Object.assign(th.room, data);\n        });\n    },\n    onResultCloseClicked() {\n        th.wc.show(\"正在返回大厅。。。\");\n        th.args = {};\n        th.room.room_id = null;\n        th.room.room_number = null;\n        th.gametype = null;\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onZhanjiseachClicked() {\n        const params = {\n            operation: \"getScoreDetail\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                type: 1,\n                num2: 10291,\n                num: th.room.room_number\n            }\n        };\n        cc.log(\"===>>>[getScoreDetail] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onResultDetailCloseClicked() {\n        this.resultDeatilNode.active = false;\n    },\n    onChanganbaocunClicked() {\n        cc.log(\"长按保存....\");\n    },\n    showNiuType(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodeSeat = this.nodeSeats[index];\n        const nodePoker = this.nodePokers[index];\n        if (player.account_id != th.myself.account_id) {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = nodeSeat.x > 0 ? -160 : 150;\n            niuType.y = -20;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.2));\n        } else {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = 310;\n            niuType.y = 85;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.5));\n        }\n        let niuIndex = th.getNiuIndex(player.card_type, player.combo_point);\n        let mp3Name = \"bull\" + niuIndex + \".m4a\";\n        th.audioManager.playSFX(mp3Name);\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.spriteClickLookPai.node.active = false;\n        this.initRoomInfo();\n        this.initSeat();\n        this.initMtpBtn();\n        this.refreshOptions();\n        cc.log(\"InitView:\", th.room);\n        cc.log(\"InitView:\", th.myself);\n        const { room_status, banker_mode, account_status } = th.room;\n        cc.log(\"room_status, banker_mode :\", room_status, banker_mode);\n        if (room_status == 2) {\n            if (\n                banker_mode == 1 ||\n                banker_mode == 2 ||\n                banker_mode == 3 ||\n                banker_mode == 4\n            ) {\n                //是自由抢庄或者明牌抢庄直接发牌\n                //通比牛牛也直接发\n                //转庄牛牛也直接发\n                cc.log(\"自由抢庄或者明牌抢庄直接发牌\");\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            } else if (banker_mode == 5 && account_status >= 6) {\n                cc.log(\"固定庄家发牌\");\n                //固定庄家闲家下注时才发牌\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            }\n        }\n        //是不是有庄\n        let player = th.getBankerPlayer();\n        if (player) {\n            let index = th.getLocalIndex(player.serial_num - 1);\n            this.componentSeats[index].setBanker(true);\n        }\n    },\n    initMtpBtn() {\n        let [mtp1, mtp2, mtp3, mtp4] = th.room.bet_type_arr;\n        this.btnPlayerMtp1.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp1 + \"倍\";\n        this.btnPlayerMtp2.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp2 + \"倍\";\n        this.btnPlayerMtp3.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp3 + \"倍\";\n        this.btnPlayerMtp4.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp4 + \"倍\";\n        this.btnBankerMtp1.node.acitve = false;\n        this.btnBankerMtp2.node.acitve = false;\n        this.btnBankerMtp4.node.acitve = false;\n        this.btnPlayerMtp1.node.active = false;\n        this.btnPlayerMtp2.node.active = false;\n        this.btnPlayerMtp3.node.active = false;\n        this.btnPlayerMtp4.node.active = false;\n\n        this.btnPlayerMtp1.node.multiples = mtp1;\n        this.btnPlayerMtp2.node.multiples = mtp2;\n        this.btnPlayerMtp3.node.multiples = mtp3;\n        this.btnPlayerMtp4.node.multiples = mtp4;\n\n        this.btnQiang.node.active = false;\n        this.btnBuqiang.node.active = false;\n        this.btnReady.node.active = false;\n        this.btnShow.node.active = false;\n\n        this.btnXiazhuang.node.active = false;\n        this.btnShangzhuang.node.active = false;\n        this.btnBuShangzhuang.node.active = false;\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            this.nodeOptions.active = true;\n\n            /*\n            banker_mode: 1,\n            1 = 自由抢庄     抢与不抢（没有倍数）都不抢或者都抢随机一个    选倍数（不是庄选）    开牌\n            2 = 明牌抢庄\n            3 = 转庄牛牛,牛牛上庄\n            4 = 通比牛牛\n            5 = 固定庄家 \n            */\n            let noBanker = th.getBankerPlayer() == null ? true : false;\n            const banker_mode = th.room.banker_mode;\n            const isZYQZ = banker_mode == 1;\n            const isMPQZ = banker_mode == 2;\n            const isGDZJ = banker_mode == 5;\n\n            let player = th.getMyselfPlayer();\n            //准备按钮\n            let isShowBtnReady =\n                (player.account_status == 0 || player.account_status == 1) &&\n                th.room.room_status == 1;\n            this.btnReady.node.active = isShowBtnReady;\n            this.sprReady.node.active = isShowBtnReady;\n\n            this.btnXiazhuang.node.active =\n                isShowBtnReady &&\n                isGDZJ &&\n                th.room.room_status == 1 &&\n                !noBanker &&\n                player.is_banker == 1 &&\n                th.room.game_num >= 3;\n\n            //抢庄按钮\n            let isShowQiangBrank =\n                player.account_status == 3 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnBankerMtp1.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp2.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp4.node.active = isShowQiangBrank && isMPQZ;\n            this.btnQiang.node.active = isShowQiangBrank && isZYQZ;\n            this.btnBuqiang.node.active =\n                isShowQiangBrank && (isZYQZ || isMPQZ);\n            this.sprQiangzhuang.node.active = isShowQiangBrank;\n            //闲加倍数选择\n            let isShowSelectMultiples =\n                player.is_banker == 0 &&\n                player.account_status == 6 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                player.multiples == 0;\n            this.btnPlayerMtp1.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp2.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp3.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp4.node.active = isShowSelectMultiples;\n            this.sprWaitPlayerBet.node.active = isShowSelectMultiples;\n            //摊牌按钮\n            let isShowText =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount <= 0;\n            this.btnShow.node.active = isShowText;\n\n            let isShowClickLookPai =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount > 0;\n            this.spriteClickLookPai.node.active = isShowClickLookPai;\n            this.sprWaitShow.node.active = isShowClickLookPai || isShowText;\n\n            //上状不上庄按钮\n\n            this.btnShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker; //&&player.account_score>=th.room.bankerscore\n            this.btnBuShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker;\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            seat.seatIndex = i; //为座位编号\n            this.baseNode.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n        }\n        const players = th.room.players;\n        for (let i = 0; i < players.length; ++i) {\n            this.initSingleSeat(players[i]);\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == 1 ? false : true\n        );\n        /*\n        this.componentSeats[index].setBanker(\n            player.is_banker == 1 ? true : false\n        );\n        */\n        this.componentSeats[index].setScore(player.account_score);\n        this.componentSeats[index].setReady(player.account_status == 2);\n        if (th.room.banker_mode == 4) {\n            //通比牛牛没有庄\n            this.componentSeats[index].setMultiples(null);\n        } else {\n            if (player.account_status == 4) {\n                //不抢\n                this.componentSeats[index].setMultiples(\"n\");\n            } else if (player.account_status == 5) {\n                //抢庄\n                let mtp = player.multiples != 0 ? \"x\" + player.multiples : \"\";\n                this.componentSeats[index].setMultiples(\"y\" + mtp);\n            } else if (player.account_status == 6) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n                /*\n            //闲家倍数\n            if (player.is_banker == 1) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n            */\n            } else if (player.account_status == 7) {\n                //未摊牌\n                this.componentSeats[index].setMultiples(\n                    player.is_banker == 1 ? null : \"x\" + player.multiples\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n        }\n    },\n    onCopyCliecked: function(targer, data) {\n        /*\n        let address = `${th.href}?roomId=${th.room.room_number}&type=${\n            th.gametype\n        }`;\n        */\n        let result = th.webCopyString(th.room.copyurl);\n        cc.log(\"address:\", th.room.copyurl);\n        th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n    },\n    onBankerMultiplesClicked: function(targer, value) {\n        let multiples = 1;\n        if (Number(value) == 0) {\n            multiples = 1;\n            th.audioManager.playSFX(`robbanker.m4a`);\n        } else {\n            multiples = Number(value);\n            th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        }\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 1,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[GrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBuqiangClicked: function() {\n        th.audioManager.playSFX(\"nobanker.m4a\");\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 0,\n                multiples: 1\n            }\n        };\n        cc.log(\"===>>>[NoGrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n        const params = {\n            operation: \"ReadyStart\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ReadyStart] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onPlayerMultiplesClicked: function(targer, value) {\n        let multiples = targer.target.multiples;\n        th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        const params = {\n            operation: \"PlayerMultiples\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[PlayerMultiples] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onShowClicked: function(targer) {\n        cc.log(\"onPlayerMultiplesClicked:\");\n        const params = {\n            operation: \"ShowCard\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ShowCard] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onChatClicked(targer) {\n        /*\n        this.node.getChildByName(\"Poker_Ghost\")\n        .runAction(cc.sequence(cc.rotateBy(0,0,-180),cc.rotateBy(0.5,0,90), cc.callFunc((targer)=>{\n            cc.log(\"换派\",targer);\n            targer.getChildByName(\"bg_back\").active=false;;\n        }),cc.rotateBy(0.5,0,90)) )\n         let poker = th.pokerManager.getPokerSpriteById(\"A1\");\n        this.node.getChildByName(\"Poker_Back\").addChild(poker);\n        this.node.addChild(th.pokerManager.getNiuSprite(4, 0));\n        this.setCountdown(10, \"TEST.....\");\n        */\n        cc.log(th.room);\n    },\n    onMoreClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙\");\n        seat.setReady(true);\n        seat.setOffline(true);\n        seat.setScore(\"-8888\");\n        seat.setUserName(\"我的名字\");\n        seat.setCountdown(10);\n    },\n    onThemeClicked(targer) {\n        let seat = this.componentSeats[0];\n        seat.setChat(\"伙右伙历伙伙右伙历伙\");\n        seat.setReady(false);\n        seat.setOffline(true);\n        seat.setScore(\"+8888\");\n        seat.setCountdown(0);\n    },\n    onLookClicked(targer) {\n        cc.log(\"onLookClickedonLookClickedonLookClickedonLookClicked\");\n        let result = th.webCopyString(\n            \"onLookClickedonLookClickedonLookClickedonLookClickedCopy\"\n        );\n        th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n    },\n    onPokerClicked(targer, value) {\n        cc.log(\"Poker\", targer.target.pokerId, value);\n        let pokerId = targer.target.pokerId;\n        if (pokerId != -1) {\n            this.showOpenPokerAnim(targer.target);\n            th.myself.needLookCount = th.myself.needLookCount - 1;\n            this.refreshOptions();\n        }\n    },\n    onXiazhuang(targer) {\n        th.alert.show(\n            \"下庄提示\",\n            \"下庄之后，将当前战绩进行结算。是否确定下庄？\",\n            () => {\n                cc.log(\"下庄\");\n                const params = {\n                    operation: \"GameOver\",\n                    account_id: th.myself.account_id,\n                    session: th.sign,\n                    data: {\n                        room_id: th.room.room_id\n                    }\n                };\n                cc.log(\"===>>>[GameOver] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            },\n            true\n        );\n    },\n    showOpenPokerAnim(poker) {\n        let pokerId = poker.pokerId;\n        if (pokerId != -1) {\n            poker.runAction(\n                cc.sequence(\n                    cc.scaleTo(0.3, 0, 1),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(pokerId)\n                        );\n                    }),\n                    cc.scaleTo(0.3, 1, 1),\n                    cc.callFunc(traget => {\n                        traget.pokerId = -1;\n                    })\n                )\n            );\n        }\n    },\n    showPokers() {\n        //找到坐位上有人，且准备的发牌\n        let seatIndexs = [];\n        let players = [];\n        th.room.players.forEach(player => {\n            cc.log(\"showPokers:\", player.account_status);\n            if (player.account_status > 1) {\n                const index = th.getLocalIndex(player.serial_num - 1);\n                seatIndexs.push(index);\n                players.push(player);\n            }\n        });\n        let myLocalIndex = th.getMyselfLocalIndex();\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            let pokerIds = player.cards;\n            let isMyself = seatIndexs[i] == myLocalIndex;\n            if (player.account_status == 8) {\n                //摊牌\n                pokerIds = player.cards;\n            } else if (player.account_status == 7) {\n                //没摊牌\n                if (isMyself) {\n                    pokerIds = new Array(5).fill(-1);\n                    for (let j = 0; j < 5 - th.myself.needLookCount; j++) {\n                        pokerIds[j] = player.cards[j];\n                    }\n                } else {\n                    pokerIds = new Array(5).fill(-1);\n                }\n            } else {\n                //其他\n                pokerIds = new Array(5).fill(-1);\n            }\n            cc.log(player.nickname + \" 发牌：\", pokerIds, player.cards);\n            let basePoker = this.nodePokers[seatIndexs[i]];\n            basePoker.removeAllChildren();\n            let realPokersIds = player.cards;\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let pokerId = pokerIds[pi];\n                let realPokerId = realPokersIds[pi] || -1;\n                let poker = th.pokerManager.getPokerSpriteById(\n                    isMyself ? -1 : pokerId\n                ); //pokerId\n                poker.pokerId = isMyself ? realPokerId : -1; //-1 防止其他玩家牌可以点\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePoker.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                if (pokerId == -1) {\n                    let clickEventHandler = new cc.Component.EventHandler();\n                    clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n                    clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n                    clickEventHandler.handler = \"onPokerClicked\";\n                    clickEventHandler.customEventData = realPokerId;\n                    poker\n                        .getComponent(cc.Button)\n                        .clickEvents.push(clickEventHandler);\n                }\n                basePoker.addChild(poker);\n            }\n        }\n        //发牌效果\n        th.audioManager.playSFX(\"fapai.m4a\");\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < seatIndexs.length; j++) {\n                let seatIndex = seatIndexs[j];\n                let seat = this.nodeSeats[seatIndex];\n                let basePokers = this.nodePokers[seatIndex];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = seatIndex == myLocalIndex;\n                let player = players[j];\n                let showCard =\n                    player.account_status == 8\n                        ? true\n                        : i < 5 - th.myself.needLookCount;\n                //cc.log(seatIndex, myLocalIndex, seatIndex == myLocalIndex);\n                ((poker, delay, x, y, isMyself, showCard) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                ),\n                                cc.callFunc(target => {\n                                    if (showCard) {\n                                        this.showOpenPokerAnim(target);\n                                    }\n                                })\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * seatIndexs.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself,\n                    showCard\n                );\n            }\n        }\n\n        //如果玩家已经 摊牌，显示牛\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            if (player.account_status == 8) {\n                this.showNiuType(player);\n            }\n        }\n    },\n    setCountdown(val, content) {\n        let num = Number(val);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        if (content) {\n            this.nodeCountdown\n                .getChildByName(\"lbl_title\")\n                .getComponent(\"cc.Label\").string = content;\n        } else {\n            this.nodeCountdown.getChildByName(\"lbl_title\").node.active = false;\n        }\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            //th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n        if (this.holdClick) {\n            this.holdTimeEclipse++;\n            if (this.holdTimeEclipse > 120) {\n                //如果长按时间大于2s，则认为长按了2s\n                this.holdTimeEclipse = 120;\n            }\n        }\n    },\n    toConnectApi: function(targer) {\n        cc.log(\"onCreateClicked:\", this.createFrom);\n        //断开大厅连接连接游戏websocket\n        th.webSocketManager.connectGameServer(\n            {\n                ip: \"47.96.177.207\",\n                port: 10000,\n                namespace: \"api\"\n            },\n            () => {\n                th.wc.show(\"正在获取结果...\");\n                const params = {\n                    operation: \"getScoreBoard\", //操作标志\n                    account_id: th.myself.account_id, //用户id};\n                    session: th.sign,\n                    data: {\n                        type: 1,\n                        num2: 10291,\n                        num: th.room.room_number\n                    }\n                };\n                cc.log(\"===>>>[getScoreBoard] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            }\n        );\n    }\n});\n"]}