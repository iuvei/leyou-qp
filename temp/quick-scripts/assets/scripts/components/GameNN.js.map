{"version":3,"sources":["GameNN.js"],"names":["cc","Class","extends","Component","properties","bg1","Sprite","bg2","bg3","seatPrefab","Prefab","baseNode","Node","nodeSeats","componentSeats","nodePokers","nodeAmins","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnBankerMtp1","Button","btnBankerMtp2","btnBankerMtp4","btnPlayerMtp1","btnPlayerMtp2","btnPlayerMtp3","btnPlayerMtp4","btnQiang","btnBuqiang","btnReady","btnShow","btnXiazhuang","btnShangzhuang","btnBuShangzhuang","sprWaitBet","sprPlayerBet","sprQiangzhuang","sprReady","sprWaitPlayerBet","sprWaitShow","sprWaitNext","spriteClickLookPai","coinPrefab","resultNode","resultDeatilNode","resultItemPrefab","resultDetailItemPrefab","resultDetailSonItemPrefab","btnCaptureScreen","holdTimeEclipse","holdClick","auotReadyToggle","Toggle","chatWin","copyRoomUrlWin","guanzhanWin","settingWin","fangzuobiWin","guizeWin","moreWin","lblId","lblAnhao","_countdownEndTime","_isPlay","_bgImgIdx","onLoad","th","log","initEventHandlers","initView","node","on","emit","onChanganbaocunClicked","myself","isInRoom","onEnable","start","active","onFangzuobiClicked","webSocketManager","dataEventHandler","player","initSingleSeat","isPlayer","account_id","getMyselfAccountId","refreshOptions","data","room","game_num","getChildByName","getComponent","show","initRoomInfo","setCountdown","limit_time","showPokers","bankerMode","banker_mode","forEach","oldPlayer","getPlayerById","grab_array","index","scheduleOnce","getLocalIndex","serial_num","doBlink","length","getBankerPlayer","nickname","setBanker","delayTime","getMyselfPlayer","cards","pokers","children","showCard","needLookCount","poker","pokerId","idx","showOpenPokerAnim","item","tangpai","tpPlayers","players","filter","account_status","removeAllChildren","tagerPalyer","winner_array","seatxy","getSeatXY","tx","ty","audioManager","playSFX","loser_array","loser","x","y","i","coin","instantiate","addChild","runAction","sequence","moveTo","v2","easing","easeSineOut","callFunc","target","removeFromParent","loserCount","winer","winerCount","winner","offsetCount","score_board","account_ids","Object","keys","account_score","setScoreAnim","clear","is_banker","total_num","wc","toConnectApi","isChecked","onReadyClicked","hide","balance_scoreboard","room_number","time","room_creator","scoreboard","string","itemNode","name","score","headImg","loader","load","url","avatar","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","create_time","rule_text","resultDetailNode","balance_board","player_array","player_cards","roundNode","playersNode","playerNode","is_join","chip","card_type_str","pokerNode","pokerManager","getPokerSpriteById","card","headimg","alert","initAnhaoAndId","firstChar","voice_num","substr","Number","setEmoji","setQuickVoice","setChat","chattxt","newPlayer","oldIndex","setInfo","turn","Math","abs","nodeSeat","seatIndex","moveElement","seatsxy","connectGameServer","ip","port","namespace","params","operation","session","sign","ws","send","JSON","stringify","arr","n","slice","concat","initSeat","initMtpBtn","room_status","Array","fill","nodePoker","hasNiu","getNiuIndex","card_type","combo_point","combo_array","isMyself","getMyselfLocalIndex","firstX","firstY","offset","showNiuType","onResultCloseClicked","args","room_id","gametype","director","loadScene","onZhanjiseachClicked","num2","num","onResultDetailCloseClicked","webCaptureScreen","niuType","getNiuSprite","scale","scaleTo","niuIndex","mp3Name","bet_type_arr","mtp1","mtp2","mtp3","mtp4","acitve","multiples","noBanker","isZYQZ","isMPQZ","isGDZJ","isShowBtnReady","isShowQiangBrank","isShowSelectMultiples","isShowText","isShowClickLookPai","base_score","individuality","seat","push","btnNull","clickEventHandler","EventHandler","component","handler","clickEvents","onSeatClicked","targer","value","parent","remoteIndex","getRemoteIndex","headimgurl","sex","setOffline","online_status","setScore","setReady","setMultiples","mtp","onCopyCliecked","onBankerMultiplesClicked","is_grab","onBuqiangClicked","onPlayerMultiplesClicked","onShowClicked","onBackClicked","onChatClicked","onMoreClicked","onMoreCloseClicked","onThemeClicked","onLookClicked","onPokerClicked","onSettingClicked","onGuizeClicked","onXiazhuang","traget","seatIndexs","myLocalIndex","pokerIds","j","basePoker","realPokersIds","pi","realPokerId","position","convertToNodeSpaceAR","customEventData","basePokers","delay","spawn","val","content","Date","now","_alertStartTime","update","dt","miao","ceil","createFrom"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg1: cc.Sprite,\n        bg2: cc.Sprite,\n        bg3: cc.Sprite,\n\n        seatPrefab: cc.Prefab,\n\n        baseNode: cc.Node,\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n        nodeAmins: cc.Node, //用来播放动画\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n\n        btnBankerMtp1: cc.Button,\n        btnBankerMtp2: cc.Button,\n        btnBankerMtp4: cc.Button,\n\n        btnPlayerMtp1: cc.Button,\n        btnPlayerMtp2: cc.Button,\n        btnPlayerMtp3: cc.Button,\n        btnPlayerMtp4: cc.Button,\n\n        btnQiang: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n        btnShow: cc.Button,\n\n        btnXiazhuang: cc.Button,\n        btnShangzhuang: cc.Button,\n        btnBuShangzhuang: cc.Button,\n\n        sprWaitBet: cc.Sprite,\n        sprPlayerBet: cc.Sprite,\n        sprQiangzhuang: cc.Sprite,\n        sprReady: cc.Sprite,\n        sprWaitPlayerBet: cc.Sprite,\n        sprWaitShow: cc.Sprite,\n        sprWaitNext: cc.Sprite,\n\n        spriteClickLookPai: cc.Sprite, //点击看牌\n\n        coinPrefab: cc.Prefab,\n\n        resultNode: cc.Node,\n        resultDeatilNode: cc.Node,\n        resultItemPrefab: cc.Prefab,\n        resultDetailItemPrefab: cc.Prefab,\n        resultDetailSonItemPrefab: cc.Prefab,\n\n        btnCaptureScreen: cc.Button,\n\n        holdTimeEclipse: 0, //用来检测长按\n        holdClick: false,\n\n        auotReadyToggle: cc.Toggle,\n        //其他各种窗口\n        chatWin: cc.Node,\n        copyRoomUrlWin: cc.Node,\n        guanzhanWin: cc.Node,\n        settingWin: cc.Node,\n        fangzuobiWin: cc.Node,\n        guizeWin: cc.Node,\n        moreWin: cc.Node,\n\n        lblId: cc.Label,\n        lblAnhao: cc.Label,\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true, //用来播放倒计时声音\n\n        _bgImgIdx: 0\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n        //自由抢庄需要看牌两次\n        this.initEventHandlers();\n        this.initView();\n\n        this.btnCaptureScreen.node.on(\"touchstart\", event => {\n            this.holdClick = true;\n            this.holdTimeEclipse = 0;\n        });\n        this.btnCaptureScreen.node.on(\"touchend\", event => {\n            this.holdClick = false;\n            if (this.holdTimeEclipse >= 30) {\n                this.node.emit(\"captureScreenLongClicked\");\n            }\n            this.holdTimeEclipse = 0;\n        });\n\n        this.node.on(\"captureScreenLongClicked\", data => {\n            this.onChanganbaocunClicked();\n        });\n\n        th.myself.isInRoom = true;\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n        this.bg1.node.active = this._bgImgIdx == 0;\n        this.bg2.node.active = this._bgImgIdx == 1;\n        this.bg3.node.active = this._bgImgIdx == 2;\n        if (!th.myself.isInRoom) {\n            this.onFangzuobiClicked();\n        }\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"JoinRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\", player);\n            this.initSingleSeat(player);\n            if (!th.myself.isPlayer) {\n                this.initSingleSeat(player);\n            } else {\n                if (player.account_id == th.getMyselfAccountId()) {\n                    //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n                    this.refreshOptions();\n                    this.initSingleSeat(player);\n                }\n            }\n        });\n        this.node.on(\"GameStart\", data => {\n            cc.log(\"<<<===[GameStart] GmaeNN\", data);\n            //第一局开始动画\n            if (th.room.game_num == 1) {\n                this.node\n                    .getChildByName(\"OpenGameAnim\")\n                    .getComponent(\"OpenGameAnim\")\n                    .show();\n            }\n            this.initRoomInfo();\n            this.setCountdown(data.limit_time, \"游戏开始了\");\n            this.refreshOptions();\n            //如果观战\n            if (!th.myself.isPlayer) {\n                this.showPokers();\n            }\n        });\n        this.node.on(\"MyCards\", player => {\n            cc.log(\"<<<===[MyCards] GmaeNN\", player);\n            let bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 2 ||\n                bankerMode == 3 ||\n                bankerMode == 4\n            ) {\n                this.showPokers();\n            }\n            this.refreshOptions();\n        });\n\n        //开始游戏,闲家选倍数\n        this.node.on(\"StartBet\", data => {\n            cc.log(\"<<<===[StartBet] GmaeNN:\", data);\n            this.nodeOptions.active = false;\n            this.setCountdown(data.limit_time, \"投注开始了\");\n            //抢庄account_ID数据\n            //\"grab_array\": [\"31\", \"18\"],\n            data.data.forEach(player => {\n                const oldPlayer = th.getPlayerById(player.account_id);\n                this.initSingleSeat(oldPlayer);\n            });\n\n            //TODO\n            cc.log(\"TODO抢庄效果\", data.grab_array);\n            data.grab_array.forEach((account_id, index) => {\n                this.scheduleOnce(() => {\n                    const player = th.getPlayerById(account_id);\n                    const index = th.getLocalIndex(player.serial_num - 1);\n                    this.componentSeats[index].doBlink();\n                }, index * 0.5);\n            });\n            cc.log(\n                `抢庄人数${data.grab_array.length} 总用时：${data.grab_array\n                    .length * 0.5}`\n            );\n            this.scheduleOnce(() => {\n                data.data.forEach(player => {\n                    const oldPlayer = th.getPlayerById(player.account_id);\n                    this.initSingleSeat(oldPlayer);\n                });\n                const player = th.getBankerPlayer();\n                const index = th.getLocalIndex(player.serial_num - 1);\n                cc.log(\n                    `庄 ${player.nickname} player.serial_num:${\n                        player.serial_num\n                    }, index: ${index}`\n                );\n                this.componentSeats[index].setBanker(true);\n                //固定庄家 些时发牌\n                if (th.room.banker_mode == 5) {\n                    this.showPokers();\n                }\n            }, data.grab_array.length * 0.5);\n\n            let delayTime = data.grab_array.length * 0.5 + 1;\n            cc.log(`显示倍数按钮延时：${delayTime}`);\n\n            this.scheduleOnce(() => {\n                this.refreshOptions();\n            }, delayTime);\n        });\n\n        //闲家选倍数 通知\n        this.node.on(\"UpdateAccountMultiples\", player => {\n            cc.log(\"<<<===[UpdateAccountMultiples] GmaeNN:\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.getMyselfAccountId()) {\n                //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n                this.refreshOptions();\n            }\n        });\n\n        //显示牌\n        this.node.on(\"StartShow\", data => {\n            cc.log(\"<<<===[StartShow] GmaeNN:\", data);\n\n            this.refreshOptions();\n            //1 自由抢庄\n\n            //显示我自己的牌\n            let player = th.getMyselfPlayer();\n            let cards = player.cards;\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let pokers = this.nodePokers[index].children;\n            let showCard = 5 - th.myself.needLookCount;\n            cc.log(\"显示我自己的牌:\", showCard, player, cards);\n            //3=转庄牛牛, 2 = 明牌抢庄 5 = 固定庄家 1 = 自由抢庄 4 = 通比牛牛\n            const bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 3 ||\n                bankerMode == 4 ||\n                bankerMode == 5\n            ) {\n                //自由抢庄 通比牛牛 固定庄家 转庄牛牛\n                pokers.forEach((poker, index) => {\n                    poker.pokerId = cards[index];\n                });\n                if (th.room.banker_mode != 4) {\n                    //通比牛牛通比牛牛不用开牌，因为mycard直接把牌发来了\n                    pokers.forEach((poker, idx) => {\n                        if (idx >= showCard) return;\n                        this.showOpenPokerAnim(poker);\n                    });\n                }\n            } else if (bankerMode == 2) {\n                //明牌抢庄\n                pokers.forEach((poker, index) => {\n                    if (index >= showCard) {\n                        poker.pokerId = cards[index];\n                    }\n                });\n            }\n\n            this.setCountdown(data.limit_time, \"摊牌开始了\");\n\n            /*\n            this.scheduleOnce(() => {\n                //如果时间到还没摊牌就摊牌\n                if (th.getMyselfPlayer().account_status == 7) {\n                    this.onShowClicked();\n                }\n            }, data.limit_time);\n            */\n            data.data.forEach(item => {\n                let player = th.getPlayerById(item.account_id);\n                this.initSingleSeat(player);\n            });\n        });\n\n        //摊牌\n        this.node.on(\"UpdateAccountShow\", player => {\n            cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n            this.tangpai(player);\n        });\n\n        //结果\n        this.node.on(\"Win\", data => {\n            cc.log(\"<<<===[Win] GmaeNN:\", data);\n            this.nodeOptions.active = false;\n            //找到没有摊牌的人摊牌\n            let tpPlayers = th.room.players.filter(\n                player => player.account_status == 7\n            );\n            tpPlayers.forEach(player => {\n                this.tangpai(player);\n            });\n            this.sprWaitShow.node.active = false;\n            this.spriteClickLookPai.node.active = false;\n\n            //赢的人\n            //let win = data.winner_array;\n            //输的人\n            //let lose = data.loser_array;\n            this.scheduleOnce(\n                () => {\n                    this.nodeAmins.removeAllChildren();\n\n                    cc.log(\"TODO 飞筹码效果\");\n                    //通比牛牛先飞向最大的人，否则先飞向庄\n                    let tagerPalyer =\n                        th.room.banker_mode == 4\n                            ? th.getPlayerById(data.winner_array[0].account_id)\n                            : th.getBankerPlayer();\n\n                    const seatxy = th.getSeatXY();\n                    const index = th.getLocalIndex(tagerPalyer.serial_num - 1);\n                    let [tx, ty] = seatxy[index];\n                    //输得的人先飞向tagerPalyer\n                    th.audioManager.playSFX(\"coin.mp3\");\n                    data.loser_array.forEach(loser => {\n                        if (loser.account_id != tagerPalyer.account_id) {\n                            const player = th.getPlayerById(loser.account_id);\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            let [x, y] = seatxy[index];\n                            for (let i = 0; i < 5; i++) {\n                                let coin = cc.instantiate(this.coinPrefab);\n                                coin.x = x;\n                                coin.y = y;\n                                this.nodeAmins.addChild(coin);\n                                coin.runAction(\n                                    cc.sequence(\n                                        cc.delayTime(0.1 + i * 0.05),\n                                        cc\n                                            .moveTo(0.5, cc.v2(tx, ty))\n                                            .easing(cc.easeSineOut()),\n                                        cc.callFunc(target => {\n                                            target.removeFromParent();\n                                        })\n                                    )\n                                );\n                            }\n                        }\n                    });\n                    let loserCount = data.loser_array.filter(\n                        loser => loser.account_id != tagerPalyer.account_id\n                    ).length;\n                    //this.nodeAmins.removeAllChildren();\n                    this.scheduleOnce(() => {\n                        //tagerPalyer输得的人先飞向赢的人\n                        th.audioManager.playSFX(\"coin.mp3\");\n                        data.winner_array.forEach(winer => {\n                            if (winer.account_id != tagerPalyer.account_id) {\n                                const player = th.getPlayerById(\n                                    winer.account_id\n                                );\n                                const index = th.getLocalIndex(\n                                    player.serial_num - 1\n                                );\n                                let [x, y] = seatxy[index];\n                                for (let i = 0; i < 5; i++) {\n                                    let coin = cc.instantiate(this.coinPrefab);\n                                    coin.x = tx;\n                                    coin.y = ty;\n                                    this.nodeAmins.addChild(coin);\n                                    coin.runAction(\n                                        cc.sequence(\n                                            cc.delayTime(0.1 + i * 0.05),\n                                            cc\n                                                .moveTo(0.5, cc.v2(x, y))\n                                                .easing(cc.easeSineOut()),\n                                            cc.callFunc(target => {\n                                                target.removeFromParent();\n                                            })\n                                        )\n                                    );\n                                }\n                            }\n                        });\n                    }, 0.1 + 0.5 + loserCount * 0.05);\n\n                    let winerCount = data.winner_array.filter(\n                        winner => winner.account_id != tagerPalyer.account_id\n                    ).length;\n\n                    let offsetCount = loserCount + winerCount;\n                    cc.log(\"==================offsetCount:\", offsetCount);\n\n                    this.scheduleOnce(() => {\n                        let score_board = data.score_board;\n                        let account_ids = Object.keys(score_board);\n                        cc.log(\"AccountIds:\", account_ids);\n                        account_ids.forEach(account_id => {\n                            const player = th.getPlayerById(account_id);\n                            player.account_score = score_board[account_id];\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            this.componentSeats[index].setScoreAnim(\n                                player.account_score\n                            );\n                        });\n                    }, 0.1 + 0.5 + offsetCount * 0.05 + 0.5);\n\n                    this.scheduleOnce(() => {\n                        th.clear();\n                        th.room.players.forEach(player => {\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            this.componentSeats[index].setBanker(\n                                player.is_banker\n                            );\n                        });\n                        this.nodePokers.forEach(node => {\n                            node.removeAllChildren();\n                        });\n                        th.room.players.forEach(player => {\n                            this.initSingleSeat(player);\n                        });\n                        this.refreshOptions();\n                        if (th.room.game_num == th.room.total_num) {\n                            cc.log(\"done........................\");\n                            th.wc.show(\"下在获取战绩\");\n                            this.toConnectApi();\n                        } else {\n                            if (this.auotReadyToggle.isChecked) {\n                                this.onReadyClicked();\n                            }\n                        }\n                    }, 0.1 + 0.5 + offsetCount * 0.05 + 3);\n                },\n                1 + tpPlayers.length > 0 ? 2 : 0\n            );\n        });\n\n        //战绩\n        this.node.on(\"getScoreBoard\", data => {\n            cc.log(\"<<<===[getScoreBoard] GameNN:\", data);\n            th.wc.hide();\n            this.resultNode.x = 0;\n            this.resultNode.y = 0;\n            this.resultNode.active = true;\n            let {\n                room_number,\n                time,\n                total_num,\n                room_creator,\n                scoreboard\n            } = data.balance_scoreboard;\n\n            this.resultNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = time;\n\n            this.resultNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = total_num + \"局\";\n\n            this.resultNode\n                .getChildByName(\"lbl_banker\")\n                .getComponent(\"cc.Label\").string = \"房主：\" + room_creator;\n\n            let itemNode = this.resultNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n            itemNode.removeAllChildren();\n            scoreboard.forEach((player, index) => {\n                let item = cc.instantiate(this.resultItemPrefab);\n                item.getChildByName(\"lbl_id\").getComponent(\"cc.Label\").string =\n                    \"ID：\" + player.account_id;\n                item\n                    .getChildByName(\"lbl_name\")\n                    .getComponent(\"cc.Label\").string = player.name;\n                item\n                    .getChildByName(\"lbl_score\")\n                    .getComponent(\"cc.Label\").string = player.score;\n\n                let headImg = item\n                    .getChildByName(\"headImg\")\n                    .getComponent(\"cc.Sprite\");\n                cc.loader.load(\n                    {\n                        url: player.avatar,\n                        type: \"jpg\"\n                    },\n                    (err, texture) => {\n                        if (!err) {\n                            let headSpriteFrame = new cc.SpriteFrame(\n                                texture,\n                                cc.Rect(0, 0, texture.width, texture.height)\n                            );\n                            headImg.spriteFrame = headSpriteFrame;\n                            headImg.node.setScale(2 - texture.width / 120);\n                        }\n                    }\n                );\n\n                if (index == 0) {\n                    item.getChildByName(\"dayinjia\").active = true;\n                }\n                itemNode.addChild(item);\n            });\n            //Object.assign(th.room, data);\n        });\n\n        //战绩明细\n        this.node.on(\"getScoreDetail\", data => {\n            cc.log(\"<<<===[getScoreDetail] GameNN:\", data);\n            //Object.assign(th.room, data);\n            th.wc.hide();\n            this.resultDeatilNode.x = 0;\n            this.resultDeatilNode.y = 0;\n            this.resultDeatilNode.active = true;\n            let { room_number, create_time, game_num, rule_text } = data;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = create_time;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = game_num + \"局\";\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_info\")\n                .getComponent(\"cc.Label\").string = rule_text;\n\n            let resultDetailNode = this.resultDeatilNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n\n            //加载头像\n            let players = {};\n            data.balance_board.forEach(item => {\n                players[item.name] = item;\n            });\n\n            data.player_array.forEach(player => {\n                let { game_num, total_num, player_cards } = player;\n                let roundNode = cc.instantiate(this.resultDetailItemPrefab);\n                roundNode.height = 100 + data.balance_board.length * 100;\n                roundNode\n                    .getChildByName(\"lbl_round\")\n                    .getComponent(\n                        \"cc.Label\"\n                    ).string = `${game_num}/${total_num}`;\n                let playersNode = roundNode.getChildByName(\"players\");\n                player_cards.forEach(item => {\n                    let playerNode = cc.instantiate(\n                        this.resultDetailSonItemPrefab\n                    );\n\n                    playerNode\n                        .getChildByName(\"lbl_id\")\n                        .getComponent(\"cc.Label\").string =\n                        players[item.name].account_id + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_name\")\n                        .getComponent(\"cc.Label\").string = item.name + \"\";\n                    playerNode.getChildByName(\"icon_banker\").active =\n                        item.is_banker == 1;\n\n                    if (item.is_join == 1) {\n                        playerNode\n                            .getChildByName(\"lbl_mtp\")\n                            .getComponent(\"cc.Label\").string = item.chip + \"\";\n                        playerNode\n                            .getChildByName(\"lbl_score\")\n                            .getComponent(\"cc.Label\").string = item.score + \"\";\n                        playerNode\n                            .getChildByName(\"lbl_niu\")\n                            .getComponent(\"cc.Label\").string =\n                            item.card_type_str + \"\";\n                        let pokerNode = playerNode.getChildByName(\"pokers\");\n                        item.player_cards.forEach(card => {\n                            pokerNode.addChild(\n                                th.pokerManager.getPokerSpriteById(card)\n                            );\n                        });\n                    } else {\n                        playerNode.getChildByName(\"lbl_nojoin\").active = true;\n                    }\n                    let headimg = playerNode\n                        .getChildByName(\"headImg\")\n                        .getComponent(\"cc.Sprite\");\n\n                    cc.loader.load(\n                        {\n                            url: players[item.name].avatar,\n                            type: \"jpg\"\n                        },\n                        (err, texture) => {\n                            if (!err) {\n                                let headSpriteFrame = new cc.SpriteFrame(\n                                    texture,\n                                    cc.Rect(0, 0, texture.width, texture.height)\n                                );\n                                headimg.spriteFrame = headSpriteFrame;\n                                headimg.node.setScale(2 - texture.width / 120);\n                            }\n                        }\n                    );\n\n                    playersNode.addChild(playerNode);\n                });\n                resultDetailNode.addChild(roundNode);\n            });\n        });\n\n        this.node.on(\"getCopyUrl\", data => {\n            cc.log(\"<<<===[getCopyUrl] GameNN:\", data);\n            /*\n            let result = th.webCopyString(data.url);\n            cc.log(\"address:\", data.url);\n            th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n            */\n        });\n\n        //解散房间\n        this.node.on(\"BreakRoom\", data => {\n            cc.log(\"<<<===[BreakRoom] GameNN:\", data);\n            const player = th.getMyselfPlayer();\n            if (player.is_banker == 1) {\n                this.toConnectApi();\n            } else {\n                th.alert.show(\n                    \"提示\",\n                    \"庄家主动下庄，点击确定查看结算。\",\n                    () => {\n                        this.toConnectApi();\n                    },\n                    true\n                );\n            }\n            //Object.assign(th.room, data);\n        });\n        //暗号设置返回\n        this.node.on(\"setIndividuality\", data => {\n            cc.log(\"<<<===[setIndividuality] GameNN:\", data);\n            this.initAnhaoAndId();\n        });\n\n        this.node.on(\"StartLimitTime\", data => {\n            cc.log(\"<<<===[StartLimitTime] GameNN:\", data);\n            this.setCountdown(data.limit_time);\n        });\n        this.node.on(\"BroadcastVoice\", data => {\n            cc.log(\"<<<===[BroadcastVoice] GameNN:\", data);\n            const player = th.getPlayerById(data.account_id);\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let firstChar = data.voice_num.substr(0, 1);\n            let idx = Number(data.voice_num.substr(1));\n            if (firstChar == \"e\") {\n                //表情\n                this.componentSeats[index].setEmoji(idx + 1);\n            } else {\n                //语音\n                this.componentSeats[index].setQuickVoice(idx + 1);\n                this.componentSeats[index].setChat(th.chattxt[idx]);\n            }\n        });\n        //换作为\n        this.node.on(\"SwapSeat\", ({ oldPlayer, newPlayer }) => {\n            cc.log(\"<<<===[SwapSeat] GameNN:\", oldPlayer, newPlayer);\n            if (newPlayer.account_id == th.getMyselfAccountId()) {\n                cc.log(\n                    `自己换位置，开始动画:${oldPlayer.serial_num} => ${\n                        newPlayer.serial_num\n                    }`\n                );\n                let oldIndex = th.getLocalIndex(oldPlayer.serial_num - 1);\n                cc.log(\"oldIndex:\", oldIndex, oldPlayer.serial_num - 1);\n                this.componentSeats[oldIndex].setInfo(null);\n                //转动动画：\n\n                let turn = oldPlayer.serial_num - newPlayer.serial_num;\n                cc.log(`要转动的次数1：${turn}`);\n\n                if (Math.abs(turn) > this.nodeSeats.length) {\n                    turn = turn % this.nodeSeats.length;\n                }\n                cc.log(`要转动的次数2：${turn}`);\n                cc.log(`转动前的nodeSeat`);\n                this.nodeSeats.forEach((nodeSeat, index) => {\n                    cc.log(index, \", seat.seatIndex = i ,\", nodeSeat.seatIndex);\n                });\n\n                this.componentSeats = this.moveElement(\n                    this.componentSeats,\n                    turn\n                );\n                this.nodeSeats = this.moveElement(this.nodeSeats, turn);\n                this.nodePokers = this.moveElement(this.nodePokers, turn);\n\n                cc.log(`转动后的nodeSeat`);\n                this.nodeSeats.forEach((nodeSeat, index) => {\n                    cc.log(index, \", seat.seatIndex = i, \", nodeSeat.seatIndex);\n                    nodeSeat.seatIndex = index;\n                });\n                const seatsxy = th.getSeatXY();\n\n                for (let i = 0; i < this.nodeSeats.length; i++) {\n                    let [x, y] = seatsxy[i];\n                    this.nodeSeats[i].runAction(cc.moveTo(0.3, cc.v2(x, y)));\n                }\n                /*\n                this.nodeSeats.forEach((nodeSeat, index) => {\n                    let [x, y] = seatsxy[index];\n                    cc.log(\"FFFFFFFFFFFFFF:\", x, y, nodeSeat);\n                    nodeSeat.runAction(cc.moveTo(0.3, cc.v2(x, y)));\n                });\n                */\n                this.scheduleOnce(() => {\n                    let player = th.getPlayerById(newPlayer.account_id);\n                    player.serial_num = newPlayer.serial_num;\n                    this.initSingleSeat(player);\n                }, 0.3);\n            } else {\n                cc.log(\"别人换位置，直接清空\");\n                let oldIndex = th.getLocalIndex(oldPlayer.serial_num - 1);\n                this.componentSeats[oldIndex].setInfo(null);\n                //let newIndex = th.getLocalIndex(newPlayer.serial_num - 1);\n                let player = th.getPlayerById(newPlayer.account_id);\n                player.serial_num = newPlayer.serial_num;\n                this.initSingleSeat(player);\n            }\n        });\n        //断线\n        this.node.on(\"disconnect\", () => {\n            cc.log(\"<<<===[disconnect] GameNN:\");\n            th.alert.show(\n                \"提示\",\n                \"与服务器已断开。点击确定重连!!!\",\n                () => {\n                    th.webSocketManager.connectGameServer(\n                        {\n                            ip: \"47.96.177.207\",\n                            port: 10000,\n                            namespace: \"gamebdn\"\n                        },\n                        () => {\n                            const params = {\n                                operation: th.myself.isPlayer\n                                    ? \"JoinRoom\"\n                                    : \"GuestRoom\", //操作标志\n                                account_id: th.myself.account_id, //用户id};\n                                session: th.sign,\n                                data: {\n                                    room_number: th.room.room_number\n                                }\n                            };\n                            cc.log(\"===>>>[JoinRoom] JoinOrLook:\", params);\n                            th.ws.send(JSON.stringify(params));\n                        }\n                    );\n                },\n                true\n            );\n            /*\n            th.wc.show(\"与服务器断开。正在重连。。。。\");\n            th.webSocketManager.connectGameServer(\n                {\n                    ip: \"47.96.177.207\",\n                    port: 10000,\n                    namespace: \"gamebdn\"\n                },\n                () => {\n                    const params = {\n                        operation: th.myself.isPlayer\n                            ? \"JoinRoom\"\n                            : \"GuestRoom\", //操作标志\n                        account_id: th.myself.account_id, //用户id};\n                        session: th.sign,\n                        data: {\n                            room_number: th.room.room_number\n                        }\n                    };\n                    cc.log(\"===>>>[JoinRoom] JoinOrLook:\", params);\n                    th.ws.send(JSON.stringify(params));\n                }\n            );\n            */\n        });\n    },\n    moveElement(arr, n) {\n        if (Math.abs(n) > arr.length) n = n % arr.length;\n        return arr.slice(-n).concat(arr.slice(0, -n));\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.spriteClickLookPai.node.active = false;\n        this.initRoomInfo();\n        this.initAnhaoAndId();\n        this.initSeat();\n        this.initMtpBtn();\n        this.refreshOptions();\n        cc.log(\"InitView:\", th.room);\n        cc.log(\"InitView:\", th.myself);\n        const { room_status, banker_mode, account_status } = th.room;\n        cc.log(\"room_status, banker_mode :\", room_status, banker_mode);\n        if (room_status == 2) {\n            //如果观战\n            if (!th.myself.isPlayer) {\n                th.room.players.forEach(player => {\n                    player.cards = new Array(5).fill(-1);\n                });\n                cc.log(\"观战:\", th.room);\n                this.showPokers();\n                return;\n            }\n            if (\n                banker_mode == 1 ||\n                banker_mode == 2 ||\n                banker_mode == 3 ||\n                banker_mode == 4\n            ) {\n                //是自由抢庄或者明牌抢庄直接发牌\n                //通比牛牛也直接发\n                //转庄牛牛也直接发\n                cc.log(\"自由抢庄或者明牌抢庄直接发牌\");\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            } else if (banker_mode == 5 && account_status >= 6) {\n                cc.log(\"固定庄家发牌\");\n                //固定庄家闲家下注时才发牌\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            }\n        }\n        //是不是有庄\n        let player = th.getBankerPlayer();\n        if (player) {\n            let index = th.getLocalIndex(player.serial_num - 1);\n            this.componentSeats[index].setBanker(true);\n        }\n        cc.log(\"th.myself.isPlayer:,\", th.myself.isPlayer);\n        this.node.getChildByName(\"icon_look\").active = !th.myself.isPlayer;\n    },\n    tangpai(player) {\n        cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodePoker = this.nodePokers[index];\n        const nodeSeat = this.nodeSeats[index];\n        let pokers = nodePoker.children;\n\n        // 大于0为有牛\n        let hasNiu = th.getNiuIndex(player.card_type, player.combo_point) > 0;\n        let cards = hasNiu > 0 ? player.combo_array : player.cards;\n        //如果不是自己\n        //(isMyself ? 100 : seat.x > 0 ? -210 : 90) + basePokers.y +i * (isMyself ? 110 : 30),\n        // isMyself ? -25 : 0,\n        let isMyself = th.getMyselfLocalIndex() == index;\n        let firstX = isMyself ? 100 : nodeSeat.x > 0 ? -210 : 90;\n        let firstY = isMyself ? -25 : 0;\n        let offset = isMyself ? 110 : 30;\n        pokers.forEach((poker, index) => {\n            poker.runAction(\n                cc.sequence(\n                    cc.moveTo(0.3, cc.v2(firstX, firstY)),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(cards[index])\n                        );\n                    }),\n                    cc.moveTo(\n                        0.3,\n                        cc.v2(\n                            firstX +\n                                nodePoker.y +\n                                index * offset +\n                                (hasNiu && index > 2 ? 15 : 0),\n                            firstY\n                        )\n                    )\n                )\n            );\n        });\n        this.showNiuType(player);\n    },\n    onResultCloseClicked() {\n        th.wc.show(\"正在返回大厅。。。\");\n        th.args = {};\n        th.room.room_id = null;\n        th.room.room_number = null;\n        th.gametype = null;\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onZhanjiseachClicked() {\n        const params = {\n            operation: \"getScoreDetail\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                type: 1,\n                num2: 10291,\n                num: th.room.room_number\n            }\n        };\n        cc.log(\"===>>>[getScoreDetail] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onResultDetailCloseClicked() {\n        this.resultDeatilNode.active = false;\n    },\n    onChanganbaocunClicked() {\n        cc.log(\"长按保存....\");\n        th.webCaptureScreen();\n    },\n    showNiuType(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodeSeat = this.nodeSeats[index];\n        const nodePoker = this.nodePokers[index];\n        if (player.account_id != th.getMyselfAccountId()) {\n            //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = nodeSeat.x > 0 ? -160 : 150;\n            niuType.y = -20;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.2));\n        } else {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = 310;\n            niuType.y = 85;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.5));\n        }\n        let niuIndex = th.getNiuIndex(player.card_type, player.combo_point);\n        let mp3Name = \"bull\" + niuIndex + \".m4a\";\n        th.audioManager.playSFX(mp3Name);\n    },\n    initMtpBtn() {\n        let [mtp1, mtp2, mtp3, mtp4] = th.room.bet_type_arr;\n        this.btnPlayerMtp1.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp1 + \"倍\";\n        this.btnPlayerMtp2.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp2 + \"倍\";\n        this.btnPlayerMtp3.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp3 + \"倍\";\n        this.btnPlayerMtp4.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp4 + \"倍\";\n        this.btnBankerMtp1.node.acitve = false;\n        this.btnBankerMtp2.node.acitve = false;\n        this.btnBankerMtp4.node.acitve = false;\n        this.btnPlayerMtp1.node.active = false;\n        this.btnPlayerMtp2.node.active = false;\n        this.btnPlayerMtp3.node.active = false;\n        this.btnPlayerMtp4.node.active = false;\n\n        this.btnPlayerMtp1.node.multiples = mtp1;\n        this.btnPlayerMtp2.node.multiples = mtp2;\n        this.btnPlayerMtp3.node.multiples = mtp3;\n        this.btnPlayerMtp4.node.multiples = mtp4;\n\n        this.btnQiang.node.active = false;\n        this.btnBuqiang.node.active = false;\n        this.btnReady.node.active = false;\n        this.btnShow.node.active = false;\n\n        this.btnXiazhuang.node.active = false;\n        this.btnShangzhuang.node.active = false;\n        this.btnBuShangzhuang.node.active = false;\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            this.nodeOptions.active = true;\n\n            /*\n            banker_mode: 1,\n            1 = 自由抢庄     抢与不抢（没有倍数）都不抢或者都抢随机一个    选倍数（不是庄选）    开牌\n            2 = 明牌抢庄\n            3 = 转庄牛牛,牛牛上庄\n            4 = 通比牛牛\n            5 = 固定庄家 \n            */\n            let noBanker = th.getBankerPlayer() == null ? true : false;\n            const banker_mode = th.room.banker_mode;\n            const isZYQZ = banker_mode == 1;\n            const isMPQZ = banker_mode == 2;\n            const isGDZJ = banker_mode == 5;\n\n            let player = th.getMyselfPlayer();\n            //准备按钮\n            let isShowBtnReady =\n                (player.account_status == 0 || player.account_status == 1) &&\n                th.room.room_status == 1;\n            this.btnReady.node.active = isShowBtnReady;\n            this.sprReady.node.active = isShowBtnReady;\n\n            this.btnXiazhuang.node.active =\n                isShowBtnReady &&\n                isGDZJ &&\n                th.room.room_status == 1 &&\n                !noBanker &&\n                player.is_banker == 1 &&\n                th.room.game_num >= 3;\n\n            //抢庄按钮\n            let isShowQiangBrank =\n                player.account_status == 3 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnBankerMtp1.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp2.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp4.node.active = isShowQiangBrank && isMPQZ;\n            this.btnQiang.node.active = isShowQiangBrank && isZYQZ;\n            this.btnBuqiang.node.active =\n                isShowQiangBrank && (isZYQZ || isMPQZ);\n            this.sprQiangzhuang.node.active = isShowQiangBrank;\n            //闲加倍数选择\n            let isShowSelectMultiples =\n                player.is_banker == 0 &&\n                player.account_status == 6 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                player.multiples == 0;\n            this.btnPlayerMtp1.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp2.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp3.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp4.node.active = isShowSelectMultiples;\n            this.sprWaitPlayerBet.node.active = isShowSelectMultiples;\n            //摊牌按钮\n            let isShowText =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount <= 0;\n            this.btnShow.node.active = isShowText;\n\n            let isShowClickLookPai =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount > 0;\n            this.spriteClickLookPai.node.active = isShowClickLookPai;\n            this.sprWaitShow.node.active = isShowClickLookPai || isShowText;\n\n            //上状不上庄按钮\n\n            this.btnShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker; //&&player.account_score>=th.room.bankerscore\n            this.btnBuShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker;\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initAnhaoAndId() {\n        this.lblAnhao.string =\n            \"暗号：\" +\n            (th.myself.individuality == \"\" || th.myself.individuality == null\n                ? \"自定义暗号\"\n                : th.myself.individuality);\n        this.lblId.string = \"ID:\" + th.myself.account_id;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            seat.seatIndex = i; //为座位编号\n            this.baseNode.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n            let btnNull = seat.getChildByName(\"btn_null\");\n            let clickEventHandler = new cc.Component.EventHandler();\n            clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n            clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n            clickEventHandler.handler = \"onSeatClicked\";\n            //clickEventHandler.customEventData = realPokerId;\n            btnNull.getComponent(cc.Button).clickEvents.push(clickEventHandler);\n        }\n        const players = th.room.players;\n        for (let i = 0; i < players.length; ++i) {\n            cc.log(`name:${players[i].nickname}`);\n            this.initSingleSeat(players[i]);\n        }\n    },\n    onSeatClicked: function(targer, value) {\n        let seatIndex = targer.target.parent.seatIndex;\n        let remoteIndex = th.getRemoteIndex(seatIndex);\n        let myself = th.getMyselfPlayer();\n        cc.log(\"座位点击:\", seatIndex, remoteIndex, th.room.players);\n        if (th.myself.isPlayer && myself.account_status == 0) {\n            cc.log(\n                `${myself.nickname} 从 ${myself.serial_num} 换到 ${remoteIndex}`\n            );\n            let params = {\n                operation: \"SwapSeat\", //操作标志\n                account_id: th.myself.account_id, //用户account_id};\n                session: th.sign,\n                data: {\n                    room_number: th.room.room_number,\n                    serial_num: remoteIndex\n                }\n            };\n            cc.log(\"===>>>[SwapSeat] GameNN:\", params);\n            th.ws.send(JSON.stringify(params));\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == 1 ? false : true\n        );\n        /*\n        this.componentSeats[index].setBanker(\n            player.is_banker == 1 ? true : false\n        );\n        */\n        this.componentSeats[index].setScore(player.account_score);\n        this.componentSeats[index].setReady(player.account_status == 2);\n        if (th.room.banker_mode == 4) {\n            //通比牛牛没有庄\n            this.componentSeats[index].setMultiples(null);\n        } else {\n            if (player.account_status == 4) {\n                //不抢\n                this.componentSeats[index].setMultiples(\"n\");\n            } else if (player.account_status == 5) {\n                //抢庄\n                let mtp = player.multiples != 0 ? \"x\" + player.multiples : \"\";\n                this.componentSeats[index].setMultiples(\"y\" + mtp);\n            } else if (player.account_status == 6) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n                /*\n                //闲家倍数\n                if (player.is_banker == 1) {\n                    this.componentSeats[index].setMultiples(\n                        player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                    );\n                } else {\n                    this.componentSeats[index].setMultiples(null);\n                }\n                */\n            } else if (\n                player.account_status == 7 ||\n                player.account_status == 8\n            ) {\n                //未摊牌\n                this.componentSeats[index].setMultiples(\n                    player.is_banker == 1 ? null : \"x\" + player.multiples\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n        }\n    },\n    onCopyCliecked: function(targer, data) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.copyRoomUrlWin.getComponent(\"CopyRoomUrl\").show();\n    },\n    onBankerMultiplesClicked: function(targer, value) {\n        let multiples = 1;\n        if (Number(value) == 0) {\n            multiples = 1;\n            th.audioManager.playSFX(`robbanker.m4a`);\n        } else {\n            multiples = Number(value);\n            th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        }\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 1,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[GrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBuqiangClicked: function() {\n        th.audioManager.playSFX(\"nobanker.m4a\");\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 0,\n                multiples: 1\n            }\n        };\n        cc.log(\"===>>>[NoGrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n        const params = {\n            operation: \"ReadyStart\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ReadyStart] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onPlayerMultiplesClicked: function(targer, value) {\n        let multiples = targer.target.multiples;\n        th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        const params = {\n            operation: \"PlayerMultiples\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[PlayerMultiples] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onShowClicked: function(targer) {\n        cc.log(\"onPlayerMultiplesClicked:\");\n        const params = {\n            operation: \"ShowCard\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ShowCard] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onChatClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.chatWin.active = true;\n    },\n    onMoreClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.moreWin.active = true;\n    },\n    onMoreCloseClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.moreWin.active = false;\n    },\n    onThemeClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this._bgImgIdx = (this._bgImgIdx + 1) % 3;\n        this.bg1.node.active = this._bgImgIdx == 0;\n        this.bg2.node.active = this._bgImgIdx == 1;\n        this.bg3.node.active = this._bgImgIdx == 2;\n    },\n    onLookClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.guanzhanWin.getComponent(\"Guanzhan\").show();\n    },\n    onPokerClicked(targer, value) {\n        cc.log(\"Poker\", targer.target.pokerId, value);\n        let pokerId = targer.target.pokerId;\n        if (pokerId != -1) {\n            this.showOpenPokerAnim(targer.target);\n            th.myself.needLookCount = th.myself.needLookCount - 1;\n            this.refreshOptions();\n        }\n    },\n    onSettingClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.settingWin.active = true;\n        this.moreWin.active = false;\n    },\n    onGuizeClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.guizeWin.getComponent(\"Guize\").show(th.gametype);\n        this.moreWin.active = false;\n    },\n    onFangzuobiClicked() {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.fangzuobiWin.getComponent(\"Fangzuobi\").show();\n    },\n    onXiazhuang(targer) {\n        th.alert.show(\n            \"下庄提示\",\n            \"下庄之后，将当前战绩进行结算。是否确定下庄？\",\n            () => {\n                cc.log(\"下庄\");\n                const params = {\n                    operation: \"GameOver\",\n                    account_id: th.myself.account_id,\n                    session: th.sign,\n                    data: {\n                        room_id: th.room.room_id\n                    }\n                };\n                cc.log(\"===>>>[GameOver] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            },\n            true\n        );\n    },\n    showOpenPokerAnim(poker) {\n        let pokerId = poker.pokerId;\n        if (pokerId != -1) {\n            poker.runAction(\n                cc.sequence(\n                    cc.scaleTo(0.3, 0, 1),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(pokerId)\n                        );\n                    }),\n                    cc.scaleTo(0.3, 1, 1),\n                    cc.callFunc(traget => {\n                        traget.pokerId = -1;\n                    })\n                )\n            );\n        }\n    },\n    showPokers() {\n        //找到坐位上有人，且准备的发牌\n        let seatIndexs = [];\n        let players = [];\n        th.room.players.forEach(player => {\n            cc.log(\"showPokers:\", player.account_status);\n            if (player.account_status > 1) {\n                const index = th.getLocalIndex(player.serial_num - 1);\n                seatIndexs.push(index);\n                players.push(player);\n            }\n        });\n        let myLocalIndex = th.getMyselfLocalIndex();\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            let pokerIds = player.cards;\n            let isMyself = seatIndexs[i] == myLocalIndex;\n            if (player.account_status == 8) {\n                //摊牌\n                pokerIds = player.cards;\n            } else if (player.account_status == 7) {\n                //没摊牌\n                if (isMyself) {\n                    pokerIds = new Array(5).fill(-1);\n                    for (let j = 0; j < 5 - th.myself.needLookCount; j++) {\n                        pokerIds[j] = player.cards[j];\n                    }\n                } else {\n                    pokerIds = new Array(5).fill(-1);\n                }\n            } else {\n                //其他\n                pokerIds = new Array(5).fill(-1);\n            }\n            cc.log(player.nickname + \" 发牌：\", pokerIds, player.cards);\n            let basePoker = this.nodePokers[seatIndexs[i]];\n            basePoker.removeAllChildren();\n            let realPokersIds = player.cards;\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let pokerId = pokerIds[pi];\n                let realPokerId = realPokersIds[pi] || -1;\n                let poker = th.pokerManager.getPokerSpriteById(\n                    isMyself ? -1 : pokerId\n                ); //pokerId\n                poker.pokerId = isMyself ? realPokerId : -1; //-1 防止其他玩家牌可以点\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePoker.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                if (pokerId == -1) {\n                    let clickEventHandler = new cc.Component.EventHandler();\n                    clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n                    clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n                    clickEventHandler.handler = \"onPokerClicked\";\n                    clickEventHandler.customEventData = realPokerId;\n                    poker\n                        .getComponent(cc.Button)\n                        .clickEvents.push(clickEventHandler);\n                }\n                basePoker.addChild(poker);\n            }\n        }\n        //发牌效果\n        th.audioManager.playSFX(\"fapai.m4a\");\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < seatIndexs.length; j++) {\n                let seatIndex = seatIndexs[j];\n                let seat = this.nodeSeats[seatIndex];\n                let basePokers = this.nodePokers[seatIndex];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = seatIndex == myLocalIndex;\n                let player = players[j];\n                let showCard =\n                    player.account_status == 8\n                        ? true\n                        : i < 5 - th.myself.needLookCount;\n                //cc.log(seatIndex, myLocalIndex, seatIndex == myLocalIndex);\n                ((poker, delay, x, y, isMyself, showCard) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                ),\n                                cc.callFunc(target => {\n                                    if (showCard) {\n                                        this.showOpenPokerAnim(target);\n                                    }\n                                })\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * seatIndexs.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself,\n                    showCard\n                );\n            }\n        }\n\n        //如果玩家已经 摊牌，显示牛\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            if (player.account_status == 8) {\n                this.showNiuType(player);\n            }\n        }\n    },\n    setCountdown(val, content) {\n        let num = Number(val);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        if (content) {\n            this.nodeCountdown\n                .getChildByName(\"lbl_title\")\n                .getComponent(\"cc.Label\").string = content;\n        } else {\n            this.nodeCountdown.getChildByName(\"lbl_title\").active = false;\n        }\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            //th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n        if (this.holdClick) {\n            this.holdTimeEclipse++;\n            if (this.holdTimeEclipse > 120) {\n                //如果长按时间大于2s，则认为长按了2s\n                this.holdTimeEclipse = 120;\n            }\n        }\n    },\n    toConnectApi: function(targer) {\n        cc.log(\"onCreateClicked:\", this.createFrom);\n        //断开大厅连接连接游戏websocket\n        th.webSocketManager.connectGameServer(\n            {\n                ip: \"47.96.177.207\",\n                port: 10000,\n                namespace: \"api\"\n            },\n            () => {\n                th.wc.show(\"正在获取结果...\");\n                const params = {\n                    operation: \"getScoreBoard\", //操作标志\n                    account_id: th.myself.account_id, //用户id};\n                    session: th.sign,\n                    data: {\n                        type: 1,\n                        num2: 10291,\n                        num: th.room.room_number\n                    }\n                };\n                cc.log(\"===>>>[getScoreBoard] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            }\n        );\n    }\n});\n"]}