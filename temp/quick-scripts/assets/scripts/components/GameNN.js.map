{"version":3,"sources":["GameNN.js"],"names":["cc","Class","extends","Component","properties","bg1","Sprite","bg2","bg3","seatPrefab","Prefab","baseNode","Node","nodeSeats","componentSeats","nodePokers","nodeAmins","nodeOptions","nodeCountdown","lblCountdown","Label","lblRoomInfo","btnBankerMtp1","Button","btnBankerMtp2","btnBankerMtp4","btnPlayerMtp1","btnPlayerMtp2","btnPlayerMtp3","btnPlayerMtp4","btnQiang","btnBuqiang","btnReady","btnShow","btnXiazhuang","btnShangzhuang","btnBuShangzhuang","sprWaitBet","sprPlayerBet","sprQiangzhuang","sprReady","sprWaitPlayerBet","sprWaitShow","sprWaitNext","spriteClickLookPai","coinPrefab","resultNode","resultDeatilNode","resultItemPrefab","resultDetailItemPrefab","resultDetailSonItemPrefab","btnCaptureScreen","holdTimeEclipse","holdClick","auotReadyToggle","Toggle","chatWin","copyRoomUrlWin","guanzhanWin","settingWin","fangzuobiWin","guizeWin","moreWin","lblId","lblAnhao","_countdownEndTime","_isPlay","_bgImgIdx","onLoad","th","log","initEventHandlers","initView","node","on","emit","onChanganbaocunClicked","onEnable","start","active","onFangzuobiClicked","webSocketManager","dataEventHandler","player","initSingleSeat","myself","isPlayer","account_id","getMyselfAccountId","refreshOptions","data","room","game_num","getChildByName","getComponent","show","initRoomInfo","setCountdown","limit_time","showPokers","bankerMode","banker_mode","forEach","oldPlayer","getPlayerById","grab_array","index","scheduleOnce","getLocalIndex","serial_num","doBlink","length","getBankerPlayer","nickname","setBanker","delayTime","getMyselfPlayer","cards","pokers","children","showCard","needLookCount","poker","pokerId","idx","showOpenPokerAnim","item","tangpai","tpPlayers","players","filter","account_status","removeAllChildren","tagerPalyer","winner_array","seatxy","getSeatXY","tx","ty","audioManager","playSFX","loser_array","loser","x","y","i","coin","instantiate","addChild","runAction","sequence","moveTo","v2","easing","easeSineOut","callFunc","target","removeFromParent","loserCount","winer","winerCount","winner","offsetCount","score_board","account_ids","Object","keys","account_score","setScoreAnim","clear","is_banker","total_num","wc","toConnectApi","isChecked","onReadyClicked","hide","balance_scoreboard","room_number","time","room_creator","scoreboard","string","itemNode","name","score","headImg","loader","load","url","avatar","type","err","texture","headSpriteFrame","SpriteFrame","Rect","width","height","spriteFrame","setScale","create_time","rule_text","resultDetailNode","balance_board","player_array","player_cards","roundNode","playersNode","playerNode","is_join","chip","card_type_str","pokerNode","pokerManager","getPokerSpriteById","card","headimg","alert","initAnhaoAndId","firstChar","voice_num","substr","Number","setEmoji","setQuickVoice","setChat","chattxt","nodePoker","nodeSeat","hasNiu","getNiuIndex","card_type","combo_point","combo_array","isMyself","getMyselfLocalIndex","firstX","firstY","offset","showNiuType","onResultCloseClicked","args","room_id","gametype","director","loadScene","onZhanjiseachClicked","params","operation","session","sign","num2","num","ws","send","JSON","stringify","onResultDetailCloseClicked","webCaptureScreen","niuType","getNiuSprite","scale","scaleTo","niuIndex","mp3Name","initSeat","initMtpBtn","room_status","Array","fill","bet_type_arr","mtp1","mtp2","mtp3","mtp4","acitve","multiples","noBanker","isZYQZ","isMPQZ","isGDZJ","isShowBtnReady","isShowQiangBrank","isShowSelectMultiples","isShowText","isShowClickLookPai","base_score","individuality","seatsxy","seat","seatIndex","push","setInfo","headimgurl","sex","setOffline","online_status","setScore","setReady","setMultiples","mtp","onCopyCliecked","targer","onBankerMultiplesClicked","value","is_grab","onBuqiangClicked","onPlayerMultiplesClicked","onShowClicked","onBackClicked","onChatClicked","onMoreClicked","onMoreCloseClicked","onThemeClicked","onLookClicked","onPokerClicked","onSettingClicked","onGuizeClicked","onXiazhuang","traget","seatIndexs","myLocalIndex","pokerIds","j","basePoker","realPokersIds","pi","realPokerId","position","convertToNodeSpaceAR","clickEventHandler","EventHandler","component","handler","customEventData","clickEvents","basePokers","delay","spawn","val","content","Date","now","_alertStartTime","update","dt","miao","Math","ceil","createFrom","connectGameServer","ip","port","namespace"],"mappings":"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","file":"GameNN.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg1: cc.Sprite,\n        bg2: cc.Sprite,\n        bg3: cc.Sprite,\n\n        seatPrefab: cc.Prefab,\n\n        baseNode: cc.Node,\n        nodeSeats: [cc.Node], //所有座位的NODE\n        componentSeats: [cc.Component], //所有座位的组件\n        nodePokers: [cc.Node], //所有座位的扑克\n        nodeAmins: cc.Node, //用来播放动画\n\n        nodeOptions: cc.Node,\n        nodeCountdown: cc.Node,\n        lblCountdown: cc.Label,\n\n        lblRoomInfo: cc.Label,\n\n        btnBankerMtp1: cc.Button,\n        btnBankerMtp2: cc.Button,\n        btnBankerMtp4: cc.Button,\n\n        btnPlayerMtp1: cc.Button,\n        btnPlayerMtp2: cc.Button,\n        btnPlayerMtp3: cc.Button,\n        btnPlayerMtp4: cc.Button,\n\n        btnQiang: cc.Button,\n        btnBuqiang: cc.Button,\n        btnReady: cc.Button,\n        btnShow: cc.Button,\n\n        btnXiazhuang: cc.Button,\n        btnShangzhuang: cc.Button,\n        btnBuShangzhuang: cc.Button,\n\n        sprWaitBet: cc.Sprite,\n        sprPlayerBet: cc.Sprite,\n        sprQiangzhuang: cc.Sprite,\n        sprReady: cc.Sprite,\n        sprWaitPlayerBet: cc.Sprite,\n        sprWaitShow: cc.Sprite,\n        sprWaitNext: cc.Sprite,\n\n        spriteClickLookPai: cc.Sprite, //点击看牌\n\n        coinPrefab: cc.Prefab,\n\n        resultNode: cc.Node,\n        resultDeatilNode: cc.Node,\n        resultItemPrefab: cc.Prefab,\n        resultDetailItemPrefab: cc.Prefab,\n        resultDetailSonItemPrefab: cc.Prefab,\n\n        btnCaptureScreen: cc.Button,\n\n        holdTimeEclipse: 0, //用来检测长按\n        holdClick: false,\n\n        auotReadyToggle: cc.Toggle,\n        //其他各种窗口\n        chatWin: cc.Node,\n        copyRoomUrlWin: cc.Node,\n        guanzhanWin: cc.Node,\n        settingWin: cc.Node,\n        fangzuobiWin: cc.Node,\n        guizeWin: cc.Node,\n        moreWin: cc.Node,\n\n        lblId: cc.Label,\n        lblAnhao: cc.Label,\n\n        _countdownEndTime: 0, //倒计时剩余时间\n        _isPlay: true, //用来播放倒计时声音\n\n        _bgImgIdx: 0\n    },\n\n    onLoad: function() {\n        if (th == null) {\n            return;\n        }\n        cc.log(\"GameNN onLoad\");\n        //自由抢庄需要看牌两次\n        this.initEventHandlers();\n        this.initView();\n\n        this.btnCaptureScreen.node.on(\"touchstart\", event => {\n            this.holdClick = true;\n            this.holdTimeEclipse = 0;\n        });\n        this.btnCaptureScreen.node.on(\"touchend\", event => {\n            this.holdClick = false;\n            if (this.holdTimeEclipse >= 30) {\n                this.node.emit(\"captureScreenLongClicked\");\n            }\n            this.holdTimeEclipse = 0;\n        });\n\n        this.node.on(\"captureScreenLongClicked\", data => {\n            this.onChanganbaocunClicked();\n        });\n    },\n    onEnable() {\n        cc.log(\"GameNN onEnable\");\n    },\n    start() {\n        cc.log(\"GameNN start\");\n        this.bg1.node.active = this._bgImgIdx == 0;\n        this.bg2.node.active = this._bgImgIdx == 1;\n        this.bg3.node.active = this._bgImgIdx == 2;\n        this.onFangzuobiClicked();\n    },\n    initEventHandlers() {\n        cc.log(\"GameNN initEventHandlers()\");\n        th.webSocketManager.dataEventHandler = this.node;\n\n        this.node.on(\"JoinRoom\", () => {\n            cc.log(\"<<<===[JoinRoom] GmaeNN\");\n        });\n        this.node.on(\"GuestRoom\", () => {\n            cc.log(\"<<<===[GuestRoom] GmaeNN\");\n        });\n        this.node.on(\"AllGamerInfo\", () => {\n            cc.log(\"<<<===[AllGamerInfo] GmaeNN\");\n        });\n        this.node.on(\"AllGuestInfo\", () => {\n            cc.log(\"<<<===[AllGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateGamerInfo\", player => {\n            cc.log(\"<<<===[UpdateGamerInfo] GmaeNN:\", player);\n            this.initSingleSeat(player);\n        });\n        this.node.on(\"UpdateGuestInfo\", () => {\n            cc.log(\"<<<===[UpdateGuestInfo] GmaeNN\");\n        });\n        this.node.on(\"UpdateAccountStatus\", player => {\n            cc.log(\"<<<===[UpdateAccountStatus] GmaeNN\", player);\n            this.initSingleSeat(player);\n            if (!th.myself.isPlayer) {\n                this.initSingleSeat(player);\n            } else {\n                if (player.account_id == th.getMyselfAccountId()) {\n                    //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n                    this.refreshOptions();\n                    this.initSingleSeat(player);\n                }\n            }\n        });\n        this.node.on(\"GameStart\", data => {\n            cc.log(\"<<<===[GameStart] GmaeNN\", data);\n            //第一局开始动画\n            if (th.room.game_num == 1) {\n                this.node\n                    .getChildByName(\"OpenGameAnim\")\n                    .getComponent(\"OpenGameAnim\")\n                    .show();\n            }\n            this.initRoomInfo();\n            this.setCountdown(data.limit_time, \"游戏开始了\");\n            this.refreshOptions();\n            //如果观战\n            if (!th.myself.isPlayer) {\n                this.showPokers();\n            }\n        });\n        this.node.on(\"MyCards\", player => {\n            cc.log(\"<<<===[MyCards] GmaeNN\", player);\n            let bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 2 ||\n                bankerMode == 3 ||\n                bankerMode == 4\n            ) {\n                this.showPokers();\n            }\n            this.refreshOptions();\n        });\n\n        //开始游戏,闲家选倍数\n        this.node.on(\"StartBet\", data => {\n            cc.log(\"<<<===[StartBet] GmaeNN:\", data);\n            this.nodeOptions.active = false;\n            this.setCountdown(data.limit_time, \"投注开始了\");\n            //抢庄account_ID数据\n            //\"grab_array\": [\"31\", \"18\"],\n            data.data.forEach(player => {\n                const oldPlayer = th.getPlayerById(player.account_id);\n                this.initSingleSeat(oldPlayer);\n            });\n\n            //TODO\n            cc.log(\"TODO抢庄效果\", data.grab_array);\n            data.grab_array.forEach((account_id, index) => {\n                this.scheduleOnce(() => {\n                    const player = th.getPlayerById(account_id);\n                    const index = th.getLocalIndex(player.serial_num - 1);\n                    this.componentSeats[index].doBlink();\n                }, index * 0.5);\n            });\n            cc.log(\n                `抢庄人数${data.grab_array.length} 总用时：${data.grab_array\n                    .length * 0.5}`\n            );\n            this.scheduleOnce(() => {\n                data.data.forEach(player => {\n                    const oldPlayer = th.getPlayerById(player.account_id);\n                    this.initSingleSeat(oldPlayer);\n                });\n                const player = th.getBankerPlayer();\n                const index = th.getLocalIndex(player.serial_num - 1);\n                cc.log(\n                    `庄 ${player.nickname} player.serial_num:${\n                        player.serial_num\n                    }, index: ${index}`\n                );\n                this.componentSeats[index].setBanker(true);\n                //固定庄家 些时发牌\n                if (th.room.banker_mode == 5) {\n                    this.showPokers();\n                }\n            }, data.grab_array.length * 0.5);\n\n            let delayTime = data.grab_array.length * 0.5 + 1;\n            cc.log(`显示倍数按钮延时：${delayTime}`);\n\n            this.scheduleOnce(() => {\n                this.refreshOptions();\n            }, delayTime);\n        });\n\n        //闲家选倍数 通知\n        this.node.on(\"UpdateAccountMultiples\", player => {\n            cc.log(\"<<<===[UpdateAccountMultiples] GmaeNN:\", player);\n            this.initSingleSeat(player);\n            if (player.account_id == th.getMyselfAccountId()) {\n                //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n                this.refreshOptions();\n            }\n        });\n\n        //显示牌\n        this.node.on(\"StartShow\", data => {\n            cc.log(\"<<<===[StartShow] GmaeNN:\", data);\n\n            this.refreshOptions();\n            //1 自由抢庄\n\n            //显示我自己的牌\n            let player = th.getMyselfPlayer();\n            let cards = player.cards;\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let pokers = this.nodePokers[index].children;\n            let showCard = 5 - th.myself.needLookCount;\n            cc.log(\"显示我自己的牌:\", showCard, player, cards);\n            //3=转庄牛牛, 2 = 明牌抢庄 5 = 固定庄家 1 = 自由抢庄 4 = 通比牛牛\n            const bankerMode = th.room.banker_mode;\n            if (\n                bankerMode == 1 ||\n                bankerMode == 3 ||\n                bankerMode == 4 ||\n                bankerMode == 5\n            ) {\n                //自由抢庄 通比牛牛 固定庄家 转庄牛牛\n                pokers.forEach((poker, index) => {\n                    poker.pokerId = cards[index];\n                });\n                if (th.room.banker_mode != 4) {\n                    //通比牛牛通比牛牛不用开牌，因为mycard直接把牌发来了\n                    pokers.forEach((poker, idx) => {\n                        if (idx >= showCard) return;\n                        this.showOpenPokerAnim(poker);\n                    });\n                }\n            } else if (bankerMode == 2) {\n                //明牌抢庄\n                pokers.forEach((poker, index) => {\n                    if (index >= showCard) {\n                        poker.pokerId = cards[index];\n                    }\n                });\n            }\n\n            this.setCountdown(data.limit_time, \"摊牌开始了\");\n\n            /*\n            this.scheduleOnce(() => {\n                //如果时间到还没摊牌就摊牌\n                if (th.getMyselfPlayer().account_status == 7) {\n                    this.onShowClicked();\n                }\n            }, data.limit_time);\n            */\n            data.data.forEach(item => {\n                let player = th.getPlayerById(item.account_id);\n                this.initSingleSeat(player);\n            });\n        });\n\n        //摊牌\n        this.node.on(\"UpdateAccountShow\", player => {\n            cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n            this.tangpai(player);\n        });\n\n        //结果\n        this.node.on(\"Win\", data => {\n            cc.log(\"<<<===[Win] GmaeNN:\", data);\n            this.nodeOptions.active = false;\n            //找到没有摊牌的人摊牌\n            let tpPlayers = th.room.players.filter(\n                player => player.account_status == 7\n            );\n            tpPlayers.forEach(player => {\n                this.tangpai(player);\n            });\n            this.sprWaitShow.node.active = false;\n            this.spriteClickLookPai.node.active = false;\n\n            //赢的人\n            //let win = data.winner_array;\n            //输的人\n            //let lose = data.loser_array;\n            this.scheduleOnce(\n                () => {\n                    this.nodeAmins.removeAllChildren();\n\n                    cc.log(\"TODO 飞筹码效果\");\n                    //通比牛牛先飞向最大的人，否则先飞向庄\n                    let tagerPalyer =\n                        th.room.banker_mode == 4\n                            ? th.getPlayerById(data.winner_array[0].account_id)\n                            : th.getBankerPlayer();\n\n                    const seatxy = th.getSeatXY();\n                    const index = th.getLocalIndex(tagerPalyer.serial_num - 1);\n                    let [tx, ty] = seatxy[index];\n                    //输得的人先飞向tagerPalyer\n                    th.audioManager.playSFX(\"coin.mp3\");\n                    data.loser_array.forEach(loser => {\n                        if (loser.account_id != tagerPalyer.account_id) {\n                            const player = th.getPlayerById(loser.account_id);\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            let [x, y] = seatxy[index];\n                            for (let i = 0; i < 5; i++) {\n                                let coin = cc.instantiate(this.coinPrefab);\n                                coin.x = x;\n                                coin.y = y;\n                                this.nodeAmins.addChild(coin);\n                                coin.runAction(\n                                    cc.sequence(\n                                        cc.delayTime(0.1 + i * 0.05),\n                                        cc\n                                            .moveTo(0.5, cc.v2(tx, ty))\n                                            .easing(cc.easeSineOut()),\n                                        cc.callFunc(target => {\n                                            target.removeFromParent();\n                                        })\n                                    )\n                                );\n                            }\n                        }\n                    });\n                    let loserCount = data.loser_array.filter(\n                        loser => loser.account_id != tagerPalyer.account_id\n                    ).length;\n                    //this.nodeAmins.removeAllChildren();\n                    this.scheduleOnce(() => {\n                        //tagerPalyer输得的人先飞向赢的人\n                        th.audioManager.playSFX(\"coin.mp3\");\n                        data.winner_array.forEach(winer => {\n                            if (winer.account_id != tagerPalyer.account_id) {\n                                const player = th.getPlayerById(\n                                    winer.account_id\n                                );\n                                const index = th.getLocalIndex(\n                                    player.serial_num - 1\n                                );\n                                let [x, y] = seatxy[index];\n                                for (let i = 0; i < 5; i++) {\n                                    let coin = cc.instantiate(this.coinPrefab);\n                                    coin.x = tx;\n                                    coin.y = ty;\n                                    this.nodeAmins.addChild(coin);\n                                    coin.runAction(\n                                        cc.sequence(\n                                            cc.delayTime(0.1 + i * 0.05),\n                                            cc\n                                                .moveTo(0.5, cc.v2(x, y))\n                                                .easing(cc.easeSineOut()),\n                                            cc.callFunc(target => {\n                                                target.removeFromParent();\n                                            })\n                                        )\n                                    );\n                                }\n                            }\n                        });\n                    }, 0.1 + 0.5 + loserCount * 0.05);\n\n                    let winerCount = data.winner_array.filter(\n                        winner => winner.account_id != tagerPalyer.account_id\n                    ).length;\n\n                    let offsetCount = loserCount + winerCount;\n                    cc.log(\"==================offsetCount:\", offsetCount);\n\n                    this.scheduleOnce(() => {\n                        let score_board = data.score_board;\n                        let account_ids = Object.keys(score_board);\n                        cc.log(\"AccountIds:\", account_ids);\n                        account_ids.forEach(account_id => {\n                            const player = th.getPlayerById(account_id);\n                            player.account_score = score_board[account_id];\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            this.componentSeats[index].setScoreAnim(\n                                player.account_score\n                            );\n                        });\n                    }, 0.1 + 0.5 + offsetCount * 0.05 + 0.5);\n\n                    this.scheduleOnce(() => {\n                        th.clear();\n                        th.room.players.forEach(player => {\n                            const index = th.getLocalIndex(\n                                player.serial_num - 1\n                            );\n                            this.componentSeats[index].setBanker(\n                                player.is_banker\n                            );\n                        });\n                        this.nodePokers.forEach(node => {\n                            node.removeAllChildren();\n                        });\n                        th.room.players.forEach(player => {\n                            this.initSingleSeat(player);\n                        });\n                        this.refreshOptions();\n                        if (th.room.game_num == th.room.total_num) {\n                            cc.log(\"done........................\");\n                            th.wc.show(\"下在获取战绩\");\n                            this.toConnectApi();\n                        } else {\n                            if (this.auotReadyToggle.isChecked) {\n                                this.onReadyClicked();\n                            }\n                        }\n                    }, 0.1 + 0.5 + offsetCount * 0.05 + 3);\n                },\n                1 + tpPlayers.length > 0 ? 2 : 0\n            );\n        });\n\n        //战绩\n        this.node.on(\"getScoreBoard\", data => {\n            cc.log(\"<<<===[getScoreBoard] GameNN:\", data);\n            th.wc.hide();\n            this.resultNode.x = 0;\n            this.resultNode.y = 0;\n            this.resultNode.active = true;\n            let {\n                room_number,\n                time,\n                total_num,\n                room_creator,\n                scoreboard\n            } = data.balance_scoreboard;\n\n            this.resultNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = time;\n\n            this.resultNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = total_num + \"局\";\n\n            this.resultNode\n                .getChildByName(\"lbl_banker\")\n                .getComponent(\"cc.Label\").string = \"房主：\" + room_creator;\n\n            let itemNode = this.resultNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n            itemNode.removeAllChildren();\n            scoreboard.forEach((player, index) => {\n                let item = cc.instantiate(this.resultItemPrefab);\n                item.getChildByName(\"lbl_id\").getComponent(\"cc.Label\").string =\n                    \"ID：\" + player.account_id;\n                item\n                    .getChildByName(\"lbl_name\")\n                    .getComponent(\"cc.Label\").string = player.name;\n                item\n                    .getChildByName(\"lbl_score\")\n                    .getComponent(\"cc.Label\").string = player.score;\n\n                let headImg = item\n                    .getChildByName(\"headImg\")\n                    .getComponent(\"cc.Sprite\");\n                cc.loader.load(\n                    {\n                        url: player.avatar,\n                        type: \"jpg\"\n                    },\n                    (err, texture) => {\n                        if (!err) {\n                            let headSpriteFrame = new cc.SpriteFrame(\n                                texture,\n                                cc.Rect(0, 0, texture.width, texture.height)\n                            );\n                            headImg.spriteFrame = headSpriteFrame;\n                            headImg.node.setScale(2 - texture.width / 120);\n                        }\n                    }\n                );\n\n                if (index == 0) {\n                    item.getChildByName(\"dayinjia\").active = true;\n                }\n                itemNode.addChild(item);\n            });\n            //Object.assign(th.room, data);\n        });\n\n        //战绩明细\n        this.node.on(\"getScoreDetail\", data => {\n            cc.log(\"<<<===[getScoreDetail] GameNN:\", data);\n            //Object.assign(th.room, data);\n            th.wc.hide();\n            this.resultDeatilNode.x = 0;\n            this.resultDeatilNode.y = 0;\n            this.resultDeatilNode.active = true;\n            let { room_number, create_time, game_num, rule_text } = data;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_roomId\")\n                .getComponent(\"cc.Label\").string = \"房间号：\" + room_number;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_time\")\n                .getComponent(\"cc.Label\").string = create_time;\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_round\")\n                .getComponent(\"cc.Label\").string = game_num + \"局\";\n\n            this.resultDeatilNode\n                .getChildByName(\"lbl_info\")\n                .getComponent(\"cc.Label\").string = rule_text;\n\n            let resultDetailNode = this.resultDeatilNode\n                .getChildByName(\"results\")\n                .getChildByName(\"view\")\n                .getChildByName(\"content\");\n\n            //加载头像\n            let players = {};\n            data.balance_board.forEach(item => {\n                players[item.name] = item;\n            });\n\n            data.player_array.forEach(player => {\n                let { game_num, total_num, player_cards } = player;\n                let roundNode = cc.instantiate(this.resultDetailItemPrefab);\n                roundNode.height = 100 + data.balance_board.length * 100;\n                roundNode\n                    .getChildByName(\"lbl_round\")\n                    .getComponent(\n                        \"cc.Label\"\n                    ).string = `${game_num}/${total_num}`;\n                let playersNode = roundNode.getChildByName(\"players\");\n                player_cards.forEach(item => {\n                    let playerNode = cc.instantiate(\n                        this.resultDetailSonItemPrefab\n                    );\n\n                    playerNode\n                        .getChildByName(\"lbl_id\")\n                        .getComponent(\"cc.Label\").string =\n                        players[item.name].account_id + \"\";\n                    playerNode\n                        .getChildByName(\"lbl_name\")\n                        .getComponent(\"cc.Label\").string = item.name + \"\";\n                    playerNode.getChildByName(\"icon_banker\").active =\n                        item.is_banker == 1;\n\n                    if (item.is_join == 1) {\n                        playerNode\n                            .getChildByName(\"lbl_mtp\")\n                            .getComponent(\"cc.Label\").string = item.chip + \"\";\n                        playerNode\n                            .getChildByName(\"lbl_score\")\n                            .getComponent(\"cc.Label\").string = item.score + \"\";\n                        playerNode\n                            .getChildByName(\"lbl_niu\")\n                            .getComponent(\"cc.Label\").string =\n                            item.card_type_str + \"\";\n                        let pokerNode = playerNode.getChildByName(\"pokers\");\n                        item.player_cards.forEach(card => {\n                            pokerNode.addChild(\n                                th.pokerManager.getPokerSpriteById(card)\n                            );\n                        });\n                    } else {\n                        playerNode.getChildByName(\"lbl_nojoin\").active = true;\n                    }\n                    let headimg = playerNode\n                        .getChildByName(\"headImg\")\n                        .getComponent(\"cc.Sprite\");\n\n                    cc.loader.load(\n                        {\n                            url: players[item.name].avatar,\n                            type: \"jpg\"\n                        },\n                        (err, texture) => {\n                            if (!err) {\n                                let headSpriteFrame = new cc.SpriteFrame(\n                                    texture,\n                                    cc.Rect(0, 0, texture.width, texture.height)\n                                );\n                                headimg.spriteFrame = headSpriteFrame;\n                                headimg.node.setScale(2 - texture.width / 120);\n                            }\n                        }\n                    );\n\n                    playersNode.addChild(playerNode);\n                });\n                resultDetailNode.addChild(roundNode);\n            });\n        });\n\n        this.node.on(\"getCopyUrl\", data => {\n            cc.log(\"<<<===[getCopyUrl] GameNN:\", data);\n            /*\n            let result = th.webCopyString(data.url);\n            cc.log(\"address:\", data.url);\n            th.msg.show(result ? \"复制成功！\" : \"复制失败\");\n            */\n        });\n\n        //解散房间\n        this.node.on(\"BreakRoom\", data => {\n            cc.log(\"<<<===[BreakRoom] GameNN:\", data);\n            const player = th.getMyselfPlayer();\n            if (player.is_banker == 1) {\n                this.toConnectApi();\n            } else {\n                th.alert.show(\n                    \"提示\",\n                    \"庄家主动下庄，点击确定查看结算。\",\n                    () => {\n                        this.toConnectApi();\n                    },\n                    true\n                );\n            }\n            //Object.assign(th.room, data);\n        });\n        //暗号设置返回\n        this.node.on(\"setIndividuality\", data => {\n            cc.log(\"<<<===[setIndividuality] GameNN:\", data);\n            this.initAnhaoAndId();\n        });\n\n        this.node.on(\"StartLimitTime\", data => {\n            cc.log(\"<<<===[StartLimitTime] GameNN:\", data);\n            this.setCountdown(data.limit_time);\n        });\n        this.node.on(\"BroadcastVoice\", data => {\n            cc.log(\"<<<===[BroadcastVoice] GameNN:\", data);\n            const player = th.getPlayerById(data.account_id);\n            const index = th.getLocalIndex(player.serial_num - 1);\n            let firstChar = data.voice_num.substr(0, 1);\n            let idx = Number(data.voice_num.substr(1));\n            cc.log(\"firstCar idx:\", firstChar, idx);\n            if (firstChar == \"e\") {\n                //表情\n                this.componentSeats[index].setEmoji(idx + 1);\n            } else {\n                //语音\n                this.componentSeats[index].setQuickVoice(idx + 1);\n                this.componentSeats[index].setChat(th.chattxt[idx]);\n            }\n        });\n    },\n    tangpai(player) {\n        cc.log(\"<<<===[UpdateAccountShow] GmaeNN:\", player);\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodePoker = this.nodePokers[index];\n        const nodeSeat = this.nodeSeats[index];\n        let pokers = nodePoker.children;\n\n        // 大于0为有牛\n        let hasNiu = th.getNiuIndex(player.card_type, player.combo_point) > 0;\n        let cards = hasNiu > 0 ? player.combo_array : player.cards;\n        //如果不是自己\n        //(isMyself ? 100 : seat.x > 0 ? -210 : 90) + basePokers.y +i * (isMyself ? 110 : 30),\n        // isMyself ? -25 : 0,\n        let isMyself = th.getMyselfLocalIndex() == index;\n        let firstX = isMyself ? 100 : nodeSeat.x > 0 ? -210 : 90;\n        let firstY = isMyself ? -25 : 0;\n        let offset = isMyself ? 110 : 30;\n        pokers.forEach((poker, index) => {\n            poker.runAction(\n                cc.sequence(\n                    cc.moveTo(0.3, cc.v2(firstX, firstY)),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(cards[index])\n                        );\n                    }),\n                    cc.moveTo(\n                        0.3,\n                        cc.v2(\n                            firstX +\n                                nodePoker.y +\n                                index * offset +\n                                (hasNiu && index > 2 ? 15 : 0),\n                            firstY\n                        )\n                    )\n                )\n            );\n        });\n        this.showNiuType(player);\n    },\n    onResultCloseClicked() {\n        th.wc.show(\"正在返回大厅。。。\");\n        th.args = {};\n        th.room.room_id = null;\n        th.room.room_number = null;\n        th.gametype = null;\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onZhanjiseachClicked() {\n        const params = {\n            operation: \"getScoreDetail\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                type: 1,\n                num2: 10291,\n                num: th.room.room_number\n            }\n        };\n        cc.log(\"===>>>[getScoreDetail] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onResultDetailCloseClicked() {\n        this.resultDeatilNode.active = false;\n    },\n    onChanganbaocunClicked() {\n        cc.log(\"长按保存....\");\n        th.webCaptureScreen();\n    },\n    showNiuType(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        const nodeSeat = this.nodeSeats[index];\n        const nodePoker = this.nodePokers[index];\n        if (player.account_id != th.getMyselfAccountId()) {\n            //th.myself.account_id 因观战修改成th.getMyselfAccountId()\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = nodeSeat.x > 0 ? -160 : 150;\n            niuType.y = -20;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.2));\n        } else {\n            //TODO 显示牛几\n            let niuType = th.pokerManager.getNiuSprite(\n                player.card_type,\n                player.combo_point\n            );\n            niuType.x = 310;\n            niuType.y = 85;\n            niuType.scale = 0.1;\n            nodePoker.addChild(niuType);\n            niuType.runAction(cc.scaleTo(0.3, 1.5));\n        }\n        let niuIndex = th.getNiuIndex(player.card_type, player.combo_point);\n        let mp3Name = \"bull\" + niuIndex + \".m4a\";\n        th.audioManager.playSFX(mp3Name);\n    },\n    initView() {\n        cc.log(\"GameNN initView\");\n        this.nodeCountdown.active = false;\n        this.spriteClickLookPai.node.active = false;\n        this.initRoomInfo();\n        this.initAnhaoAndId();\n        this.initSeat();\n        this.initMtpBtn();\n        this.refreshOptions();\n        cc.log(\"InitView:\", th.room);\n        cc.log(\"InitView:\", th.myself);\n        const { room_status, banker_mode, account_status } = th.room;\n        cc.log(\"room_status, banker_mode :\", room_status, banker_mode);\n        if (room_status == 2) {\n            //如果观战\n            if (!th.myself.isPlayer) {\n                th.room.players.forEach(player => {\n                    player.cards = new Array(5).fill(-1);\n                });\n                cc.log(\"观战:\", th.room);\n                this.showPokers();\n                return;\n            }\n            if (\n                banker_mode == 1 ||\n                banker_mode == 2 ||\n                banker_mode == 3 ||\n                banker_mode == 4\n            ) {\n                //是自由抢庄或者明牌抢庄直接发牌\n                //通比牛牛也直接发\n                //转庄牛牛也直接发\n                cc.log(\"自由抢庄或者明牌抢庄直接发牌\");\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            } else if (banker_mode == 5 && account_status >= 6) {\n                cc.log(\"固定庄家发牌\");\n                //固定庄家闲家下注时才发牌\n                let player = th.getMyselfPlayer();\n                player.cards = th.room.cards;\n                this.showPokers();\n            }\n        }\n        //是不是有庄\n        let player = th.getBankerPlayer();\n        if (player) {\n            let index = th.getLocalIndex(player.serial_num - 1);\n            this.componentSeats[index].setBanker(true);\n        }\n        cc.log(\"th.myself.isPlayer:,\", th.myself.isPlayer);\n        this.node.getChildByName(\"icon_look\").active = !th.myself.isPlayer;\n    },\n    initMtpBtn() {\n        let [mtp1, mtp2, mtp3, mtp4] = th.room.bet_type_arr;\n        this.btnPlayerMtp1.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp1 + \"倍\";\n        this.btnPlayerMtp2.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp2 + \"倍\";\n        this.btnPlayerMtp3.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp3 + \"倍\";\n        this.btnPlayerMtp4.node\n            .getChildByName(\"lbl_txt\")\n            .getComponent(\"cc.Label\").string = mtp4 + \"倍\";\n        this.btnBankerMtp1.node.acitve = false;\n        this.btnBankerMtp2.node.acitve = false;\n        this.btnBankerMtp4.node.acitve = false;\n        this.btnPlayerMtp1.node.active = false;\n        this.btnPlayerMtp2.node.active = false;\n        this.btnPlayerMtp3.node.active = false;\n        this.btnPlayerMtp4.node.active = false;\n\n        this.btnPlayerMtp1.node.multiples = mtp1;\n        this.btnPlayerMtp2.node.multiples = mtp2;\n        this.btnPlayerMtp3.node.multiples = mtp3;\n        this.btnPlayerMtp4.node.multiples = mtp4;\n\n        this.btnQiang.node.active = false;\n        this.btnBuqiang.node.active = false;\n        this.btnReady.node.active = false;\n        this.btnShow.node.active = false;\n\n        this.btnXiazhuang.node.active = false;\n        this.btnShangzhuang.node.active = false;\n        this.btnBuShangzhuang.node.active = false;\n    },\n    refreshOptions() {\n        if (!th.myself.isPlayer) {\n            //游客直接不显示\n            this.nodeOptions.active = false;\n        } else {\n            this.nodeOptions.active = true;\n\n            /*\n            banker_mode: 1,\n            1 = 自由抢庄     抢与不抢（没有倍数）都不抢或者都抢随机一个    选倍数（不是庄选）    开牌\n            2 = 明牌抢庄\n            3 = 转庄牛牛,牛牛上庄\n            4 = 通比牛牛\n            5 = 固定庄家 \n            */\n            let noBanker = th.getBankerPlayer() == null ? true : false;\n            const banker_mode = th.room.banker_mode;\n            const isZYQZ = banker_mode == 1;\n            const isMPQZ = banker_mode == 2;\n            const isGDZJ = banker_mode == 5;\n\n            let player = th.getMyselfPlayer();\n            //准备按钮\n            let isShowBtnReady =\n                (player.account_status == 0 || player.account_status == 1) &&\n                th.room.room_status == 1;\n            this.btnReady.node.active = isShowBtnReady;\n            this.sprReady.node.active = isShowBtnReady;\n\n            this.btnXiazhuang.node.active =\n                isShowBtnReady &&\n                isGDZJ &&\n                th.room.room_status == 1 &&\n                !noBanker &&\n                player.is_banker == 1 &&\n                th.room.game_num >= 3;\n\n            //抢庄按钮\n            let isShowQiangBrank =\n                player.account_status == 3 &&\n                (th.room.room_status == 1 || th.room.room_status == 2);\n            this.btnBankerMtp1.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp2.node.active = isShowQiangBrank && isMPQZ;\n            this.btnBankerMtp4.node.active = isShowQiangBrank && isMPQZ;\n            this.btnQiang.node.active = isShowQiangBrank && isZYQZ;\n            this.btnBuqiang.node.active =\n                isShowQiangBrank && (isZYQZ || isMPQZ);\n            this.sprQiangzhuang.node.active = isShowQiangBrank;\n            //闲加倍数选择\n            let isShowSelectMultiples =\n                player.is_banker == 0 &&\n                player.account_status == 6 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                player.multiples == 0;\n            this.btnPlayerMtp1.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp2.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp3.node.active = isShowSelectMultiples;\n            this.btnPlayerMtp4.node.active = isShowSelectMultiples;\n            this.sprWaitPlayerBet.node.active = isShowSelectMultiples;\n            //摊牌按钮\n            let isShowText =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount <= 0;\n            this.btnShow.node.active = isShowText;\n\n            let isShowClickLookPai =\n                player.account_status == 7 &&\n                (th.room.room_status == 1 || th.room.room_status == 2) &&\n                th.myself.needLookCount > 0;\n            this.spriteClickLookPai.node.active = isShowClickLookPai;\n            this.sprWaitShow.node.active = isShowClickLookPai || isShowText;\n\n            //上状不上庄按钮\n\n            this.btnShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker; //&&player.account_score>=th.room.bankerscore\n            this.btnBuShangzhuang.node.active =\n                isShowQiangBrank && isGDZJ && noBanker;\n        }\n    },\n    initRoomInfo() {\n        this.lblRoomInfo.string = `${th.room.game_num}/${\n            th.room.total_num\n        }局 底分：${th.room.base_score}分`;\n    },\n    initAnhaoAndId() {\n        this.lblAnhao.string =\n            \"暗号：\" +\n            (th.myself.individuality == \"\" || th.myself.individuality == null\n                ? \"自定义暗号\"\n                : th.myself.individuality);\n        this.lblId.string = \"ID:\" + th.myself.account_id;\n    },\n    initSeat() {\n        const seatsxy = th.getSeatXY();\n        for (let i = 0; i < seatsxy.length; i++) {\n            let [x, y] = seatsxy[i];\n            let seat = cc.instantiate(this.seatPrefab);\n            seat.x = x;\n            seat.y = y;\n            seat.seatIndex = i; //为座位编号\n            this.baseNode.addChild(seat);\n            this.nodeSeats.push(seat);\n            this.componentSeats.push(seat.getComponent(\"Seat\"));\n            this.nodePokers.push(\n                seat.getChildByName(\"info\").getChildByName(\"pokers\")\n            );\n        }\n        const players = th.room.players;\n        for (let i = 0; i < players.length; ++i) {\n            cc.log(`name:${players[i].nickname}`);\n            this.initSingleSeat(players[i]);\n        }\n    },\n    initSingleSeat: function(player) {\n        const index = th.getLocalIndex(player.serial_num - 1);\n        this.componentSeats[index].setInfo(\n            player.account_id,\n            player.nickname,\n            player.account_score,\n            player.headimgurl,\n            player.sex\n        );\n        this.componentSeats[index].setOffline(\n            player.online_status == 1 ? false : true\n        );\n        /*\n        this.componentSeats[index].setBanker(\n            player.is_banker == 1 ? true : false\n        );\n        */\n        this.componentSeats[index].setScore(player.account_score);\n        this.componentSeats[index].setReady(player.account_status == 2);\n        if (th.room.banker_mode == 4) {\n            //通比牛牛没有庄\n            this.componentSeats[index].setMultiples(null);\n        } else {\n            if (player.account_status == 4) {\n                //不抢\n                this.componentSeats[index].setMultiples(\"n\");\n            } else if (player.account_status == 5) {\n                //抢庄\n                let mtp = player.multiples != 0 ? \"x\" + player.multiples : \"\";\n                this.componentSeats[index].setMultiples(\"y\" + mtp);\n            } else if (player.account_status == 6) {\n                this.componentSeats[index].setMultiples(\n                    player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                );\n                /*\n                //闲家倍数\n                if (player.is_banker == 1) {\n                    this.componentSeats[index].setMultiples(\n                        player.multiples != 0 ? \"x\" + player.multiples : \"\"\n                    );\n                } else {\n                    this.componentSeats[index].setMultiples(null);\n                }\n                */\n            } else if (\n                player.account_status == 7 ||\n                player.account_status == 8\n            ) {\n                //未摊牌\n                this.componentSeats[index].setMultiples(\n                    player.is_banker == 1 ? null : \"x\" + player.multiples\n                );\n            } else {\n                this.componentSeats[index].setMultiples(null);\n            }\n        }\n    },\n    onCopyCliecked: function(targer, data) {\n        th.audioManager.playSFX(\"click.m4a\");\n        this.copyRoomUrlWin.getComponent(\"CopyRoomUrl\").show();\n    },\n    onBankerMultiplesClicked: function(targer, value) {\n        let multiples = 1;\n        if (Number(value) == 0) {\n            multiples = 1;\n            th.audioManager.playSFX(`robbanker.m4a`);\n        } else {\n            multiples = Number(value);\n            th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        }\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 1,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[GrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBuqiangClicked: function() {\n        th.audioManager.playSFX(\"nobanker.m4a\");\n        const params = {\n            operation: \"GrabBanker\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                is_grab: 0,\n                multiples: 1\n            }\n        };\n        cc.log(\"===>>>[NoGrabBanker] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onReadyClicked: function() {\n        cc.log(\"onReadyClicked\");\n        const params = {\n            operation: \"ReadyStart\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ReadyStart] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onPlayerMultiplesClicked: function(targer, value) {\n        let multiples = targer.target.multiples;\n        th.audioManager.playSFX(`multiples${multiples}.m4a`);\n        const params = {\n            operation: \"PlayerMultiples\",\n            account_id: th.myself.account_id,\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id,\n                multiples: Number(multiples)\n            }\n        };\n        cc.log(\"===>>>[PlayerMultiples] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onShowClicked: function(targer) {\n        cc.log(\"onPlayerMultiplesClicked:\");\n        const params = {\n            operation: \"ShowCard\", //操作标志\n            account_id: th.myself.account_id, //用户id};\n            session: th.sign,\n            data: {\n                room_id: th.room.room_id\n            }\n        };\n        cc.log(\"===>>>[ShowCard] GameNN:\", params);\n        th.ws.send(JSON.stringify(params));\n    },\n    onBackClicked: function(targer) {\n        th.wc.show(\"正在加载。。。\");\n        cc.director.loadScene(\"Hall\", () => {\n            th.wc.hide();\n        });\n    },\n    onChatClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.chatWin.active = true;\n    },\n    onMoreClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.moreWin.active = true;\n    },\n    onMoreCloseClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.moreWin.active = false;\n    },\n    onThemeClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this._bgImgIdx = (this._bgImgIdx + 1) % 3;\n        this.bg1.node.active = this._bgImgIdx == 0;\n        this.bg2.node.active = this._bgImgIdx == 1;\n        this.bg3.node.active = this._bgImgIdx == 2;\n    },\n    onLookClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.guanzhanWin.getComponent(\"Guanzhan\").show();\n    },\n    onPokerClicked(targer, value) {\n        cc.log(\"Poker\", targer.target.pokerId, value);\n        let pokerId = targer.target.pokerId;\n        if (pokerId != -1) {\n            this.showOpenPokerAnim(targer.target);\n            th.myself.needLookCount = th.myself.needLookCount - 1;\n            this.refreshOptions();\n        }\n    },\n    onSettingClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.settingWin.active = true;\n        this.moreWin.active = false;\n    },\n    onGuizeClicked(targer) {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.guizeWin.getComponent(\"Guize\").show(th.gametype);\n        this.moreWin.active = false;\n    },\n    onFangzuobiClicked() {\n        th.audioManager.playSFX(\"click.mp3\");\n        this.fangzuobiWin.getComponent(\"Fangzuobi\").show();\n    },\n    onXiazhuang(targer) {\n        th.alert.show(\n            \"下庄提示\",\n            \"下庄之后，将当前战绩进行结算。是否确定下庄？\",\n            () => {\n                cc.log(\"下庄\");\n                const params = {\n                    operation: \"GameOver\",\n                    account_id: th.myself.account_id,\n                    session: th.sign,\n                    data: {\n                        room_id: th.room.room_id\n                    }\n                };\n                cc.log(\"===>>>[GameOver] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            },\n            true\n        );\n    },\n    showOpenPokerAnim(poker) {\n        let pokerId = poker.pokerId;\n        if (pokerId != -1) {\n            poker.runAction(\n                cc.sequence(\n                    cc.scaleTo(0.3, 0, 1),\n                    cc.callFunc(target => {\n                        target.addChild(\n                            th.pokerManager.getPokerSpriteById(pokerId)\n                        );\n                    }),\n                    cc.scaleTo(0.3, 1, 1),\n                    cc.callFunc(traget => {\n                        traget.pokerId = -1;\n                    })\n                )\n            );\n        }\n    },\n    showPokers() {\n        //找到坐位上有人，且准备的发牌\n        let seatIndexs = [];\n        let players = [];\n        th.room.players.forEach(player => {\n            cc.log(\"showPokers:\", player.account_status);\n            if (player.account_status > 1) {\n                const index = th.getLocalIndex(player.serial_num - 1);\n                seatIndexs.push(index);\n                players.push(player);\n            }\n        });\n        let myLocalIndex = th.getMyselfLocalIndex();\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            let pokerIds = player.cards;\n            let isMyself = seatIndexs[i] == myLocalIndex;\n            if (player.account_status == 8) {\n                //摊牌\n                pokerIds = player.cards;\n            } else if (player.account_status == 7) {\n                //没摊牌\n                if (isMyself) {\n                    pokerIds = new Array(5).fill(-1);\n                    for (let j = 0; j < 5 - th.myself.needLookCount; j++) {\n                        pokerIds[j] = player.cards[j];\n                    }\n                } else {\n                    pokerIds = new Array(5).fill(-1);\n                }\n            } else {\n                //其他\n                pokerIds = new Array(5).fill(-1);\n            }\n            cc.log(player.nickname + \" 发牌：\", pokerIds, player.cards);\n            let basePoker = this.nodePokers[seatIndexs[i]];\n            basePoker.removeAllChildren();\n            let realPokersIds = player.cards;\n            for (let pi = 0; pi < pokerIds.length; pi++) {\n                let pokerId = pokerIds[pi];\n                let realPokerId = realPokersIds[pi] || -1;\n                let poker = th.pokerManager.getPokerSpriteById(\n                    isMyself ? -1 : pokerId\n                ); //pokerId\n                poker.pokerId = isMyself ? realPokerId : -1; //-1 防止其他玩家牌可以点\n                poker.scale = 0.65;\n                //poker.x = (seat.x > 0 ? -250 : 45) + basePoker.y + pi * 30;\n                poker.position = basePoker.convertToNodeSpaceAR(\n                    cc.v2(375, 603 + 60)\n                );\n                if (pokerId == -1) {\n                    let clickEventHandler = new cc.Component.EventHandler();\n                    clickEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\n                    clickEventHandler.component = \"GameNN\"; //这个是代码文件名\n                    clickEventHandler.handler = \"onPokerClicked\";\n                    clickEventHandler.customEventData = realPokerId;\n                    poker\n                        .getComponent(cc.Button)\n                        .clickEvents.push(clickEventHandler);\n                }\n                basePoker.addChild(poker);\n            }\n        }\n        //发牌效果\n        th.audioManager.playSFX(\"fapai.m4a\");\n        for (let i = 0; i < 5; i++) {\n            for (let j = 0; j < seatIndexs.length; j++) {\n                let seatIndex = seatIndexs[j];\n                let seat = this.nodeSeats[seatIndex];\n                let basePokers = this.nodePokers[seatIndex];\n                let pokers = basePokers.children;\n                let poker = pokers[i];\n                let isMyself = seatIndex == myLocalIndex;\n                let player = players[j];\n                let showCard =\n                    player.account_status == 8\n                        ? true\n                        : i < 5 - th.myself.needLookCount;\n                //cc.log(seatIndex, myLocalIndex, seatIndex == myLocalIndex);\n                ((poker, delay, x, y, isMyself, showCard) => {\n                    //cc.log(\"delay:\", delay, x, y, isMyself);\n                    if (isMyself) {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.spawn(\n                                    cc.moveTo(0.2, cc.v2(x, y)),\n                                    cc.scaleTo(0.2, 1)\n                                ),\n                                cc.callFunc(target => {\n                                    if (showCard) {\n                                        this.showOpenPokerAnim(target);\n                                    }\n                                })\n                            )\n                        );\n                    } else {\n                        poker.runAction(\n                            cc.sequence(\n                                cc.delayTime(delay),\n                                cc.moveTo(0.2, cc.v2(x, y))\n                            )\n                        );\n                    }\n                })(\n                    poker,\n                    0.1 + i * 0.04 * seatIndexs.length + j * 0.04,\n                    (isMyself ? 100 : seat.x > 0 ? -210 : 90) +\n                        basePokers.y +\n                        i * (isMyself ? 110 : 30),\n                    isMyself ? -25 : 0,\n                    isMyself,\n                    showCard\n                );\n            }\n        }\n\n        //如果玩家已经 摊牌，显示牛\n        for (let i = 0; i < seatIndexs.length; i++) {\n            let player = players[i];\n            if (player.account_status == 8) {\n                this.showNiuType(player);\n            }\n        }\n    },\n    setCountdown(val, content) {\n        let num = Number(val);\n        this.nodeCountdown.active = num > 0 ? true : false;\n        if (content) {\n            this.nodeCountdown\n                .getChildByName(\"lbl_title\")\n                .getComponent(\"cc.Label\").string = content;\n        } else {\n            this.nodeCountdown.getChildByName(\"lbl_title\").active = false;\n        }\n        this._countdownEndTime = Date.now() + num * 1000;\n        this._alertStartTime = Date.now() + (num - 3) * 1000;\n        this._isPlay = false;\n\n        this.scheduleOnce(() => {\n            if (this._countdownEndTime <= Date.now()) {\n                this.nodeCountdown.active = false;\n            }\n        }, num + 0.1);\n    },\n    update: function(dt) {\n        var now = Date.now();\n        if (this._countdownEndTime > now) {\n            var miao = Math.ceil((this._countdownEndTime - now) / 1000);\n            this.lblCountdown.string = miao;\n        }\n        if (this._alertStartTime < now && !this._isPlay) {\n            this._isPlay = true;\n            //th.audioManager.playSFX(\"timeup_alarm.mp3\");\n        }\n        if (this.holdClick) {\n            this.holdTimeEclipse++;\n            if (this.holdTimeEclipse > 120) {\n                //如果长按时间大于2s，则认为长按了2s\n                this.holdTimeEclipse = 120;\n            }\n        }\n    },\n    toConnectApi: function(targer) {\n        cc.log(\"onCreateClicked:\", this.createFrom);\n        //断开大厅连接连接游戏websocket\n        th.webSocketManager.connectGameServer(\n            {\n                ip: \"47.96.177.207\",\n                port: 10000,\n                namespace: \"api\"\n            },\n            () => {\n                th.wc.show(\"正在获取结果...\");\n                const params = {\n                    operation: \"getScoreBoard\", //操作标志\n                    account_id: th.myself.account_id, //用户id};\n                    session: th.sign,\n                    data: {\n                        type: 1,\n                        num2: 10291,\n                        num: th.room.room_number\n                    }\n                };\n                cc.log(\"===>>>[getScoreBoard] GameNN:\", params);\n                th.ws.send(JSON.stringify(params));\n            }\n        );\n    }\n});\n"]}