{"version":3,"sources":["Global.js"],"names":["cc","Class","extends","Component","properties","onLoad","log","window","th","initManager","urlParse","node","getContentSize","width","height","wsurl","myself","id","name","headImgUrl","fangka","phone","numberOfPeople","seatxy","getSeatXY","toString","ws","require","AudioManager","audioManager","init","playBGM","WebSocketManager","webSocketManager","initHandlers","params","code","location","value","str","href","num","indexOf","substr","arr","split","i","length","substring","args"],"mappings":"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","file":"Global.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {},\r\n\r\n    onLoad: function() {\r\n        cc.log(\"Global onLoad....................\");\r\n        window.th = window.th || {};\r\n\r\n        this.initManager();\r\n        this.urlParse();\r\n\r\n        const { width, height } = this.node.getContentSize();\r\n        th.wsurl = \"ws://47.96.177.207:10000/api\"; //websocket连接地址\r\n        th.width = width; //宽度\r\n        th.height = height; //高度\r\n        th.myself = {\r\n            id: \"000000\",\r\n            name: \"游客\",\r\n            headImgUrl: \"\",\r\n            fangka: 0,\r\n            phone: \"--------\"\r\n        };\r\n        th.numberOfPeople = 13; //人数\r\n        //座位坐标\r\n        th.seatxy = {\r\n            \"6\": [\r\n                [305, -100],\r\n                [305, 200],\r\n                [-100, 485],\r\n                [-305, 200],\r\n                [-305, -100],\r\n                [-305, -420]\r\n            ],\r\n            \"9\": [\r\n                [305, -200],\r\n                [305, 0],\r\n                [305, 200],\r\n                [305, 400],\r\n                [-305, 400],\r\n                [-305, 200],\r\n                [-305, 0],\r\n                [-305, -200],\r\n                [-305, -420]\r\n            ],\r\n            \"10\": [\r\n                [305, -220],\r\n                [305, -40],\r\n                [305, 140],\r\n                [305, 320],\r\n                [-100, 485],\r\n                [-305, 320],\r\n                [-305, 140],\r\n                [-305, -40],\r\n                [-305, -220],\r\n                [-305, -420]\r\n            ],\r\n            \"12\": [\r\n                [305, -260],\r\n                [305, -110],\r\n                [305, 40],\r\n                [305, 190],\r\n                [305, 340],\r\n                [-100, 485],\r\n                [-305, 340],\r\n                [-305, 190],\r\n                [-305, 40],\r\n                [-305, -110],\r\n                [-305, -260],\r\n                [-305, -420]\r\n            ],\r\n            \"13\": [\r\n                [305, -260],\r\n                [305, -110],\r\n                [305, 40],\r\n                [305, 190],\r\n                [305, 340],\r\n                [305, 485],\r\n                [-305, 485],\r\n                [-305, 340],\r\n                [-305, 190],\r\n                [-305, 40],\r\n                [-305, -110],\r\n                [-305, -260],\r\n                [-305, -420]\r\n            ]\r\n        };\r\n        th.getSeatXY = function() {\r\n            return th.seatxy[this.numberOfPeople.toString()];\r\n        };\r\n    },\r\n    initManager() {\r\n        th.ws = require(\"WebSocket\");\r\n\r\n        const AudioManager = require(\"AudioManager\");\r\n        th.audioManager = new AudioManager();\r\n        th.audioManager.init();\r\n\r\n        //播放背景音乐\r\n        th.audioManager.playBGM(\"bg_hall.mp3\");\r\n\r\n        const WebSocketManager = require(\"WebSocketManager\");\r\n        th.webSocketManager = new WebSocketManager();\r\n        th.webSocketManager.initHandlers();\r\n    },\r\n    urlParse() {\r\n        var params = { code: 123 };\r\n        if (window.location == null) {\r\n            return params;\r\n        }\r\n        var name, value;\r\n        var str = window.location.href; //取得整个地址栏\r\n        var num = str.indexOf(\"?\");\r\n        str = str.substr(num + 1); //取得所有参数   stringvar.substr(start [, length ]\r\n        var arr = str.split(\"&\"); //各个参数放到数组里\r\n        for (var i = 0; i < arr.length; i++) {\r\n            num = arr[i].indexOf(\"=\");\r\n            if (num > 0) {\r\n                name = arr[i].substring(0, num);\r\n                value = arr[i].substr(num + 1);\r\n                params[name] = value;\r\n            }\r\n        }\r\n        cc.log(\"Params:\", params);\r\n        th.args = params;\r\n    }\r\n});\r\n"]}